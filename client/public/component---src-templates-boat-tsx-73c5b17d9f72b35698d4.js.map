{"version":3,"sources":["webpack:///./node_modules/consolidated-events/lib/index.esm.js","webpack:///./src/molecules/full-width-carousel.tsx","webpack:///./node_modules/react-hotkeys/es/react-hotkeys.production.min.js","webpack:///./src/atoms/progress-dots.tsx","webpack:///./src/images/specsAndFeaturesBg.jpg","webpack:///./src/templates/boat/customizations-section-component.tsx","webpack:///./node_modules/react-use/esm/useLockBodyScroll.js","webpack:///./src/templates/boat/discover-section.tsx","webpack:///./src/components/specsAndFeatures/ToggleButtons.tsx","webpack:///./src/components/specsAndFeatures/ToggleSwitch.tsx","webpack:///./src/components/specsAndFeatures/SpecificationsSection.tsx","webpack:///./src/components/specsAndFeatures/FeaturesSection.tsx","webpack:///./src/components/specsAndFeatures/SpecificationsAndFeatures.tsx","webpack:///./src/molecules/media-gallery.tsx","webpack:///./src/templates/boat.tsx","webpack:///./src/types/boat.ts","webpack:///./src/services/animations.ts","webpack:///./src/molecules/carousel.tsx","webpack:///./src/molecules/slider.tsx","webpack:///./src/types/common.ts","webpack:///./node_modules/react-hotkeys/index.es.js","webpack:///./src/services/swiping.ts","webpack:///./src/images/close-cursor.png","webpack:///./node_modules/react-waypoint/es/index.js"],"names":["CAN_USE_DOM","window","document","createElement","memoized","canUsePassiveEventListeners","undefined","addEventListener","removeEventListener","Object","defineProperty","supportsPassiveOption","opts","get","noop","e","testPassiveEventListeners","ensureCanMutateNextEventHandlers","eventHandlers","handlers","nextHandlers","slice","TargetEventHandlers","target","this","events","prototype","getEventHandlers","eventName","options","normalizedEventOptions","key","String","capture","passive","once","handleEvent","event","forEach","handler","add","listener","_this","length","bind","push","isSubscribed","index","indexOf","splice","eventOptions","normalizeEventOptions","animations","initial","opacity","animate","zIndex","exit","transition","duration","FullWidthCarousel","items","blockPosition","useState","page","setPage","itemIndex","wrap","goToItem","oneBasedIndex","media","useEffect","cacheImages","map","item","image","className","clsx","data-component","ratio","div","drag","dragConstraints","left","right","dragElastic","onDragEnd","offset","velocity","determineSwipeAction","x","onSwipeLeft","onSwipeRight","videoUrl","alt","videoOptions","controls","src","style","background","current","total","variant","onClick","onClickNext","onClickPrev","_typeof","obj","Symbol","iterator","constructor","_classCallCheck","instance","Constructor","TypeError","_defineProperties","props","i","descriptor","enumerable","configurable","writable","_createClass","protoProps","staticProps","_defineProperty","value","_extends","assign","arguments","source","hasOwnProperty","call","apply","_objectSpread","ownKeys","keys","getOwnPropertySymbols","concat","filter","sym","getOwnPropertyDescriptor","_inherits","subClass","superClass","create","_setPrototypeOf","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","p","isNativeReflectConstruct","Reflect","construct","sham","Proxy","Date","toString","_construct","Parent","args","Class","a","Function","_wrapNativeSuper","_cache","Map","fn","has","set","Wrapper","_objectWithoutProperties","excluded","sourceKeys","_objectWithoutPropertiesLoose","sourceSymbolKeys","propertyIsEnumerable","_assertThisInitialized","self","ReferenceError","_possibleConstructorReturn","_get","property","receiver","base","object","_superPropBase","desc","_toConsumableArray","arr","Array","isArray","arr2","_arrayWithoutHoles","iter","from","_iterableToArray","_nonIterableSpread","dictionaryFrom","b","reduce","c","_defaultConfiguration","logLevel","defaultKeyEvent","defaultComponent","defaultTabIndex","ignoreTags","enableHardSequences","ignoreKeymapAndHandlerChangesByDefault","ignoreEventsCondition","tagName","d","toLowerCase","Configuration","option","isContentEditable","ignoreRepeatedEventsWhenKeyHeldDown","simulateMissingKeyPressEvents","stopEventPropagationAfterHandling","stopEventPropagationAfterIgnoring","allowCombinationSubmatches","customKeyCodes","_configuration","_ignoreTagsDict","_customKeyNamesDict","values","console","warn","Logger","levels","error","some","log","none","info","debug","verbose","KeyEventType","keydown","keypress","keyup","ModifierFlagsDictionary","Shift","Meta","Control","Alt","ShiftedKeysDictionary","1","2","3","4","5","6","7","8","9","0","resolveShiftedAlias","toUpperCase","hasKey","invertArrayDictionary","includeOriginal","UnshiftedKeysDictionary","resolveUnshiftedAlias","KeyOSAndLayoutAliasesDictionary$1","isString","stripSuperfluousWhitespace","trim","replace","MousetrapToReactKeyNamesDictionary","tab","capslock","shift","meta","ctrl","space","spacebar","escape","esc","up","down","return","del","command","enter","backspace","ins","pageup","pagedown","end","home","contextmenu","numlock","KeyShorthandDictionary","cmd","standardizeKeyName","match","translateToKey","12","13","16","17","18","19","20","27","32","33","34","35","36","37","38","39","40","45","46","112","113","114","115","116","117","118","119","120","121","122","123","144","145","224","NonPrintableKeysDictionary","isNonPrintableKeyName","isValidKey","fromCharCode","charCodeAt","isCustomKeyName","InvalidKeyNameError","f","Error","normalizedCombinationId","sort","join","KeySequenceParser","split","g","parseCombination","h","j","id","keyDictionary","keyEventType","size","sequence","prefix","combination","ensureValidKeys","AltedKeysDictionary","k","l","m","n","q","r","s","t","u","v","w","y","z","UnaltedKeysDictionary","resolveUnaltedAlias","resolveAltedAlias","AltShiftedKeysDictionary","UnaltShiftedKeysDictionary","resolveUnaltShiftedAlias","resolveAltShiftedAlias","KeyCombinationSerializer","parse","KeyEventSequenceIndex","isUndefined","KeyEventState","KeyEventStateArrayManager","newRecord","isObject","isEmpty","KeyCombination","_keys","_includesKeyUp","_update","_ids","_keyAliases","_getKeyStates","keysStillPressedDict","_setKeyState","_getKeyState","isKeyIncluded","clone","setBit","addKey","isKeyStillPressed","isEventTriggered","isKeyReleased","_getKeyStateType","_isKeyEventSimulated","getIds","ids","keyAliases","getKeyAliases","serialize","resolveKeyAlias","applicableAliasFunctions","buildKeyAliases","getNormalizedKeyName","KeyHistory","maxLength","_records","_maxLength","_push","any","getLength","_ensureInitialKeyCombination","getCurrentCombination","setKeyState","_trimHistory","toJSON","_shift","arrayFrom","ComponentTree","childIds","parentId","keyMap","_addChildId","_getParentId","_removeChildId","stringifyFirst","without","_registry","ComponentOptionsListIterator","_list","_position","getAtPosition","getPosition","getComponent","ComponentOptionsList","_idToIndex","_longestSequence","_longestSequenceComponentId","_keyMapEventRecord","containsId","update","_build","_getLastIndex","getIndexById","_isUpdatingComponentWithLongestSequence","getLongestSequence","sequenceLength","_recalculateLongestSequence","removeAtPosition","removeAtIndex","componentId","_applyHardSequences","actions","_buildActionDictionary","_getLongestSequenceComponentId","getNewIterator","next","longestSequence","isValidKeySerialization","sequences","action","keySequence","normalizeActionOptions","_addActionOptions","actionName","indexFromEnd","KeysWithKeyUpHiddenByCmd","Enter","Backspace","ArrowRight","ArrowLeft","ArrowUp","ArrowDown","CapsLock","keyupIsHiddenByCmd","KeyCombinationMatcher","_actionConfigs","_order","_includesMatcherForCombination","_addHandlerToActionConfig","_addNewActionConfig","_setOrder","done","_matchesActionConfig","actionConfigs","order","keyUpIsBeingHidden","getNumberOfKeys","canBeMatched","every","wasEventPreviouslyTriggered","_setCombinationMatcher","_getCombinationMatcher","KeyHistoryMatcher","_combinationMatchers","_eventRecord","_getOrCreateCombinationMatcher","addMatch","_findCombinationMatcher","findMatch","getMostRecentCombinations","fill","ActionResolver","_keyMapMatchers","_unmatchedHandlerStatus","_handlersDictionary","_keySequencesDictionary","_componentList","_componentListIterator","_componentHasUnmatchedHandlers","_addHandlersFromComponent","_addActionsFromComponent","_getKeyHistoryMatcher","getKeyHistoryMatcher","hasMatchesForEventType","componentHasActionsBoundToEventType","_getHandlers","_isClosestHandlerFound","_addKeySequence","_getUnmatchedHandlerStatus","_addHandler","copyAttributes","describeKeyEventType","parseInt","stateFromEvent","simulated","SEQUENCE_ATTRIBUTES","KEYMAP_ATTRIBUTES","AbstractKeyEventStrategy","logger","keyEventManager","_componentTree","rootComponentId","_reset","resetKeyHistory","componentList","_initHandlerResolutionState","_keyHistory","_newKeyHistory","_actionResolver","keypressEventsToSimulate","keyupEventsToSimulate","getKeyHistory","force","_buildApplicationKeyMap","_createSequenceFromConfig","setParent","remove","setMaxLength","hasEnded","hasKeyPressEvent","findMatchingKeySequenceInComponent","_stopEventPropagationAfterHandlingIfEnabled","_stopEventPropagation","KeyEventCounter","_id","getId","normalizeKey","Esc","Spacebar","Left","Up","Right","Down","Del","Win","Menu","Apps","Scroll","MozPrintableKey","getKeyName","keyCode","charCode","nativeEvent","type","getEventCharCode","reactsGetEventKey","isCmdKey","EventResponse","EventPropagator","logPrefix","_previousPropagation","_logPrefix","_previousPosition","_actionHandled","_ignoreEvent","_observeIgnoredEvents","_stopping","_componentId","_key","_type","getPreviousPosition","isFirstPropagationStep","incrementId","repeat","ignoreEvent","isStopped","isRoot","_clone","copyState","setIgnoreEvent","isIgnoringEvent","stop","finishPropagationStep","stopPropagation","FocusOnlyKeyEventStrategy","focusTreeId","eventPropagator","resetOnNextFocus","_addComponent","isPendingPropagation","startNewPropagationStep","_howToHandleKeyEvent","isEnding","_startAndLogNewKeyCombination","_addToAndLogCurrentKeyCombination","_callHandlerIfActionNotHandled","_simulateKeyPressForNonPrintableKeys","_eventIsToBeIgnored","_checkForModifierFlagDiscrepancies","isKeyPressSimulated","isKeyUpSimulated","_simulateKeyUpEventsHiddenByCmd","_handleEventSimulation","_shouldSimulate","forEachKey","startNewKeyCombination","addKeyToCurrentCombination","_cloneAndMergeEvent","isGlobalListenersBound","_simulatePendingKeyEvents","describe","anyActionsForEventType","isHandled","_callClosestMatchingHandler","setHandled","logIcons","eventIcons","componentIcons","eventId","contains","find","capitalize","GlobalKeyEventStrategy","listenersBound","listeners","_updateDocumentHandlers","_listenersShouldBeBound","normalizeEventName","keyCombination","_howReactAppRespondedTo","_callHandlerIfExists","reactAppHistoryWithEvent","closeHangingKeyCombination","_allKeysAreReleased","getKeyDictionary","simulatePendingKeyPressEvents","simulatePendingKeyUpEvents","isFromFocusOnlyComponent","KeyEventManager","_focusOnlyEventStrategy","configuration","_globalEventStrategy","mountedComponentsCount","getApplicationKeyMap","registerKeyMap","reregisterKeyMap","deregisterKeyMap","_incrementComponentCount","registerComponentMount","_decrementComponentCount","onblur","_clearKeyHistory","addKeyCombinationListener","enableHotKeys","updateEnabledHotKeys","disableHotKeys","handleKeydown","handleKeyPress","handleKeyUp","getEventPropagator","observeIgnoredEvents","getPreviousPropagation","isForKey","isForEventType","backwardsCompatibleContext","deprecatedAPI","contextTypes","childContextTypes","newAPI","contextType","createContext","getChildContext","_childContext","_originalRender","render","Provider","withHotKeys","_handleFocus","_handleBlur","_handleKeyDown","_handleKeyPress","_handleKeyUp","_componentIsFocused","getInstance","hotKeysParentId","allowChanges","root","onFocus","_wrapFunction","onBlur","tabIndex","_shouldBindKeyListeners","onKeyDown","onKeyPress","onKeyUp","hotKeys","_handlersIncludeHardSequences","_focusTreeIds","_getFocusTreeId","_getComponentOptions","_focused","context","_focusTreeIdsPush","registerComponentUnmount","_focusTreeIdsShift","_getEventOptions","func","bool","number","HotKeys","innerRef","component","ref","propTypes","oneOfType","GlobalHotKeys","registerGlobalKeyMap","globalHotKeysParentId","children","reregisterGlobalKeyMap","updateEnabledGlobalHotKeys","registerGlobalComponentMount","enableGlobalHotKeys","deregisterGlobalKeyMap","disableGlobalHotKeys","registerGlobalComponentUnmount","GlobalHotKeys$1","withHotKeysIgnoreOverride","only","except","_handleKeyEvent","_reloadDictionaries","_onlyDict","_exceptDict","_shouldIgnoreEvent","string","arrayOf","IgnoreKeys$1","ObserveKeys$1","withIgnoreKeys","withObserveKeys","configure","init","recordKeyCombination","ProgressDots","array","useMemo","_","isCurrent","disabled","module","exports","PrevArrow","icon","ArrowIcon","iconClassName","aria-label","NextArrow","CustomizationsSectionComponent","title","subtitle","backgroundImage","useBackgroundsQuery","customizationSection","currentSliderIndex","setCurrentSliderIndex","isMobile","useMedia","sliderRef","useRef","sliderSettings","slidesToShow","arrows","touchThreshold","nextArrow","prevArrow","onInit","beforeChange","oldIndex","newIndex","afterChange","responsive","breakpoint","settings","slidesToScroll","sliderWidth","theme","sm","lg","md","width","sliderIndex","header","content","copy","slickPrev","slickNext","BespokeOptionCard","data-index","position","preventDefault","rawEvent","touches","isIosDevice","navigator","platform","test","bodies","doc","documentListenerAdded","locked","elementRef","body","getClosestBody","el","document_1","contentDocument","offsetParent","bodyInfo","counter","initialOverflow","overflow","delete","ontouchmove","_locked","DiscoverSection","sectionTitle","disableBackground","discoverSection","data-section-type","DiscoverMedia","showVideo","setShowVideo","autoPlayVideo","setAutoPlayVideo","useLockBodyScroll","overlay","top","bottom","padding","border","borderRadius","isOpen","contentLabel","onRequestClose","cursor","CloseCursor","url","playing","config","file","attributes","height","onEnter","onLeave","bottomOffset","PlayIcon","playsinline","muted","ToggleButtons","selectedCategory","onCategoryClick","specBtnVariant","featureBtnVariant","ToggleSwitch","isToggled","onToggle","choices","checked","onChange","Specification","name","unitToggle","exitBeforeEnter","valueKey","usValues","metricValues","SpecificationValueMotionDiv","SpecificationsSection","specificationsCategories","specification","StrikeThrough","styled","AnimatedBorder","Header","Close","StyledFeatureLi","li","CloseX","as","motion","rotate","viewBox","x1","x2","y2","stroke","strokeWidth","y1","FeaturesSection","featureCategories","expanded","setExpanded","featureCategory","ease","features","feature","descriptions","description","SpecsAndFeaturesSection","specifications","useToggle","setIsToggled","setSelectedCategory","showUnitToggle","hasSpecifications","hasFeatures","SpecsFeaturesBg","backgroundSize","parentAnimations","variants","hidden","when","staggerChildren","visible","childAnimations","MediaGallery","gallery","showMore","lightboxMediaIndex","setLightboxMediaIndex","category","setCategory","normalizedGallery","galleryItem","thumbnail","filteredGallery","perPage","totalPages","Math","ceil","getGallerySlice","beforeLightboxMediaImage","max","afterLightboxMediaImage","min","lightboxMedia","CategorySelector","selected","hasPhotos","hasVideos","hasVideo","percentage","calculatePercentage","disabledNext","disabledPrev","onClose","goNext","goPrev","modalStyles","Lightbox","NEXT","PREV","closeTimeoutMS","animationDuration","img","GalleryImage","role","ExpandIcon","rest","start","round","embedUrl","BoatTemplate","boatEntry","data","craftAPI","entry","pageContext","craftSlug","titles","flexibleSections","section","shortTitle","boatSpecs","orderSectionTitle","orderSectionShortTitle","extractTitlesFromCraft","heroData","singleMedia","videoURL","boatNameLong","eyebrow","headline","stats","boatStats","boatLogo","boatName","ctaText","extractHeroSectionFromCraft","discoverData","textBlock","extractDiscoverSectionFromCraft","flexData","getFlexibleSections","extractFlexibleSectionsFromCraft","specsAndFeaturesData","specCategory","specs","specData","specDescriptions","specDesc","boatSpecDescription","boatSpecName","boatSpecCategory","extractSpecsSectionFromCraft","boatSpecifications","specificationCategory","specificationValueMetric","specificationValueUS","specificationLabel","boatFeatures","featureData","featureDescriptions","featureDesc","boatFeatureDescription","boatFeatureName","boatFeatureCategory","extractSpecsAndFeaturesFromCraft","galleryData","full","extractGallerySectionFromCraft","customizationsData","bespokeOptions","bespokeSectionCustomTitle","bespokeSectionCustomSubtitle","bespokeBackgroundImage","extractCustomizationsSectionFromCraft","orderData","orderSectionBackground","extractOrderDataFromCraft","powertrainData","moreDetailsInfo","powertrainMoreDetails","detail","layout","horizontalLayout","powertrainOptions","details","textBlockHeader","textBlockCopy","heroImage","powertrainOptionsHeader","moreDetails","buttonText","extractPowertrainDataFromCMS","setInquiryModalState","useInquiryModalState","slug","path","onClickCta","onClickInquire","bleedDirection","headerImage","blocks","label","side","block","isTwoColumnImageTextBlock","isOneColumnTextBlock","align","isOneColumnImageTextBlock","autoplayVideo","isCarouselBlock","createCarouselItems","isSliderBlock","isThreeColumnImagesBlock","images","isTwoColumnImagesBlock","isHorizontalImageTextBlock","extractedBlock","publicURL","isFullWidthCarouselBlock","isPowertrainBlock","isMoreDetailsBlock","moreDetailsData","fadeAnimationProps","Carousel","data-block-type","Direction","center","secondaryVariants","scale","Slider","nextItemIndex","Next","Prev","stiffness","damping","isFlexibleSection","sections","swipe","abs","swipePower","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","result","Super","NewTarget","computeOffsetPixels","contextHeight","str","pixelOffset","isNaN","parseFloat","isFinite","percentOffset","parseOffsetAsPercentage","isDOMElement","Component","timeout","timeoutQueue","onNextTick","cb","setTimeout","clearTimeout","defaultProps","scrollableAncestor","topOffset","horizontal","onPositionChange","fireOnRapidScroll","Waypoint","_React$PureComponent","_super","refElement","_ref","_this2","getWindow","cancelOnNextTick","_this2$props","ensureRefIsProvidedByChild","_handleScroll","_findScrollableAncestor","scrollEventListenerUnsubscribe","resizeEventListenerUnsubscribe","_this3","_this$props","global","resolveScrollableAncestorProp","node","parentNode","getComputedStyle","getPropertyValue","bounds","_getBounds","currentPosition","viewportBottom","viewportTop","waypointTop","waypointBottom","getCurrentPosition","previousPosition","_this$props2","callbackArg","contextScrollTop","_this$props3","_this$_ref$getBoundin","getBoundingClientRect","innerWidth","innerHeight","offsetWidth","offsetHeight","_this$props4","_this4","cloneElement","fontSize","PureComponent","above","below","inside","invisible","displayName"],"mappings":"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","file":"component---src-templates-boat-tsx-73c5b17d9f72b35698d4.js","sourcesContent":["var CAN_USE_DOM = !!(typeof window !== 'undefined' && window.document && window.document.createElement); // Adapted from Modernizr\n// https://github.com/Modernizr/Modernizr/blob/acb3f0d9/feature-detects/dom/passiveeventlisteners.js#L26-L37\n\nfunction testPassiveEventListeners() {\n  if (!CAN_USE_DOM) {\n    return false;\n  }\n\n  if (!window.addEventListener || !window.removeEventListener || !Object.defineProperty) {\n    return false;\n  }\n\n  var supportsPassiveOption = false;\n\n  try {\n    var opts = Object.defineProperty({}, 'passive', {\n      // eslint-disable-next-line getter-return\n      get: function () {\n        function get() {\n          supportsPassiveOption = true;\n        }\n\n        return get;\n      }()\n    });\n\n    var noop = function noop() {};\n\n    window.addEventListener('testPassiveEventSupport', noop, opts);\n    window.removeEventListener('testPassiveEventSupport', noop, opts);\n  } catch (e) {// do nothing\n  }\n\n  return supportsPassiveOption;\n}\n\nvar memoized = void 0;\n\nfunction canUsePassiveEventListeners() {\n  if (memoized === undefined) {\n    memoized = testPassiveEventListeners();\n  }\n\n  return memoized;\n}\n\nfunction normalizeEventOptions(eventOptions) {\n  if (!eventOptions) {\n    return undefined;\n  }\n\n  if (!canUsePassiveEventListeners()) {\n    // If the browser does not support the passive option, then it is expecting\n    // a boolean for the options argument to specify whether it should use\n    // capture or not. In more modern browsers, this is passed via the `capture`\n    // option, so let's just hoist that value up.\n    return !!eventOptions.capture;\n  }\n\n  return eventOptions;\n}\n/* eslint-disable no-bitwise */\n\n/**\n * Generate a unique key for any set of event options\n */\n\n\nfunction eventOptionsKey(normalizedEventOptions) {\n  if (!normalizedEventOptions) {\n    return 0;\n  } // If the browser does not support passive event listeners, the normalized\n  // event options will be a boolean.\n\n\n  if (normalizedEventOptions === true) {\n    return 100;\n  } // At this point, the browser supports passive event listeners, so we expect\n  // the event options to be an object with possible properties of capture,\n  // passive, and once.\n  //\n  // We want to consistently return the same value, regardless of the order of\n  // these properties, so let's use binary maths to assign each property to a\n  // bit, and then add those together (with an offset to account for the\n  // booleans at the beginning of this function).\n\n\n  var capture = normalizedEventOptions.capture << 0;\n  var passive = normalizedEventOptions.passive << 1;\n  var once = normalizedEventOptions.once << 2;\n  return capture + passive + once;\n}\n\nfunction ensureCanMutateNextEventHandlers(eventHandlers) {\n  if (eventHandlers.handlers === eventHandlers.nextHandlers) {\n    // eslint-disable-next-line no-param-reassign\n    eventHandlers.nextHandlers = eventHandlers.handlers.slice();\n  }\n}\n\nfunction TargetEventHandlers(target) {\n  this.target = target;\n  this.events = {};\n}\n\nTargetEventHandlers.prototype.getEventHandlers = function () {\n  function getEventHandlers(eventName, options) {\n    var key = String(eventName) + ' ' + String(eventOptionsKey(options));\n\n    if (!this.events[key]) {\n      this.events[key] = {\n        handlers: [],\n        handleEvent: undefined\n      };\n      this.events[key].nextHandlers = this.events[key].handlers;\n    }\n\n    return this.events[key];\n  }\n\n  return getEventHandlers;\n}();\n\nTargetEventHandlers.prototype.handleEvent = function () {\n  function handleEvent(eventName, options, event) {\n    var eventHandlers = this.getEventHandlers(eventName, options);\n    eventHandlers.handlers = eventHandlers.nextHandlers;\n    eventHandlers.handlers.forEach(function (handler) {\n      if (handler) {\n        // We need to check for presence here because a handler function may\n        // cause later handlers to get removed. This can happen if you for\n        // instance have a waypoint that unmounts another waypoint as part of an\n        // onEnter/onLeave handler.\n        handler(event);\n      }\n    });\n  }\n\n  return handleEvent;\n}();\n\nTargetEventHandlers.prototype.add = function () {\n  function add(eventName, listener, options) {\n    var _this = this; // options has already been normalized at this point.\n\n\n    var eventHandlers = this.getEventHandlers(eventName, options);\n    ensureCanMutateNextEventHandlers(eventHandlers);\n\n    if (eventHandlers.nextHandlers.length === 0) {\n      eventHandlers.handleEvent = this.handleEvent.bind(this, eventName, options);\n      this.target.addEventListener(eventName, eventHandlers.handleEvent, options);\n    }\n\n    eventHandlers.nextHandlers.push(listener);\n    var isSubscribed = true;\n\n    var unsubscribe = function () {\n      function unsubscribe() {\n        if (!isSubscribed) {\n          return;\n        }\n\n        isSubscribed = false;\n        ensureCanMutateNextEventHandlers(eventHandlers);\n        var index = eventHandlers.nextHandlers.indexOf(listener);\n        eventHandlers.nextHandlers.splice(index, 1);\n\n        if (eventHandlers.nextHandlers.length === 0) {\n          // All event handlers have been removed, so we want to remove the event\n          // listener from the target node.\n          if (_this.target) {\n            // There can be a race condition where the target may no longer exist\n            // when this function is called, e.g. when a React component is\n            // unmounting. Guarding against this prevents the following error:\n            //\n            //   Cannot read property 'removeEventListener' of undefined\n            _this.target.removeEventListener(eventName, eventHandlers.handleEvent, options);\n          }\n\n          eventHandlers.handleEvent = undefined;\n        }\n      }\n\n      return unsubscribe;\n    }();\n\n    return unsubscribe;\n  }\n\n  return add;\n}();\n\nvar EVENT_HANDLERS_KEY = '__consolidated_events_handlers__'; // eslint-disable-next-line import/prefer-default-export\n\nfunction addEventListener(target, eventName, listener, options) {\n  if (!target[EVENT_HANDLERS_KEY]) {\n    // eslint-disable-next-line no-param-reassign\n    target[EVENT_HANDLERS_KEY] = new TargetEventHandlers(target);\n  }\n\n  var normalizedEventOptions = normalizeEventOptions(options);\n  return target[EVENT_HANDLERS_KEY].add(eventName, listener, normalizedEventOptions);\n}\n\nexport { addEventListener };","import React, { useState, Fragment, useEffect } from 'react'\nimport { motion, AnimatePresence } from 'framer-motion'\nimport { wrap } from '@popmotion/popcorn'\nimport { FullWidthCarouselBlock } from '../types/common'\nimport { AspectRatio } from '../atoms/aspect-ratio'\nimport { ProgressDots } from '../atoms/progress-dots'\nimport { determineSwipeAction } from '../services/swiping'\nimport { AutoplayVideo } from '../atoms/autoplay-video'\nimport clsx from 'clsx'\nimport { CarouselButtons } from '../templates/boat.components'\nimport { cacheImages } from '../services/images'\n\nconst animations = {\n  initial: {\n    opacity: 0,\n  },\n  animate: {\n    zIndex: 1,\n    opacity: 1,\n  },\n  exit: {\n    zIndex: 0,\n    opacity: 0.5,\n  },\n  transition: {\n    opacity: { duration: 0.6 },\n  },\n}\nexport interface FullWidthCarouselProps\n  extends Omit<FullWidthCarouselBlock, 'type'> {\n  blockPosition?: 'first' | 'middle' | 'last'\n}\n\nexport const FullWidthCarousel = ({\n  items,\n  blockPosition,\n}: FullWidthCarouselProps) => {\n  const [page, setPage] = useState(0)\n  const itemIndex = wrap(0, items.length, page)\n  const goToItem = (oneBasedIndex: number) => {\n    setPage(oneBasedIndex - 1)\n  }\n  const media = items[itemIndex].media\n\n  useEffect(() => {\n    cacheImages(items.map((item) => `${item?.media?.image}?q=30&w=1500`))\n  }, [])\n\n  return (\n    <div\n      className={clsx('relative mx-auto', {\n        'md:-mt-32 first': blockPosition === 'first',\n        'mb-32 lg:mb-48 middle': blockPosition === 'middle',\n        '-mb-12 last': blockPosition === 'last',\n      })}\n      data-component=\"FullWidthCarousel\"\n    >\n      <AspectRatio ratio=\"2:1\">\n        <AnimatePresence>\n          <motion.div\n            key={page}\n            {...animations}\n            drag=\"x\"\n            dragConstraints={{ left: 0, right: 0 }}\n            dragElastic={0}\n            onDragEnd={(e, { offset, velocity }) => {\n              determineSwipeAction({\n                offset: offset.x,\n                velocity: velocity.x,\n                onSwipeLeft: () => goToItem(page + 2),\n                onSwipeRight: () => goToItem(page),\n              })\n            }}\n            className=\"absolute h-full w-full object-cover\"\n          >\n            {!!media?.videoUrl ? (\n              <AutoplayVideo\n                alt={media.alt}\n                image={media.image}\n                videoUrl={media.videoUrl}\n                videoOptions={{ controls: false }}\n              />\n            ) : (\n              <img\n                src={`${media?.image}?q=30&w=2000`}\n                className=\"pointer-events-none h-full w-full object-cover\"\n              />\n            )}\n          </motion.div>\n        </AnimatePresence>\n      </AspectRatio>\n      {items.length > 1 && (\n        <Fragment>\n          <div\n            className=\"absolute inset-0 z-10 pointer-events-none\"\n            style={{\n              background:\n                'linear-gradient(0deg, rgba(0, 0, 0, 0.7) 0%, rgba(0, 0, 0, 0) 47.5%)',\n            }}\n          />\n          <div className=\"absolute pb-4 bottom-0 left-1/2 transform -translate-x-1/2 z-10\">\n            <ProgressDots\n              current={itemIndex + 1}\n              total={items.length}\n              variant=\"horizontal\"\n              onClick={goToItem}\n            />\n          </div>\n          <CarouselButtons\n            className=\"hidden absolute bottom-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-10 md:flex justify-between w-full px-4\"\n            onClickNext={() => {\n              goToItem(page + 2)\n            }}\n            onClickPrev={() => {\n              goToItem(page)\n            }}\n          />\n        </Fragment>\n      )}\n    </div>\n  )\n}\n","/**\n * ISC License\n *\n * Copyright (c) 2018, Aleck Greenham\n *\n * Permission to use, copy, modify, and/or distribute this software for any purpose with or without fee is hereby granted, provided that the above copyright notice and this permission notice appear in all copies.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.\n */\nimport PropTypes from 'prop-types';\nimport React, { PureComponent, Component } from 'react';\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    _construct = Reflect.construct;\n  } else {\n    _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) _setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return _construct.apply(null, arguments);\n}\n\nfunction _isNativeFunction(fn) {\n  return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n}\n\nfunction _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n\n  _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !_isNativeFunction(Class)) return Class;\n\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n\n      _cache.set(Class, Wrapper);\n    }\n\n    function Wrapper() {\n      return _construct(Class, arguments, _getPrototypeOf(this).constructor);\n    }\n\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return _setPrototypeOf(Wrapper, Class);\n  };\n\n  return _wrapNativeSuper(Class);\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = _getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}\n\nfunction _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    _get = Reflect.get;\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = _superPropBase(target, property);\n\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nfunction dictionaryFrom(a) {\n  var b = 1 < arguments.length && arguments[1] !== void 0 ? arguments[1] : null;\n  return a.reduce(function (a, c) {\n    return a[c] = b || {\n      value: c\n    }, a;\n  }, {});\n}\n\nvar _defaultConfiguration = {\n  logLevel: \"warn\",\n  defaultKeyEvent: \"keydown\",\n  defaultComponent: \"div\",\n  defaultTabIndex: \"-1\",\n  ignoreTags: [\"input\", \"select\", \"textarea\"],\n  enableHardSequences: !1,\n  ignoreKeymapAndHandlerChangesByDefault: !0,\n  ignoreEventsCondition: function c(a) {\n    var b = a.target;\n\n    if (b && b.tagName) {\n      var d = b.tagName.toLowerCase();\n      return Configuration.option(\"_ignoreTagsDict\")[d] || b.isContentEditable;\n    }\n\n    return !1;\n  },\n  ignoreRepeatedEventsWhenKeyHeldDown: !0,\n  simulateMissingKeyPressEvents: !0,\n  stopEventPropagationAfterHandling: !0,\n  stopEventPropagationAfterIgnoring: !0,\n  allowCombinationSubmatches: !1,\n  customKeyCodes: {}\n},\n    _configuration = _objectSpread({}, _defaultConfiguration);\n\n_configuration._ignoreTagsDict = dictionaryFrom(_configuration.ignoreTags, !0);\n\nvar Configuration = function () {\n  function a() {\n    _classCallCheck(this, a);\n  }\n\n  return _createClass(a, null, [{\n    key: \"init\",\n    value: function e(a) {\n      var b = this,\n          c = a.ignoreTags,\n          d = a.customKeyCodes;\n      c && (a._ignoreTagsDict = dictionaryFrom(a.ignoreTags)), d && (a._customKeyNamesDict = dictionaryFrom(Object.values(a.customKeyCodes))), -1 !== [\"verbose\", \"debug\", \"info\"].indexOf(a.logLevel) && console.warn(\"React HotKeys: You have requested log level '\".concat(a.logLevel, \"' but for performance reasons, logging below severity level 'warning' is disabled in production. Please use the development build for complete logs.\")), Object.keys(a).forEach(function (c) {\n        b.set(c, a[c]);\n      });\n    }\n  }, {\n    key: \"set\",\n    value: function c(a, b) {\n      _configuration[a] = b;\n    }\n  }, {\n    key: \"reset\",\n    value: function b(a) {\n      _configuration[a] = _defaultConfiguration[a];\n    }\n  }, {\n    key: \"option\",\n    value: function b(a) {\n      return _configuration[a];\n    }\n  }]), a;\n}();\n\nvar Logger = function () {\n  function a() {\n    var b = this,\n        c = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : \"warn\";\n    if (_classCallCheck(this, a), _defineProperty(this, \"verbose\", this.noop), _defineProperty(this, \"debug\", this.noop), _defineProperty(this, \"info\", this.noop), _defineProperty(this, \"warn\", this.noop), _defineProperty(this, \"error\", this.noop), this.logLevel = this.constructor.levels[c], this.logLevel >= this.constructor.levels.error) this.error = console.error;else return;\n    if (this.logLevel >= this.constructor.levels.warn) this.warn = console.warn;else return;\n    [\"info\", \"debug\", \"verbose\"].some(function (a) {\n      return !(b.logLevel >= b.constructor.levels[a]) || (b[a] = console.log, !1);\n    });\n  }\n\n  return _createClass(a, [{\n    key: \"noop\",\n    value: function a() {}\n  }]), a;\n}();\n\n_defineProperty(Logger, \"logIcons\", [\"\\uD83D\\uDCD5\", \"\\uD83D\\uDCD7\", \"\\uD83D\\uDCD8\", \"\\uD83D\\uDCD9\"]), _defineProperty(Logger, \"componentIcons\", [\"\\uD83D\\uDD3A\", \"\\u2B50\\uFE0F\", \"\\uD83D\\uDD37\", \"\\uD83D\\uDD36\", \"\\u2B1B\\uFE0F\"]), _defineProperty(Logger, \"eventIcons\", [\"\\u2764\\uFE0F\", \"\\uD83D\\uDC9A\", \"\\uD83D\\uDC99\", \"\\uD83D\\uDC9B\", \"\\uD83D\\uDC9C\", \"\\uD83E\\uDDE1\"]), _defineProperty(Logger, \"levels\", {\n  none: 0,\n  error: 1,\n  warn: 2,\n  info: 3,\n  debug: 4,\n  verbose: 5\n});\nvar KeyEventType = {\n  keydown: 0,\n  keypress: 1,\n  keyup: 2\n};\nvar ModifierFlagsDictionary = {\n  Shift: [\"shiftKey\"],\n  Meta: [\"metaKey\"],\n  Control: [\"ctrlKey\"],\n  Alt: [\"altKey\"]\n};\nvar ShiftedKeysDictionary = {\n  \"`\": [\"~\"],\n  1: [\"!\"],\n  2: [\"@\", \"\\\"\"],\n  3: [\"#\", \"\\xA3\"],\n  4: [\"$\"],\n  5: [\"%\"],\n  6: [\"^\"],\n  7: [\"&\"],\n  8: [\"*\"],\n  9: [\"(\"],\n  0: [\")\"],\n  \"-\": [\"_\"],\n  \"=\": [\"plus\"],\n  \";\": [\":\"],\n  \"'\": [\"\\\"\", \"@\"],\n  \",\": [\"<\"],\n  \".\": [\">\"],\n  \"/\": [\"?\"],\n  \"\\\\\": [\"|\"],\n  \"[\": [\"{\"],\n  \"]\": [\"}\"],\n  \"#\": [\"~\"]\n};\n\nfunction resolveShiftedAlias(a) {\n  return ShiftedKeysDictionary[a] || [1 === a.length ? a.toUpperCase() : a];\n}\n\nfunction hasKey(a, b) {\n  return a.hasOwnProperty(b);\n}\n\nfunction invertArrayDictionary(a) {\n  var b = 1 < arguments.length && arguments[1] !== void 0 ? arguments[1] : {};\n  return Object.keys(a).reduce(function (c, d) {\n    var e = a[d];\n    return e.forEach(function (a) {\n      hasKey(c, a) || (c[a] = []), c[a].push(d);\n    }), b.includeOriginal && (!hasKey(c, d) && (c[d] = []), c[d] = [].concat(_toConsumableArray(c[d]), _toConsumableArray(e))), c;\n  }, {});\n}\n\nvar UnshiftedKeysDictionary = invertArrayDictionary(ShiftedKeysDictionary);\n\nfunction resolveUnshiftedAlias(a) {\n  return UnshiftedKeysDictionary[a] || [1 === a.length ? a.toLowerCase() : a];\n}\n\nvar KeyOSAndLayoutAliasesDictionary = {};\nvar KeyOSAndLayoutAliasesDictionary$1 = invertArrayDictionary(KeyOSAndLayoutAliasesDictionary, {\n  includeOriginal: !0\n});\n\nfunction isString(a) {\n  return \"string\" == typeof a;\n}\n\nfunction stripSuperfluousWhitespace(a) {\n  return isString(a) ? a.trim().replace(/\\s+/g, \" \") : a;\n}\n\nvar MousetrapToReactKeyNamesDictionary = {\n  tab: \"Tab\",\n  capslock: \"CapsLock\",\n  shift: \"Shift\",\n  meta: \"Meta\",\n  alt: \"Alt\",\n  ctrl: \"Control\",\n  space: \" \",\n  spacebar: \" \",\n  escape: \"Escape\",\n  esc: \"Escape\",\n  left: \"ArrowLeft\",\n  right: \"ArrowRight\",\n  up: \"ArrowUp\",\n  down: \"ArrowDown\",\n  return: \"Enter\",\n  del: \"Delete\",\n  command: \"Meta\",\n  option: \"Alt\",\n  enter: \"Enter\",\n  backspace: \"Backspace\",\n  ins: \"Insert\",\n  pageup: \"PageUp\",\n  pagedown: \"PageDown\",\n  end: \"End\",\n  home: \"Home\",\n  contextmenu: \"ContextMenu\",\n  numlock: \"Clear\"\n};\nvar KeyShorthandDictionary = {\n  cmd: \"Meta\"\n};\n\nfunction standardizeKeyName(a) {\n  var b = a.toLowerCase();\n  return MousetrapToReactKeyNamesDictionary[b] || KeyShorthandDictionary[b] || (a.match(/^f\\d+$/) ? a.toUpperCase() : a);\n}\n\nvar translateToKey = {\n  8: \"Backspace\",\n  9: \"Tab\",\n  12: \"Clear\",\n  13: \"Enter\",\n  16: \"Shift\",\n  17: \"Control\",\n  18: \"Alt\",\n  19: \"Pause\",\n  20: \"CapsLock\",\n  27: \"Escape\",\n  32: \" \",\n  33: \"PageUp\",\n  34: \"PageDown\",\n  35: \"End\",\n  36: \"Home\",\n  37: \"ArrowLeft\",\n  38: \"ArrowUp\",\n  39: \"ArrowRight\",\n  40: \"ArrowDown\",\n  45: \"Insert\",\n  46: \"Delete\",\n  112: \"F1\",\n  113: \"F2\",\n  114: \"F3\",\n  115: \"F4\",\n  116: \"F5\",\n  117: \"F6\",\n  118: \"F7\",\n  119: \"F8\",\n  120: \"F9\",\n  121: \"F10\",\n  122: \"F11\",\n  123: \"F12\",\n  144: \"NumLock\",\n  145: \"ScrollLock\",\n  224: \"Meta\"\n};\nvar NonPrintableKeysDictionary = dictionaryFrom(Object.values(translateToKey), !0);\n\nfunction isNonPrintableKeyName(a) {\n  return !!NonPrintableKeysDictionary[a];\n}\n\nfunction isCustomKeyName(a) {\n  return Configuration.option(\"_customKeyNamesDict\")[a];\n}\n\nfunction isValidKey(a) {\n  return isNonPrintableKeyName(a) || String.fromCharCode(a.charCodeAt(0)) === a || isCustomKeyName(a);\n}\n\nvar InvalidKeyNameError = function (a) {\n  function b() {\n    var a, c;\n\n    _classCallCheck(this, b);\n\n    for (var d = arguments.length, e = Array(d), f = 0; f < d; f++) {\n      e[f] = arguments[f];\n    }\n\n    return c = _possibleConstructorReturn(this, (a = _getPrototypeOf(b)).call.apply(a, [this].concat(e))), _defineProperty(_assertThisInitialized(_assertThisInitialized(c)), \"name\", \"InvalidKeyNameError\"), c;\n  }\n\n  return _inherits(b, a), b;\n}(_wrapNativeSuper(Error));\n\nfunction normalizedCombinationId(a) {\n  return a.sort().join(\"+\");\n}\n\nvar KeySequenceParser = function () {\n  function a() {\n    _classCallCheck(this, a);\n  }\n\n  return _createClass(a, null, [{\n    key: \"parse\",\n    value: function k(a) {\n      var b = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : {},\n          c = stripSuperfluousWhitespace(a),\n          d = c.split(\" \");\n\n      try {\n        var e = d.slice(0, d.length - 1),\n            f = d[d.length - 1],\n            g = e.map(function (a) {\n          var c = parseCombination(a, b);\n          return normalizedCombinationId(Object.keys(c));\n        }).join(\" \"),\n            h = parseCombination(f, b),\n            i = normalizedCombinationId(Object.keys(h)),\n            j = {\n          id: i,\n          keyDictionary: h,\n          keyEventType: b.keyEventType,\n          size: Object.keys(h).length\n        };\n        return {\n          sequence: {\n            prefix: g,\n            size: e.length + 1\n          },\n          combination: j\n        };\n      } catch (a) {\n        return {\n          sequence: null,\n          combination: null\n        };\n      }\n    }\n  }]), a;\n}();\n\nfunction parseCombination(a) {\n  var b = 1 < arguments.length && arguments[1] !== void 0 ? arguments[1] : {};\n  return a.replace(/^\\+|(\\s|[^+]\\+)\\+/, \"$1plus\").split(\"+\").reduce(function (a, c) {\n    var d = standardizeKeyName(c);\n    if (b.ensureValidKeys && !isValidKey(d)) throw new InvalidKeyNameError();\n    return a[d] = !0, a;\n  }, {});\n}\n\nvar AltedKeysDictionary = {\n  \"`\": [\"`\"],\n  1: [\"\\xA1\"],\n  2: [\"\\u2122\"],\n  3: [\"\\xA3\"],\n  4: [\"\\xA2\"],\n  5: [\"\\u221E\"],\n  6: [\"\\xA7\"],\n  7: [\"\\xB6\"],\n  8: [\"\\u2022\"],\n  9: [\"\\xAA\"],\n  0: [\"\\xBA\"],\n  \"-\": [\"\\u2013\"],\n  \"=\": [\"\\u2260\"],\n  a: [\"\\xE5\"],\n  b: [\"\\u222B\"],\n  c: [\"\\xE7\"],\n  d: [\"\\u2202\"],\n  e: [\"\\xB4\"],\n  f: [\"\\u0192\"],\n  g: [\"\\xA9\"],\n  h: [\"\\u02D9\"],\n  i: [\"\\u02C6\"],\n  j: [\"\\u2206\"],\n  k: [\"\\u02DA\"],\n  l: [\"\\xAC\"],\n  m: [\"\\xB5\"],\n  n: [\"\\u02DC\"],\n  o: [\"\\xF8\"],\n  p: [\"\\u03C0\"],\n  q: [\"\\u0153\"],\n  r: [\"\\xAE\"],\n  s: [\"\\xDF\"],\n  t: [\"\\u2020\"],\n  u: [\"\\xA8\"],\n  v: [\"\\u221A\"],\n  w: [\"\\u2211\"],\n  x: [\"\\u2248\"],\n  y: [\"\\xA5\"],\n  z: [\"\\u03A9\"],\n  \"[\": [\"\\u201C\"],\n  \"]\": [\"\\u2018\"],\n  \"\\\\\": [\"\\xAB\"],\n  \"'\": [\"\\xE6\"],\n  \";\": [\"\\u2026\"],\n  \",\": [\"\\u2264\"],\n  \".\": [\"\\u2265\"],\n  \"/\": [\"\\xF7\"]\n};\nvar UnaltedKeysDictionary = invertArrayDictionary(AltedKeysDictionary);\n\nfunction resolveUnaltedAlias(a) {\n  return UnaltedKeysDictionary[a] || [a];\n}\n\nfunction resolveAltedAlias(a) {\n  return AltedKeysDictionary[a] || [a];\n}\n\nvar AltShiftedKeysDictionary = {\n  \"`\": [\"`\"],\n  1: [\"\\u2044\"],\n  2: [\"\\u20AC\"],\n  3: [\"\\u2039\"],\n  4: [\"\\u203A\"],\n  5: [\"\\uFB01\"],\n  6: [\"\\uFB02\"],\n  7: [\"\\u2021\"],\n  8: [\"\\xB0\"],\n  9: [\"\\xB7\"],\n  0: [\"\\u201A\"],\n  \"-\": [\"\\u2014\"],\n  \"=\": [\"\\xB1\"],\n  a: [\"\\xC5\"],\n  b: [\"\\u0131\"],\n  c: [\"\\xC7\"],\n  d: [\"\\xCE\"],\n  e: [\"\\xB4\"],\n  f: [\"\\xCF\"],\n  g: [\"\\u02DD\"],\n  h: [\"\\xD3\"],\n  i: [\"\\u02C6\"],\n  j: [\"\\xD4\"],\n  k: [\"\\uF8FF\"],\n  l: [\"\\xD2\"],\n  m: [\"\\xC2\"],\n  n: [\"\\u02DC\"],\n  o: [\"\\xD8\"],\n  p: [\"\\u03C0\"],\n  q: [\"\\u0152\"],\n  r: [\"\\u2030\"],\n  s: [\"\\xCD\"],\n  t: [\"\\xCE\"],\n  u: [\"\\xA8\"],\n  v: [\"\\u25CA\"],\n  w: [\"\\u201E\"],\n  x: [\"\\u02DB\"],\n  y: [\"\\xC1\"],\n  z: [\"\\xB8\"],\n  \"[\": [\"\\u201D\"],\n  \"]\": [\"\\u2019\"],\n  \"\\\\\": [\"\\xBB\"],\n  \"'\": [\"\\xC6\"],\n  \";\": [\"\\xDA\"],\n  \",\": [\"\\xAF\"],\n  \".\": [\"\\u02D8\"]\n};\nvar UnaltShiftedKeysDictionary = invertArrayDictionary(AltShiftedKeysDictionary);\n\nfunction resolveUnaltShiftedAlias(a) {\n  return UnaltShiftedKeysDictionary[a] || resolveUnshiftedAlias(a);\n}\n\nfunction resolveAltShiftedAlias(a) {\n  return AltShiftedKeysDictionary[a] || [a];\n}\n\nvar KeyCombinationSerializer = function () {\n  function a() {\n    _classCallCheck(this, a);\n  }\n\n  return _createClass(a, null, [{\n    key: \"serialize\",\n    value: function f(a) {\n      var b = a.Shift,\n          c = a.Alt,\n          d = {},\n          e = Object.keys(a).sort();\n      return e.forEach(function (a) {\n        var e = [];\n\n        if (b) {\n          if (c) {\n            var f = resolveUnaltShiftedAlias(a),\n                g = resolveAltShiftedAlias(a);\n            e = [].concat(_toConsumableArray(e), [a], _toConsumableArray(f), _toConsumableArray(g));\n          } else {\n            var h = resolveUnshiftedAlias(a),\n                i = resolveShiftedAlias(a);\n            e = [].concat(_toConsumableArray(e), [a], _toConsumableArray(h), _toConsumableArray(i));\n          }\n        } else if (c) {\n          var j = resolveUnaltedAlias(a),\n              k = resolveAltedAlias(a);\n          e = [].concat(_toConsumableArray(e), [a], _toConsumableArray(j), _toConsumableArray(k));\n        } else {\n          e.push(a);\n          var m = KeyOSAndLayoutAliasesDictionary$1[a];\n          m && (e = [].concat(_toConsumableArray(e), _toConsumableArray(m)));\n        }\n\n        var l = Object.keys(d);\n        0 < l.length ? l.forEach(function (a) {\n          e.forEach(function (b) {\n            d[a + \"+\".concat(b)] = _objectSpread({}, d[a], _defineProperty({}, b, !0));\n          }), delete d[a];\n        }) : e.forEach(function (a) {\n          d[a] = _defineProperty({}, a, !0);\n        });\n      }), Object.values(d).map(function (a) {\n        return Object.keys(a).sort().join(\"+\");\n      });\n    }\n  }, {\n    key: \"isValidKeySerialization\",\n    value: function b(a) {\n      return !!(0 < a.length) && !!KeySequenceParser.parse(a, {\n        ensureValidKeys: !0\n      }).combination;\n    }\n  }]), a;\n}();\n\nvar KeyEventSequenceIndex = {\n  previous: 0,\n  current: 1\n};\n\nfunction resolveKeyAlias(a) {\n  return KeyOSAndLayoutAliasesDictionary$1[a] || [a];\n}\n\nfunction applicableAliasFunctions(a) {\n  if (a.Shift) return a.Alt ? [resolveAltShiftedAlias, resolveUnaltShiftedAlias] : [resolveShiftedAlias, resolveUnshiftedAlias];\n  if (a.Alt) return [resolveAltedAlias, resolveUnaltedAlias];\n\n  var b = function b(a) {\n    return [a];\n  };\n\n  return [b, b];\n}\n\nfunction isUndefined(a) {\n  return \"undefined\" == typeof a;\n}\n\nvar KeyEventState = {\n  unseen: 0,\n  seen: 1,\n  simulated: 2\n};\n\nvar KeyEventStateArrayManager = function () {\n  function a() {\n    _classCallCheck(this, a);\n  }\n\n  return _createClass(a, null, [{\n    key: \"newRecord\",\n    value: function d(a, b) {\n      var c = [KeyEventState.unseen, KeyEventState.unseen, KeyEventState.unseen];\n      if (!isUndefined(a)) for (var e = 0; e <= a; e++) {\n        c[e] = b;\n      }\n      return c;\n    }\n  }, {\n    key: \"setBit\",\n    value: function d(a, b, c) {\n      return a[b] = c, a;\n    }\n  }, {\n    key: \"clone\",\n    value: function d(a) {\n      for (var b = this.newRecord(), c = 0; c < a.length; c++) {\n        b[c] = a[c];\n      }\n\n      return b;\n    }\n  }]), a;\n}();\n\nfunction isObject(a) {\n  return !Array.isArray(a) && \"object\" === _typeof(a) && null !== a;\n}\n\nfunction isEmpty(a) {\n  return isObject(a) ? 0 === Object.keys(a).length : !a || 0 === a.length;\n}\n\nfunction size(a) {\n  return isObject(a) ? Object.keys(a).length : a.length;\n}\n\nvar KeyCombination = function () {\n  function a() {\n    var b = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {};\n    _classCallCheck(this, a), this._keys = b, this._includesKeyUp = !1, this._update();\n  }\n\n  return _createClass(a, [{\n    key: \"getIds\",\n    value: function a() {\n      return this._ids;\n    }\n  }, {\n    key: \"getKeyAliases\",\n    value: function a() {\n      return this._keyAliases;\n    }\n  }, {\n    key: \"getNormalizedKeyName\",\n    value: function d(a) {\n      var b = this._keys[a];\n      if (b) return a;\n      var c = this._keyAliases[a];\n      return c ? c : a;\n    }\n  }, {\n    key: \"getNumberOfKeys\",\n    value: function a() {\n      return size(this._keys);\n    }\n  }, {\n    key: \"any\",\n    value: function a() {\n      return 0 < Object.keys(this._getKeyStates()).length;\n    }\n  }, {\n    key: \"isEnding\",\n    value: function a() {\n      return this._includesKeyUp;\n    }\n  }, {\n    key: \"hasEnded\",\n    value: function a() {\n      return isEmpty(this.keysStillPressedDict());\n    }\n  }, {\n    key: \"addKey\",\n    value: function c(a, b) {\n      this._setKeyState(a, [KeyEventStateArrayManager.newRecord(), KeyEventStateArrayManager.newRecord(KeyEventType.keydown, b)]);\n    }\n  }, {\n    key: \"setKeyState\",\n    value: function g(a, b, c) {\n      var d = this._getKeyState(a);\n\n      if (this.isKeyIncluded(a)) {\n        var e = KeyEventStateArrayManager.clone(d[1]),\n            f = KeyEventStateArrayManager.clone(e);\n        KeyEventStateArrayManager.setBit(f, b, c), this._setKeyState(a, [e, f]);\n      } else this.addKey(a, c);\n\n      b === KeyEventType.keyup && (this._includesKeyUp = !0);\n    }\n  }, {\n    key: \"forEachKey\",\n    value: function b(a) {\n      return Object.keys(this._keys).forEach(a);\n    }\n  }, {\n    key: \"some\",\n    value: function b(a) {\n      return Object.keys(this._keys).some(a);\n    }\n  }, {\n    key: \"getKeyDictionary\",\n    value: function a() {\n      return dictionaryFrom(Object.keys(this._getKeyStates()), !0);\n    }\n  }, {\n    key: \"keysStillPressedDict\",\n    value: function b() {\n      var a = this;\n      return Object.keys(this._keys).reduce(function (b, c) {\n        return a.isKeyStillPressed(c) && (b[c] = a._getKeyState(c)), b;\n      }, {});\n    }\n  }, {\n    key: \"isKeyIncluded\",\n    value: function b(a) {\n      return !!this._getKeyState(a);\n    }\n  }, {\n    key: \"isKeyStillPressed\",\n    value: function b(a) {\n      return this.isEventTriggered(a, KeyEventType.keypress) && !this.isKeyReleased(a);\n    }\n  }, {\n    key: \"isKeyReleased\",\n    value: function b(a) {\n      return this.isEventTriggered(a, KeyEventType.keyup);\n    }\n  }, {\n    key: \"isEventTriggered\",\n    value: function c(a, b) {\n      return this._getKeyStateType(a, KeyEventSequenceIndex.current, b);\n    }\n  }, {\n    key: \"wasEventPreviouslyTriggered\",\n    value: function c(a, b) {\n      return this._getKeyStateType(a, KeyEventSequenceIndex.previous, b);\n    }\n  }, {\n    key: \"isKeyPressSimulated\",\n    value: function b(a) {\n      return this._isKeyEventSimulated(a, KeyEventType.keypress);\n    }\n  }, {\n    key: \"isKeyUpSimulated\",\n    value: function b(a) {\n      return this._isKeyEventSimulated(a, KeyEventType.keyup);\n    }\n  }, {\n    key: \"describe\",\n    value: function a() {\n      return this.getIds()[0];\n    }\n  }, {\n    key: \"toJSON\",\n    value: function a() {\n      return {\n        keys: this._getKeyStates(),\n        ids: this.getIds(),\n        keyAliases: this.getKeyAliases()\n      };\n    }\n  }, {\n    key: \"_getKeyStateType\",\n    value: function e(a, b, c) {\n      var d = this._getKeyState(a);\n\n      return d && d[b][c];\n    }\n  }, {\n    key: \"_update\",\n    value: function a() {\n      this._ids = KeyCombinationSerializer.serialize(this._keys), this._keyAliases = buildKeyAliases(this._keys);\n    }\n  }, {\n    key: \"_isKeyEventSimulated\",\n    value: function c(a, b) {\n      return this.isEventTriggered(a, b) === KeyEventState.simulated;\n    }\n  }, {\n    key: \"_getKeyStates\",\n    value: function a() {\n      return this._keys;\n    }\n  }, {\n    key: \"_getKeyState\",\n    value: function d(a) {\n      var b = this._keys[a];\n      if (b) return b;\n      var c = this._keyAliases[a];\n      if (c) return this._keys[c];\n    }\n  }, {\n    key: \"_setKeyState\",\n    value: function d(a, b) {\n      var c = this.getNormalizedKeyName(a);\n      this._keys[c] = b, this._update();\n    }\n  }]), a;\n}();\n\nfunction buildKeyAliases(a) {\n  return Object.keys(a).reduce(function (b, c) {\n    return resolveKeyAlias(c).forEach(function (d) {\n      applicableAliasFunctions(a).forEach(function (a) {\n        a(d).forEach(function (a) {\n          (a !== c || c !== d) && (b[a] = c);\n        });\n      });\n    }), b;\n  }, {});\n}\n\nvar KeyHistory = function () {\n  function a(b) {\n    var c = b.maxLength,\n        d = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : null;\n    _classCallCheck(this, a), this._records = [], this._maxLength = c, d ? this._push(d) : this._push(new KeyCombination());\n  }\n\n  return _createClass(a, [{\n    key: \"getMostRecentCombinations\",\n    value: function b(a) {\n      return this._records.slice(-a, -1);\n    }\n  }, {\n    key: \"any\",\n    value: function a() {\n      return this._records.some(function (a) {\n        return a.any();\n      });\n    }\n  }, {\n    key: \"getLength\",\n    value: function a() {\n      return this._records.length;\n    }\n  }, {\n    key: \"getCurrentCombination\",\n    value: function a() {\n      return this._records[this.getLength() - 1];\n    }\n  }, {\n    key: \"addKeyToCurrentCombination\",\n    value: function d(a, b, c) {\n      this._ensureInitialKeyCombination(), this.getCurrentCombination().setKeyState(a, b, c);\n    }\n  }, {\n    key: \"setMaxLength\",\n    value: function b(a) {\n      this._maxLength = a, this._trimHistory();\n    }\n  }, {\n    key: \"startNewKeyCombination\",\n    value: function d(a, b) {\n      this._ensureInitialKeyCombination();\n\n      var c = new KeyCombination(this.getCurrentCombination().keysStillPressedDict());\n      c.addKey(a, b), this._push(c);\n    }\n  }, {\n    key: \"toJSON\",\n    value: function a() {\n      return this._records.map(function (a) {\n        return a.toJSON();\n      });\n    }\n  }, {\n    key: \"_ensureInitialKeyCombination\",\n    value: function a() {\n      0 === this.getLength() && this._push(new KeyCombination());\n    }\n  }, {\n    key: \"_push\",\n    value: function b(a) {\n      this._trimHistory(), this._records.push(a);\n    }\n  }, {\n    key: \"_trimHistory\",\n    value: function a() {\n      for (; this.getLength() > this._maxLength;) {\n        this._shift();\n      }\n    }\n  }, {\n    key: \"_shift\",\n    value: function a() {\n      this._records.shift();\n    }\n  }]), a;\n}();\n\nvar Registry = function () {\n  function a() {\n    _classCallCheck(this, a), this._registry = {};\n  }\n\n  return _createClass(a, [{\n    key: \"get\",\n    value: function b(a) {\n      return this._registry[a];\n    }\n  }, {\n    key: \"set\",\n    value: function c(a, b) {\n      this._registry[a] = b;\n    }\n  }, {\n    key: \"remove\",\n    value: function b(a) {\n      delete this._registry[a];\n    }\n  }, {\n    key: \"toJSON\",\n    value: function a() {\n      return this._registry;\n    }\n  }]), a;\n}();\n\nfunction arrayFrom(a) {\n  return Array.isArray(a) ? a : a ? [a] : [];\n}\n\nfunction without(a) {\n  var b = 1 < arguments.length && arguments[1] !== void 0 ? arguments[1] : [],\n      c = 2 < arguments.length && arguments[2] !== void 0 ? arguments[2] : {},\n      d = dictionaryFrom(arrayFrom(b));\n  return Array.isArray(a) ? a.reduce(function (a, b) {\n    return d[b] && (c.stringifyFirst || d[b].value === b) || a.push(b), a;\n  }, []) : isObject(a) ? Object.keys(a).reduce(function (b, c) {\n    return d[c] || (b[c] = a[c]), b;\n  }, {}) : a;\n}\n\nvar ComponentTree = function (a) {\n  function b() {\n    return _classCallCheck(this, b), _possibleConstructorReturn(this, _getPrototypeOf(b).apply(this, arguments));\n  }\n\n  return _inherits(b, a), _createClass(b, [{\n    key: \"add\",\n    value: function d(a, c) {\n      _get(_getPrototypeOf(b.prototype), \"set\", this).call(this, a, {\n        childIds: [],\n        parentId: null,\n        keyMap: c\n      });\n    }\n  }, {\n    key: \"update\",\n    value: function e(a, c) {\n      var d = _get(_getPrototypeOf(b.prototype), \"get\", this).call(this, a);\n\n      _get(_getPrototypeOf(b.prototype), \"set\", this).call(this, a, _objectSpread({}, d, {\n        keyMap: c\n      }));\n    }\n  }, {\n    key: \"setParent\",\n    value: function c(a, b) {\n      this.get(a).parentId = b, this._addChildId(b, a);\n    }\n  }, {\n    key: \"remove\",\n    value: function d(a) {\n      var c = this._getParentId(a);\n\n      this._removeChildId(c, a), _get(_getPrototypeOf(b.prototype), \"remove\", this).call(this, a);\n    }\n  }, {\n    key: \"_getParentId\",\n    value: function c(a) {\n      var b = this.get(a);\n      return b && b.parentId;\n    }\n  }, {\n    key: \"_addChildId\",\n    value: function c(a, b) {\n      this.get(a).childIds.push(b);\n    }\n  }, {\n    key: \"_removeChildId\",\n    value: function d(a, b) {\n      var c = this.get(a);\n      c && (c.childIds = without(c.childIds, b));\n    }\n  }]), b;\n}(Registry);\n\nfunction removeAtIndex(a, b) {\n  return [].concat(_toConsumableArray(a.slice(0, b)), _toConsumableArray(a.slice(b + 1)));\n}\n\nvar ComponentOptionsListIterator = function () {\n  function a(b) {\n    _classCallCheck(this, a), this._list = b, this._position = -1;\n  }\n\n  return _createClass(a, [{\n    key: \"getPosition\",\n    value: function a() {\n      return this._position;\n    }\n  }, {\n    key: \"getComponent\",\n    value: function a() {\n      return this._list.getAtPosition(this.getPosition());\n    }\n  }, {\n    key: \"next\",\n    value: function a() {\n      return this.getPosition() + 1 < this._list.getLength() ? (this._position++, this.getComponent()) : null;\n    }\n  }]), a;\n}();\n\nvar ComponentOptionsList = function () {\n  function a() {\n    _classCallCheck(this, a), this._list = [], this._idToIndex = {}, this._longestSequence = 1, this._longestSequenceComponentId = null, this._keyMapEventRecord = KeyEventStateArrayManager.newRecord();\n  }\n\n  return _createClass(a, [{\n    key: \"getNewIterator\",\n    value: function a() {\n      return new ComponentOptionsListIterator(this);\n    }\n  }, {\n    key: \"add\",\n    value: function g(a, b, c, d) {\n      if (this.containsId(a)) return this.update(a, b, c, d);\n\n      var e = this._build(a, b, c, d);\n\n      this._list.push(e);\n\n      var f = this._getLastIndex();\n\n      return this._idToIndex[a] = f;\n    }\n  }, {\n    key: \"containsId\",\n    value: function b(a) {\n      return !!this.get(a);\n    }\n  }, {\n    key: \"get\",\n    value: function b(a) {\n      return this.getAtPosition(this.getIndexById(a));\n    }\n  }, {\n    key: \"getIndexById\",\n    value: function b(a) {\n      return this._idToIndex[a];\n    }\n  }, {\n    key: \"update\",\n    value: function h(a, b, c, d) {\n      var e = this._isUpdatingComponentWithLongestSequence(a),\n          f = this.getLongestSequence(),\n          g = this._build(a, b, c, d);\n\n      e && g.sequenceLength !== f && (g.sequenceLength > f ? this._longestSequence = g.sequenceLength : this._recalculateLongestSequence()), this._list[this.getIndexById(a)] = g;\n    }\n  }, {\n    key: \"remove\",\n    value: function c(a) {\n      var b = this._isUpdatingComponentWithLongestSequence(a);\n\n      this.removeAtPosition(this.getIndexById(a)), b && this._recalculateLongestSequence();\n    }\n  }, {\n    key: \"any\",\n    value: function a() {\n      return 0 !== this.getLength();\n    }\n  }, {\n    key: \"isRoot\",\n    value: function b(a) {\n      return this.getIndexById(a) >= this.getLength() - 1;\n    }\n  }, {\n    key: \"getLongestSequence\",\n    value: function a() {\n      return this._longestSequence;\n    }\n  }, {\n    key: \"anyActionsForEventType\",\n    value: function b(a) {\n      return !!this._keyMapEventRecord[a];\n    }\n  }, {\n    key: \"getLength\",\n    value: function a() {\n      return this._list.length;\n    }\n  }, {\n    key: \"getAtPosition\",\n    value: function b(a) {\n      return this._list[a];\n    }\n  }, {\n    key: \"removeAtPosition\",\n    value: function b(a) {\n      this._list = removeAtIndex(this._list, a);\n\n      for (var c = a; c < this.getLength();) {\n        this._idToIndex[this.getAtPosition(c).componentId] = c, c++;\n      }\n    }\n  }, {\n    key: \"toJSON\",\n    value: function a() {\n      return this._list;\n    }\n  }, {\n    key: \"_getLastIndex\",\n    value: function a() {\n      return this.getLength() - 1;\n    }\n  }, {\n    key: \"_build\",\n    value: function i(a, b, c, d) {\n      var e = this._applyHardSequences(b, c),\n          f = e.keyMap,\n          g = e.handlers,\n          h = this._buildActionDictionary(_objectSpread({}, b, f), d, a);\n\n      return {\n        actions: h,\n        handlers: g,\n        componentId: a,\n        options: d\n      };\n    }\n  }, {\n    key: \"_isUpdatingComponentWithLongestSequence\",\n    value: function b(a) {\n      return a === this._getLongestSequenceComponentId();\n    }\n  }, {\n    key: \"_getLongestSequenceComponentId\",\n    value: function a() {\n      return this._longestSequenceComponentId;\n    }\n  }, {\n    key: \"_recalculateLongestSequence\",\n    value: function d() {\n      for (var e = this.getNewIterator(); e.next();) {\n        var a = e.getComponent(),\n            b = a.longestSequence,\n            c = a.componentId;\n        b > this.getLongestSequence() && (this._longestSequenceComponentId = c, this._longestSequence = b);\n      }\n    }\n  }, {\n    key: \"_applyHardSequences\",\n    value: function c(a, b) {\n      return Configuration.option(\"enableHardSequences\") ? Object.keys(b).reduce(function (c, d) {\n        var e = !!a[d];\n        return !e && KeyCombinationSerializer.isValidKeySerialization(d) && (c.keyMap[d] = d), c.handlers[d] = b[d], c;\n      }, {\n        keyMap: {},\n        handlers: {}\n      }) : {\n        keyMap: a,\n        handlers: b\n      };\n    }\n  }, {\n    key: \"_buildActionDictionary\",\n    value: function e(a, b, c) {\n      var d = this;\n      return Object.keys(a).reduce(function (e, f) {\n        var g = a[f],\n            h = function () {\n          return isObject(g) && hasKey(g, \"sequences\") ? arrayFrom(g.sequences) : arrayFrom(g);\n        }();\n\n        return h.forEach(function (a) {\n          var g = normalizeActionOptions(a, b),\n              h = g.keySequence,\n              i = g.keyEventType;\n\n          d._addActionOptions(e, c, f, h, i);\n        }), e;\n      }, {});\n    }\n  }, {\n    key: \"_addActionOptions\",\n    value: function i(a, b, c, d, e) {\n      var f = KeySequenceParser.parse(d, {\n        keyEventType: e\n      }),\n          g = f.sequence,\n          h = f.combination;\n      g.size > this.getLongestSequence() && (this._longestSequence = g.size, this._longestSequenceComponentId = b), this._keyMapEventRecord[e] = KeyEventState.seen, a[c] || (a[c] = []), a[c].push(_objectSpread({\n        prefix: g.prefix,\n        actionName: c,\n        sequenceLength: g.size\n      }, h));\n    }\n  }]), a;\n}();\n\nfunction normalizeActionOptions(a, b) {\n  if (isObject(a)) {\n    var c = a.sequence,\n        d = a.action;\n    return {\n      keySequence: c,\n      keyEventType: isUndefined(d) ? KeyEventType[b.defaultKeyEvent] : KeyEventType[d]\n    };\n  }\n\n  return {\n    keySequence: a,\n    keyEventType: KeyEventType[b.defaultKeyEvent]\n  };\n}\n\nfunction indexFromEnd(a, b) {\n  return a[a.length - (b + 1)];\n}\n\nfor (var KeysWithKeyUpHiddenByCmd = {\n  Enter: !0,\n  Backspace: !0,\n  ArrowRight: !0,\n  ArrowLeft: !0,\n  ArrowUp: !0,\n  ArrowDown: !0,\n  CapsLock: !0\n}, i = 1; 13 > i; i++) {\n  KeysWithKeyUpHiddenByCmd[\"F\".concat(i)] = !0;\n}\n\nfunction keyupIsHiddenByCmd(a) {\n  return 1 === a.length || hasKey(KeysWithKeyUpHiddenByCmd, a);\n}\n\nvar KeyCombinationMatcher = function () {\n  function a() {\n    _classCallCheck(this, a), this._actionConfigs = {}, this._order = null;\n  }\n\n  return _createClass(a, [{\n    key: \"addMatch\",\n    value: function f(a, b) {\n      if (this._includesMatcherForCombination(a.id)) {\n        var c = a.keyEventType,\n            d = a.actionName,\n            e = a.id;\n\n        this._addHandlerToActionConfig(e, {\n          keyEventType: c,\n          actionName: d,\n          handler: b\n        });\n      } else this._addNewActionConfig(a, b);\n    }\n  }, {\n    key: \"findMatch\",\n    value: function k(a, b, c) {\n      this._order || this._setOrder();\n      var d = !0,\n          e = !1,\n          f = void 0;\n\n      try {\n        for (var g, h = this._order[Symbol.iterator](); !(d = (g = h.next()).done); d = !0) {\n          var i = g.value,\n              j = this._actionConfigs[i];\n          if (this._matchesActionConfig(a, b, c, j)) return j;\n        }\n      } catch (a) {\n        e = !0, f = a;\n      } finally {\n        try {\n          d || null == h.return || h.return();\n        } finally {\n          if (e) throw f;\n        }\n      }\n\n      return null;\n    }\n  }, {\n    key: \"toJSON\",\n    value: function a() {\n      return {\n        actionConfigs: this._actionConfigs,\n        order: this._order\n      };\n    }\n  }, {\n    key: \"_matchesActionConfig\",\n    value: function h(a, b, c, d) {\n      if (!canBeMatched(a, d)) return !1;\n      var e = d.events[c];\n      if (!e) return !1;\n      var f = !1,\n          g = Object.keys(d.keyDictionary).every(function (d) {\n        return !!a.isEventTriggered(d, c) && (b && b === a.getNormalizedKeyName(d) && (f = !a.wasEventPreviouslyTriggered(d, c)), !0);\n      });\n      return g && f;\n    }\n  }, {\n    key: \"_setOrder\",\n    value: function b() {\n      var a = Object.values(this._actionConfigs).reduce(function (a, b) {\n        var c = b.id,\n            d = b.size;\n        return a[d] || (a[d] = []), a[d].push(c), a;\n      }, {});\n      this._order = Object.keys(a).sort(function (c, a) {\n        return a - c;\n      }).reduce(function (b, c) {\n        return b.concat(a[c]);\n      }, []);\n    }\n  }, {\n    key: \"_addNewActionConfig\",\n    value: function j(a, b) {\n      var c = a.prefix,\n          d = a.sequenceLength,\n          e = a.id,\n          f = a.keyDictionary,\n          g = a.size,\n          h = a.keyEventType,\n          i = a.actionName;\n      this._setCombinationMatcher(e, {\n        prefix: c,\n        sequenceLength: d,\n        id: e,\n        keyDictionary: f,\n        size: g,\n        events: {}\n      }), this._addHandlerToActionConfig(e, {\n        keyEventType: h,\n        actionName: i,\n        handler: b\n      });\n    }\n  }, {\n    key: \"_addHandlerToActionConfig\",\n    value: function g(a, b) {\n      var c = b.keyEventType,\n          d = b.actionName,\n          e = b.handler,\n          f = this._getCombinationMatcher(a);\n\n      this._setCombinationMatcher(a, _objectSpread({}, f, {\n        events: _objectSpread({}, f.events, _defineProperty({}, c, {\n          actionName: d,\n          handler: e\n        }))\n      }));\n    }\n  }, {\n    key: \"_setCombinationMatcher\",\n    value: function c(a, b) {\n      this._actionConfigs[a] = b;\n    }\n  }, {\n    key: \"_getCombinationMatcher\",\n    value: function b(a) {\n      return this._actionConfigs[a];\n    }\n  }, {\n    key: \"_includesMatcherForCombination\",\n    value: function b(a) {\n      return !!this._getCombinationMatcher(a);\n    }\n  }]), a;\n}();\n\nfunction canBeMatched(a, b) {\n  var c = size(b.keyDictionary);\n  return Configuration.option(\"allowCombinationSubmatches\") || keyUpIsBeingHidden(a) ? a.getNumberOfKeys() >= c : a.getNumberOfKeys() === c;\n}\n\nfunction keyUpIsBeingHidden(a) {\n  return !!a.isKeyStillPressed(\"Meta\") && a.some(function (a) {\n    return keyupIsHiddenByCmd(a);\n  });\n}\n\nvar KeyHistoryMatcher = function () {\n  function a() {\n    _classCallCheck(this, a), this._combinationMatchers = {}, this._eventRecord = KeyEventStateArrayManager.newRecord();\n  }\n\n  return _createClass(a, [{\n    key: \"addMatch\",\n    value: function d(a, b) {\n      var c = this._getOrCreateCombinationMatcher(a.prefix);\n\n      c.addMatch(a, b), KeyEventStateArrayManager.setBit(this._eventRecord, a.keyEventType, KeyEventState.seen), (!this._longestSequence || this._longestSequence < a.sequenceLength) && (this._longestSequence = a.sequenceLength);\n    }\n  }, {\n    key: \"findMatch\",\n    value: function e(a, b, c) {\n      var d = this._findCombinationMatcher(a);\n\n      return d ? d.findMatch(a.getCurrentCombination(), a.getCurrentCombination().getNormalizedKeyName(b), c) : null;\n    }\n  }, {\n    key: \"hasMatchesForEventType\",\n    value: function b(a) {\n      return !!this._eventRecord[a];\n    }\n  }, {\n    key: \"getLongestSequence\",\n    value: function a() {\n      return this._longestSequence;\n    }\n  }, {\n    key: \"toJSON\",\n    value: function b() {\n      var a = this;\n      return Object.keys(this._combinationMatchers).reduce(function (b, c) {\n        var d = a._combinationMatchers[c];\n        return b[c] = d.toJSON(), b;\n      }, {});\n    }\n  }, {\n    key: \"_getOrCreateCombinationMatcher\",\n    value: function b(a) {\n      return this._combinationMatchers[a] || (this._combinationMatchers[a] = new KeyCombinationMatcher()), this._combinationMatchers[a];\n    }\n  }, {\n    key: \"_findCombinationMatcher\",\n    value: function m(a) {\n      var b = a.getMostRecentCombinations(this.getLongestSequence());\n      if (0 === b.length) return this._combinationMatchers[\"\"];\n\n      for (var c = b.map(function (a) {\n        return a.getIds();\n      }), d = c.map(function (a) {\n        return a.length;\n      }), e = Array(c.length).fill(0), f = !1; !f;) {\n        var g = e.map(function (a, b) {\n          return c[b][a];\n        }),\n            h = g.join(\" \");\n        if (this._combinationMatchers[h]) return this._combinationMatchers[h];\n\n        for (var i = 0, j = !0; j && i < e.length;) {\n          var k = indexFromEnd(e, i),\n              l = (k + 1) % (indexFromEnd(d, i) || 1);\n          e[e.length - (i + 1)] = l, j = 0 == l, j && i++;\n        }\n\n        f = i === e.length;\n      }\n    }\n  }]), a;\n}();\n\nvar ActionResolver = function () {\n  function a(b) {\n    _classCallCheck(this, a), this._keyMapMatchers = [], this._unmatchedHandlerStatus = [], this._handlersDictionary = {}, this._keySequencesDictionary = {};\n\n    for (var e = b.getNewIterator(); e.next();) {\n      var c = e.getComponent(),\n          d = c.handlers;\n      this._unmatchedHandlerStatus.push([Object.keys(d).length, {}]), this._keyMapMatchers.push(new KeyHistoryMatcher());\n    }\n\n    this._componentList = b, this._componentListIterator = b.getNewIterator();\n  }\n\n  return _createClass(a, [{\n    key: \"getKeyHistoryMatcher\",\n    value: function b(a) {\n      if (this._componentHasUnmatchedHandlers(a)) for (; this._componentListIterator.next();) {\n        this._addHandlersFromComponent(), this._addActionsFromComponent();\n      }\n      return this._getKeyHistoryMatcher(a);\n    }\n  }, {\n    key: \"componentHasActionsBoundToEventType\",\n    value: function c(a, b) {\n      return this.getKeyHistoryMatcher(a).hasMatchesForEventType(b);\n    }\n  }, {\n    key: \"findMatchingKeySequenceInComponent\",\n    value: function e(a, b, c, d) {\n      return this.componentHasActionsBoundToEventType(a, d) ? this.getKeyHistoryMatcher(a).findMatch(b, c, d) : null;\n    }\n  }, {\n    key: \"_getKeyHistoryMatcher\",\n    value: function b(a) {\n      return this._keyMapMatchers[a];\n    }\n  }, {\n    key: \"_addActionsFromComponent\",\n    value: function d() {\n      var a = this,\n          b = this._componentListIterator.getComponent(),\n          c = b.actions;\n\n      Object.keys(c).forEach(function (b) {\n        var d = a._getHandlers(b);\n\n        if (d) {\n          var e = d[0],\n              f = a._componentList.getAtPosition(e).handlers[b],\n              g = a._getKeyHistoryMatcher(e),\n              h = c[b];\n\n          h.forEach(function (b) {\n            var c = [b.prefix, b.id].join(\" \");\n            a._isClosestHandlerFound(c, b) || (g.addMatch(b, f), a._addKeySequence(c, [e, b.keyEventType]));\n          }), d.forEach(function (c) {\n            var d = a._getUnmatchedHandlerStatus(c);\n\n            d[1][b] || (d[1][b] = !0, d[0]--);\n          });\n        }\n      });\n    }\n  }, {\n    key: \"_getHandlers\",\n    value: function b(a) {\n      return this._handlersDictionary[a];\n    }\n  }, {\n    key: \"_addHandlersFromComponent\",\n    value: function d() {\n      var a = this,\n          b = this._componentListIterator.getComponent(),\n          c = b.handlers;\n\n      Object.keys(c).forEach(function (b) {\n        a._addHandler(b);\n      });\n    }\n  }, {\n    key: \"_addHandler\",\n    value: function b(a) {\n      this._handlersDictionary[a] || (this._handlersDictionary[a] = []), this._handlersDictionary[a].push(this._componentListIterator.getPosition());\n    }\n  }, {\n    key: \"_addKeySequence\",\n    value: function c(a, b) {\n      this._keySequencesDictionary[a] || (this._keySequencesDictionary[a] = []), this._keySequencesDictionary[a].push(b);\n    }\n  }, {\n    key: \"_componentHasUnmatchedHandlers\",\n    value: function b(a) {\n      return 0 < this._getUnmatchedHandlerStatus(a)[0];\n    }\n  }, {\n    key: \"_getUnmatchedHandlerStatus\",\n    value: function b(a) {\n      return this._unmatchedHandlerStatus[a];\n    }\n  }, {\n    key: \"_isClosestHandlerFound\",\n    value: function c(a, b) {\n      return this._keySequencesDictionary[a] && this._keySequencesDictionary[a].some(function (a) {\n        return a[1] === b.keyEventType;\n      });\n    }\n  }]), a;\n}();\n\nfunction copyAttributes(a, b, c) {\n  return c.forEach(function (c) {\n    hasKey(a, c) && (b[c] = a[c]);\n  }), b;\n}\n\nfunction describeKeyEventType(a) {\n  switch (parseInt(a, 10)) {\n    case 0:\n      return \"keydown\";\n\n    case 1:\n      return \"keypress\";\n\n    default:\n      return \"keyup\";\n  }\n}\n\nfunction hasKeyPressEvent(a) {\n  return !isNonPrintableKeyName(a);\n}\n\nfunction stateFromEvent(a) {\n  return a.simulated ? KeyEventState.simulated : KeyEventState.seen;\n}\n\nvar SEQUENCE_ATTRIBUTES = [\"sequence\", \"action\"],\n    KEYMAP_ATTRIBUTES = [\"name\", \"description\", \"group\"],\n    AbstractKeyEventStrategy = function () {\n  function a() {\n    var b = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {},\n        c = 1 < arguments.length ? arguments[1] : void 0;\n    _classCallCheck(this, a), this.logger = b.logger || new Logger(\"warn\"), this.componentId = -1, this.keyEventManager = c, this._componentTree = new ComponentTree(), this.rootComponentId = null, this._reset(), this.resetKeyHistory();\n  }\n\n  return _createClass(a, [{\n    key: \"_reset\",\n    value: function a() {\n      this.componentList = new ComponentOptionsList(), this._initHandlerResolutionState();\n    }\n  }, {\n    key: \"_newKeyHistory\",\n    value: function a() {\n      return new KeyHistory({\n        maxLength: this.componentList.getLongestSequence()\n      });\n    }\n  }, {\n    key: \"getKeyHistory\",\n    value: function a() {\n      return this._keyHistory ? this._keyHistory : (this._keyHistory = this._newKeyHistory(), this._keyHistory);\n    }\n  }, {\n    key: \"_initHandlerResolutionState\",\n    value: function a() {\n      this._actionResolver = null;\n    }\n  }, {\n    key: \"resetKeyHistory\",\n    value: function b() {\n      var a = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {};\n      this.keypressEventsToSimulate = [], this.keyupEventsToSimulate = [], this._keyHistory = this.getKeyHistory().any() && !a.force ? new KeyHistory({\n        maxLength: this.componentList.getLongestSequence()\n      }, new KeyCombination(this.getCurrentCombination().keysStillPressedDict())) : this._newKeyHistory();\n    }\n  }, {\n    key: \"getApplicationKeyMap\",\n    value: function a() {\n      return null === this.rootComponentId ? {} : this._buildApplicationKeyMap([this.rootComponentId], {});\n    }\n  }, {\n    key: \"_buildApplicationKeyMap\",\n    value: function d(a, b) {\n      var c = this;\n      return a.forEach(function (a) {\n        var d = c._componentTree.get(a),\n            e = d.childIds,\n            f = d.keyMap;\n\n        f && Object.keys(f).forEach(function (a) {\n          var d = f[a];\n          b[a] = {}, isObject(d) ? hasKey(d, \"sequences\") ? (copyAttributes(d, b[a], KEYMAP_ATTRIBUTES), b[a].sequences = c._createSequenceFromConfig(d.sequences)) : (copyAttributes(d, b[a], KEYMAP_ATTRIBUTES), b[a].sequences = [copyAttributes(d, {}, SEQUENCE_ATTRIBUTES)]) : b[a].sequences = c._createSequenceFromConfig(d);\n        }), c._buildApplicationKeyMap(e, b);\n      }), b;\n    }\n  }, {\n    key: \"_createSequenceFromConfig\",\n    value: function b(a) {\n      return arrayFrom(a).map(function (a) {\n        return isObject(a) ? copyAttributes(a, {}, SEQUENCE_ATTRIBUTES) : {\n          sequence: a\n        };\n      });\n    }\n  }, {\n    key: \"registerKeyMap\",\n    value: function b(a) {\n      return this.componentId += 1, this._componentTree.add(this.componentId, a), this.componentId;\n    }\n  }, {\n    key: \"reregisterKeyMap\",\n    value: function c(a, b) {\n      this._componentTree.update(a, b);\n    }\n  }, {\n    key: \"registerComponentMount\",\n    value: function c(a, b) {\n      isUndefined(b) ? this.rootComponentId = a : this._componentTree.setParent(a, b), void 0;\n    }\n  }, {\n    key: \"deregisterKeyMap\",\n    value: function b(a) {\n      this._componentTree.remove(a), a === this.rootComponentId && (this.rootComponentId = null);\n    }\n  }, {\n    key: \"_addComponent\",\n    value: function e(a) {\n      var b = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : {},\n          c = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : {},\n          d = 3 < arguments.length ? arguments[3] : void 0;\n      this.componentList.add(a, b, c, d), this.getKeyHistory().setMaxLength(this.componentList.getLongestSequence());\n    }\n  }, {\n    key: \"_allKeysAreReleased\",\n    value: function a() {\n      return this.getCurrentCombination().hasEnded();\n    }\n  }, {\n    key: \"getCurrentCombination\",\n    value: function a() {\n      return this.getKeyHistory().getCurrentCombination();\n    }\n  }, {\n    key: \"_shouldSimulate\",\n    value: function e(a, b) {\n      var c = hasKeyPressEvent(b),\n          d = this.getCurrentCombination();\n      return a === KeyEventType.keypress ? !c || c && d.isKeyStillPressed(\"Meta\") : a === KeyEventType.keyup && keyupIsHiddenByCmd(b) && d.isKeyReleased(\"Meta\");\n    }\n  }, {\n    key: \"_cloneAndMergeEvent\",\n    value: function d(a, b) {\n      var c = Object.keys(ModifierFlagsDictionary).reduce(function (b, c) {\n        return b[c] = a[c], b;\n      }, {});\n      return _objectSpread({}, c, b);\n    }\n  }, {\n    key: \"_callClosestMatchingHandler\",\n    value: function h(a, b, c, d, e) {\n      for (this._actionResolver || (this._actionResolver = new ActionResolver(this.componentList)); e <= d;) {\n        var i = this._actionResolver.getKeyHistoryMatcher(e);\n\n        var f = this._actionResolver.findMatchingKeySequenceInComponent(e, this.getKeyHistory(), b, c),\n            g = this.getCurrentCombination();\n\n        if (f) {\n          var j = f.events[c];\n\n          if (Configuration.option(\"allowCombinationSubmatches\")) {\n            var k = KeyCombinationSerializer.serialize(f.keyDictionary);\n          }\n\n          return j.handler(a), this._stopEventPropagationAfterHandlingIfEnabled(a, e), !0;\n        }\n\n        if (this._actionResolver.componentHasActionsBoundToEventType(e, c)) ;\n        e++;\n      }\n    }\n  }, {\n    key: \"_stopEventPropagationAfterHandlingIfEnabled\",\n    value: function c(a, b) {\n      return !!Configuration.option(\"stopEventPropagationAfterHandling\") && (this._stopEventPropagation(a, b), !0);\n    }\n  }, {\n    key: \"_stopEventPropagation\",\n    value: function a() {\n      throw new Error(\"_stopEventPropagation must be overridden by a subclass\");\n    }\n  }, {\n    key: \"_checkForModifierFlagDiscrepancies\",\n    value: function e(a, b, c) {\n      var d = this;\n      Object.keys(ModifierFlagsDictionary).forEach(function (e) {\n        if (b !== e || c !== KeyEventType.keyup) {\n          var f = d.getCurrentCombination(),\n              g = f.isKeyStillPressed(e);\n          ModifierFlagsDictionary[e].forEach(function (b) {\n            !1 === a[b] && g && f.setKeyState(e, KeyEventType.keyup, stateFromEvent(a));\n          });\n        }\n      });\n    }\n  }, {\n    key: \"_logPrefix\",\n    value: function a() {}\n  }]), a;\n}();\n\nvar KeyEventCounter = function () {\n  function a() {\n    _classCallCheck(this, a);\n  }\n\n  return _createClass(a, null, [{\n    key: \"getId\",\n    value: function a() {\n      return isUndefined(this._id) && (this._id = 0), this._id;\n    }\n  }, {\n    key: \"incrementId\",\n    value: function a() {\n      this._id = this.getId() + 1;\n    }\n  }]), a;\n}();\n\nfunction getEventCharCode(a) {\n  var b,\n      c = a.keyCode;\n  return \"charCode\" in a ? (b = a.charCode, 0 === b && 13 === c && (b = 13)) : b = c, 10 === b && (b = 13), 32 <= b || 13 === b ? b : 0;\n}\n\nvar normalizeKey = {\n  Esc: \"Escape\",\n  Spacebar: \" \",\n  Left: \"ArrowLeft\",\n  Up: \"ArrowUp\",\n  Right: \"ArrowRight\",\n  Down: \"ArrowDown\",\n  Del: \"Delete\",\n  Win: \"OS\",\n  Menu: \"ContextMenu\",\n  Apps: \"ContextMenu\",\n  Scroll: \"ScrollLock\",\n  MozPrintableKey: \"Unidentified\"\n};\n\nfunction reactsGetEventKey(a) {\n  if (a.key) {\n    var b = normalizeKey[a.key] || a.key;\n    if (\"Unidentified\" !== b) return b;\n  }\n\n  if (\"keypress\" === a.type) {\n    var c = getEventCharCode(a);\n    return 13 === c ? \"Enter\" : String.fromCharCode(c);\n  }\n\n  return \"keydown\" === a.type || \"keyup\" === a.type ? translateToKey[a.keyCode] || \"Unidentified\" : \"\";\n}\n\nfunction getKeyName(a) {\n  var b = function () {\n    var b = Configuration.option(\"customKeyCodes\"),\n        c = a.keyCode || a.charCode;\n    return hasKey(b, c) ? b[c] : a.nativeEvent ? a.key : reactsGetEventKey(a);\n  }();\n\n  return \"+\" === b ? \"plus\" : b;\n}\n\nfunction isCmdKey(a) {\n  return \"Meta\" === a;\n}\n\nvar EventResponse = {\n  unseen: 0,\n  ignored: 1,\n  seen: 2,\n  recorded: 3,\n  handled: 4\n};\n\nvar EventPropagator = function () {\n  function a(b, c) {\n    var d = c.logger,\n        e = c.logPrefix;\n    _classCallCheck(this, a), this._componentList = b, this._previousPropagation = null, this.logger = d, this._logPrefix = e, this._reset();\n  }\n\n  return _createClass(a, [{\n    key: \"_reset\",\n    value: function a() {\n      this._previousPosition = -1, this._position = -1, this._actionHandled = !1, this._ignoreEvent = !1, this._observeIgnoredEvents = !1, this._stopping = !1, this._componentId = null, this._key = null, this._type = null;\n    }\n  }, {\n    key: \"isFirstPropagationStep\",\n    value: function b() {\n      var a = this.getPreviousPosition();\n      return -1 === a || a >= this._position;\n    }\n  }, {\n    key: \"isForKey\",\n    value: function b(a) {\n      return this._key === a;\n    }\n  }, {\n    key: \"isForEventType\",\n    value: function b(a) {\n      return this._type === a;\n    }\n  }, {\n    key: \"startNewPropagationStep\",\n    value: function e(a, b, c, d) {\n      return this._position = this._componentList.getIndexById(a), this._componentId = a, this.isFirstPropagationStep() && (KeyEventCounter.incrementId(), this._key = b.key, this._type = d), !(b.repeat && Configuration.option(\"ignoreRepeatedEventsWhenKeyHeldDown\")) || (this.ignoreEvent(b), !1);\n    }\n  }, {\n    key: \"finishPropagationStep\",\n    value: function a() {\n      this.isStopped() || this._componentList.isRoot(this._componentId) ? (this._previousPropagation = this._clone(), this._reset()) : this._previousPosition = this._position;\n    }\n  }, {\n    key: \"getPreviousPropagation\",\n    value: function a() {\n      return this._previousPropagation || (this._previousPropagation = this._clone({\n        copyState: !1\n      })), this._previousPropagation;\n    }\n  }, {\n    key: \"getPreviousPosition\",\n    value: function a() {\n      return this._previousPosition;\n    }\n  }, {\n    key: \"observeIgnoredEvents\",\n    value: function a() {\n      this._observeIgnoredEvents = !0;\n    }\n  }, {\n    key: \"ignoreEvent\",\n    value: function b(a) {\n      return this.setIgnoreEvent(!0), !!(this.isIgnoringEvent() && Configuration.option(\"stopEventPropagationAfterIgnoring\")) && (this.stop(a), this.finishPropagationStep(), !0);\n    }\n  }, {\n    key: \"setIgnoreEvent\",\n    value: function b(a) {\n      this._ignoreEvent = a;\n    }\n  }, {\n    key: \"isIgnoringEvent\",\n    value: function a() {\n      return !this._observeIgnoredEvents && this._ignoreEvent;\n    }\n  }, {\n    key: \"isStopped\",\n    value: function a() {\n      return this._stopping;\n    }\n  }, {\n    key: \"stop\",\n    value: function b(a) {\n      return !this.isStopped() && (this._stopping = !0, a.simulated || a.stopPropagation(), !0);\n    }\n  }, {\n    key: \"isPendingPropagation\",\n    value: function b() {\n      var a = this.getPreviousPosition();\n      return -1 !== a && a + 1 < this._position;\n    }\n  }, {\n    key: \"isHandled\",\n    value: function a() {\n      return this._actionHandled;\n    }\n  }, {\n    key: \"setHandled\",\n    value: function a() {\n      this._actionHandled = !0;\n    }\n  }, {\n    key: \"_clone\",\n    value: function e() {\n      var b = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {},\n          c = b.copyState,\n          d = new a(this._componentList, {\n        logger: this.logger,\n        logPrefix: this._logPrefix\n      });\n      return (void 0 === c || c) && Object.assign(d, this), d;\n    }\n  }]), a;\n}();\n\nvar FocusOnlyKeyEventStrategy = function (a) {\n  function b() {\n    var a,\n        c = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {},\n        d = 1 < arguments.length ? arguments[1] : void 0;\n    return _classCallCheck(this, b), a = _possibleConstructorReturn(this, _getPrototypeOf(b).call(this, c, d)), a.focusTreeId = 0, a;\n  }\n\n  return _inherits(b, a), _createClass(b, [{\n    key: \"_reset\",\n    value: function a() {\n      _get(_getPrototypeOf(b.prototype), \"_reset\", this).call(this), this.keypressEventsToSimulate = [], this.focusTreeId += 1, this.eventPropagator = new EventPropagator(this.componentList, {\n        logger: this.logger,\n        logPrefix: this._logPrefix.bind(this)\n      });\n    }\n  }, {\n    key: \"enableHotKeys\",\n    value: function e(a) {\n      var b = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : {},\n          c = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : {},\n          d = 3 < arguments.length ? arguments[3] : void 0;\n      if (this.resetOnNextFocus && (this._reset(), this.resetOnNextFocus = !1), !this.componentList.containsId(a)) return this._addComponent(a, b, c, d), this.focusTreeId;\n    }\n  }, {\n    key: \"updateEnabledHotKeys\",\n    value: function f(a, b) {\n      var c = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : {},\n          d = 3 < arguments.length && void 0 !== arguments[3] ? arguments[3] : {},\n          e = 4 < arguments.length ? arguments[4] : void 0;\n      a === this.focusTreeId && this.componentList.containsId(b) && (this.componentList.update(b, c, d, e), this.getKeyHistory().setMaxLength(this.componentList.getLongestSequence()), this._initHandlerResolutionState(), void 0);\n    }\n  }, {\n    key: \"disableHotKeys\",\n    value: function d(a, b) {\n      this.resetOnNextFocus || (this.resetOnNextFocus = !0);\n      var c = this.eventPropagator.isPendingPropagation();\n      return c;\n    }\n  }, {\n    key: \"handleKeydown\",\n    value: function j(a, b, c) {\n      var d = 3 < arguments.length && void 0 !== arguments[3] ? arguments[3] : {},\n          e = getKeyName(a);\n      if (b !== this.focusTreeId) return this.eventPropagator.ignoreEvent(a), !0;\n      var f = this.eventPropagator.startNewPropagationStep(c, a, e, KeyEventType.keydown);\n\n      if (f) {\n        var g = this._howToHandleKeyEvent(a, b, c, e, d, KeyEventType.keydown);\n\n        if (g === EventResponse.handled) {\n          var h = stateFromEvent(a),\n              i = this.getCurrentCombination();\n          i.isKeyIncluded(e) || i.isEnding() ? this._startAndLogNewKeyCombination(e, b, c, h) : this._addToAndLogCurrentKeyCombination(e, KeyEventType.keydown, b, c, h), this._callHandlerIfActionNotHandled(a, e, KeyEventType.keydown, c, b);\n        }\n\n        return this._simulateKeyPressForNonPrintableKeys(a, e, b, c, d), this.eventPropagator.finishPropagationStep(), !1;\n      }\n    }\n  }, {\n    key: \"_howToHandleKeyEvent\",\n    value: function g(a, b, c, d, e, f) {\n      if (this.eventPropagator.isFirstPropagationStep()) {\n        if (e.ignoreEventsCondition(a) && this.eventPropagator.ignoreEvent(a)) return this._eventIsToBeIgnored(a, c, d, f);\n\n        this._checkForModifierFlagDiscrepancies(a, d, f);\n      } else if (this.eventPropagator.isIgnoringEvent()) return this._eventIsToBeIgnored(a, c, d, f);\n\n      return EventResponse.handled;\n    }\n  }, {\n    key: \"_eventIsToBeIgnored\",\n    value: function e(a, b, c, d) {\n      return EventResponse.ignored;\n    }\n  }, {\n    key: \"handleKeyPress\",\n    value: function j(a, b, c, d) {\n      var e = getKeyName(a),\n          f = this.getCurrentCombination();\n      if (f.isKeyPressSimulated(e)) return this.eventPropagator.ignoreEvent(a), !0;\n      var g = this.eventPropagator.startNewPropagationStep(c, a, e, KeyEventType.keypress);\n\n      if (g) {\n        var h = b !== this.focusTreeId,\n            i = this._howToHandleKeyEvent(a, b, c, e, d, KeyEventType.keypress);\n\n        return this.eventPropagator.isFirstPropagationStep(c) && f.isKeyIncluded(e) && this._addToAndLogCurrentKeyCombination(e, KeyEventType.keypress, b, c, stateFromEvent(a)), i === EventResponse.handled && this._callHandlerIfActionNotHandled(a, e, KeyEventType.keypress, c, b), this.eventPropagator.finishPropagationStep(), h;\n      }\n    }\n  }, {\n    key: \"handleKeyUp\",\n    value: function j(a, b, c, d) {\n      var e = getKeyName(a),\n          f = this.getCurrentCombination();\n      if (f.isKeyUpSimulated(e)) return this.eventPropagator.ignoreEvent(a), !0;\n      var g = this.eventPropagator.startNewPropagationStep(c, a, e, KeyEventType.keyup);\n\n      if (g) {\n        var h = b !== this.focusTreeId,\n            i = this._howToHandleKeyEvent(a, b, c, e, d, KeyEventType.keyup);\n\n        return this.eventPropagator.isFirstPropagationStep(c) && f.isKeyIncluded(e) && this._addToAndLogCurrentKeyCombination(e, KeyEventType.keyup, b, c, stateFromEvent(a)), i === EventResponse.handled && this._callHandlerIfActionNotHandled(a, e, KeyEventType.keyup, c, b), this._simulateKeyUpEventsHiddenByCmd(a, e, b, c, d), this.eventPropagator.finishPropagationStep(), h;\n      }\n    }\n  }, {\n    key: \"closeHangingKeyCombination\",\n    value: function d(a, b) {\n      var c = this.getCurrentCombination();\n      c.isKeyIncluded(a) && !c.isEventTriggered(a, b) && c.setKeyState(a, b, KeyEventState.simulated);\n    }\n  }, {\n    key: \"_simulateKeyPressForNonPrintableKeys\",\n    value: function f(a, b, c, d, e) {\n      this._handleEventSimulation(\"keypressEventsToSimulate\", \"simulatePendingKeyPressEvents\", this._shouldSimulate(KeyEventType.keypress, b), {\n        event: a,\n        key: b,\n        focusTreeId: c,\n        componentId: d,\n        options: e\n      });\n    }\n  }, {\n    key: \"_simulateKeyUpEventsHiddenByCmd\",\n    value: function g(a, b, c, d, e) {\n      var f = this;\n      isCmdKey(b) && this.getCurrentCombination().forEachKey(function (b) {\n        isCmdKey(b) || f._handleEventSimulation(\"keyupEventsToSimulate\", \"simulatePendingKeyUpEvents\", f._shouldSimulate(KeyEventType.keyup, b), {\n          event: a,\n          key: b,\n          focusTreeId: c,\n          componentId: d,\n          options: e\n        });\n      });\n    }\n  }, {\n    key: \"_stopEventPropagation\",\n    value: function c(a, b) {\n      this.eventPropagator.stop(a) && void 0;\n    }\n  }, {\n    key: \"getEventPropagator\",\n    value: function a() {\n      return this.eventPropagator;\n    }\n  }, {\n    key: \"_startAndLogNewKeyCombination\",\n    value: function e(a, b, c, d) {\n      this.getKeyHistory().startNewKeyCombination(a, d), void 0;\n    }\n  }, {\n    key: \"_addToAndLogCurrentKeyCombination\",\n    value: function f(a, b, c, d, e) {\n      this.getKeyHistory().addKeyToCurrentCombination(a, b, e), void 0;\n    }\n  }, {\n    key: \"_handleEventSimulation\",\n    value: function j(a, b, c, d) {\n      var e = d.event,\n          f = d.key,\n          g = d.focusTreeId,\n          h = d.componentId,\n          i = d.options;\n\n      if (c && Configuration.option(\"simulateMissingKeyPressEvents\")) {\n        var k = this._cloneAndMergeEvent(e, {\n          key: f,\n          simulated: !0\n        });\n\n        this[a].push({\n          event: k,\n          focusTreeId: g,\n          componentId: h,\n          options: i\n        });\n      }\n\n      (this.componentList.isRoot(h) || this.eventPropagator.isStopped()) && !this.keyEventManager.isGlobalListenersBound() && this[b]();\n    }\n  }, {\n    key: \"simulatePendingKeyPressEvents\",\n    value: function a() {\n      this._simulatePendingKeyEvents(\"keypressEventsToSimulate\", \"handleKeyPress\");\n    }\n  }, {\n    key: \"simulatePendingKeyUpEvents\",\n    value: function a() {\n      this._simulatePendingKeyEvents(\"keyupEventsToSimulate\", \"handleKeyUp\");\n    }\n  }, {\n    key: \"_simulatePendingKeyEvents\",\n    value: function d(a, b) {\n      var c = this;\n      0 < this[a].length && KeyEventCounter.incrementId(), this[a].forEach(function (a) {\n        var d = a.event,\n            e = a.focusTreeId,\n            f = a.componentId,\n            g = a.options;\n        c[b](d, e, f, g);\n      }), this[a] = [];\n    }\n  }, {\n    key: \"_callHandlerIfActionNotHandled\",\n    value: function k(a, b, c, d, e) {\n      var g = this.getCurrentCombination().describe();\n      if (!this.componentList.anyActionsForEventType(c)) return void void 0;\n      if (this.eventPropagator.isHandled()) ;else {\n        var h = this.eventPropagator.getPreviousPosition(),\n            i = this.componentList.getIndexById(d),\n            j = this._callClosestMatchingHandler(a, b, c, i, -1 === h ? 0 : h);\n\n        j && this.eventPropagator.setHandled();\n      }\n    }\n  }, {\n    key: \"_logPrefix\",\n    value: function h(a) {\n      var b = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : {},\n          c = Logger.logIcons,\n          d = Logger.eventIcons,\n          e = Logger.componentIcons,\n          f = \"HotKeys (\";\n\n      if (!1 !== b.focusTreeId) {\n        var i = isUndefined(b.focusTreeId) ? this.focusTreeId : b.focusTreeId;\n        f += \"F\".concat(i).concat(c[i % c.length], \"-\");\n      }\n\n      if (!1 !== b.eventId) {\n        var j = isUndefined(b.eventId) ? KeyEventCounter.getId() : b.eventId;\n        f += \"E\".concat(j).concat(d[j % d.length], \"-\");\n      }\n\n      f += \"C\".concat(a).concat(e[a % e.length]);\n      var g = this.componentList.getIndexById(a);\n      return isUndefined(g) || (f += \"-P\".concat(g).concat(e[g % e.length], \":\")), \"\".concat(f, \")\");\n    }\n  }]), b;\n}(AbstractKeyEventStrategy);\n\nfunction contains(a, b) {\n  var c = 2 < arguments.length && arguments[2] !== void 0 ? arguments[2] : {};\n  return Array.isArray(a) || isString(a) ? c.stringifyFirst ? !isUndefined(a.find(function (a) {\n    return a.toString() === b.toString();\n  })) : -1 !== a.indexOf(b) : isObject(a) ? hasKey(a, b) : c.stringifyFirst ? a.toString() === b.toString() : a === b;\n}\n\nfunction capitalize(a) {\n  return a.replace(/\\b\\w/g, function (a) {\n    return a.toUpperCase();\n  });\n}\n\nfunction normalizeEventName(a) {\n  return \"\".concat(capitalize(a.slice(0, 3))).concat(capitalize(a.slice(3)));\n}\n\nvar GlobalKeyEventStrategy = function (a) {\n  function b() {\n    var a,\n        c = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {},\n        d = 1 < arguments.length ? arguments[1] : void 0;\n    return _classCallCheck(this, b), a = _possibleConstructorReturn(this, _getPrototypeOf(b).call(this, c, d)), a.listenersBound = !1, a.eventOptions = {\n      ignoreEventsCondition: Configuration.option(\"ignoreEventsCondition\")\n    }, a.listeners = {}, a;\n  }\n\n  return _inherits(b, a), _createClass(b, [{\n    key: \"enableHotKeys\",\n    value: function f(a) {\n      var b = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : {},\n          c = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : {},\n          d = 3 < arguments.length ? arguments[3] : void 0,\n          e = 4 < arguments.length ? arguments[4] : void 0;\n      this.eventOptions = e, this._addComponent(a, b, c, d), this._updateDocumentHandlers(), this._initHandlerResolutionState(), void 0;\n    }\n  }, {\n    key: \"updateEnabledHotKeys\",\n    value: function f(a) {\n      var b = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : {},\n          c = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : {},\n          d = 3 < arguments.length ? arguments[3] : void 0,\n          e = 4 < arguments.length ? arguments[4] : void 0;\n      this.eventOptions = e, this.componentList.update(a, b, c, d), this.getKeyHistory().setMaxLength(this.componentList.getLongestSequence()), this._updateDocumentHandlers(), this._initHandlerResolutionState(), void 0;\n    }\n  }, {\n    key: \"disableHotKeys\",\n    value: function b(a) {\n      this.componentList.remove(a), this.getKeyHistory().setMaxLength(this.componentList.getLongestSequence()), this._updateDocumentHandlers(), this._initHandlerResolutionState(), void 0;\n    }\n  }, {\n    key: \"_updateDocumentHandlers\",\n    value: function c() {\n      var a = this,\n          b = this._listenersShouldBeBound();\n\n      !this.listenersBound && b ? (Object.values(KeyEventType).forEach(function (b) {\n        var c = describeKeyEventType(b);\n        document[\"on\".concat(c)] = function (b) {\n          a.keyEventManager[\"handleGlobal\".concat(normalizeEventName(c))](b);\n        }, void 0;\n      }), this.listenersBound = !0) : this.listenersBound && !b && (Object.values(KeyEventType).forEach(function (b) {\n        var c = describeKeyEventType(b);\n        delete document[\"on\".concat(c)], void 0;\n      }), this.listenersBound = !1);\n    }\n  }, {\n    key: \"_listenersShouldBeBound\",\n    value: function a() {\n      return this.componentList.any() || this.listeners.keyCombination;\n    }\n  }, {\n    key: \"handleKeydown\",\n    value: function f(a) {\n      var b = getKeyName(a);\n      if (a.repeat && Configuration.option(\"ignoreRepeatedEventsWhenKeyHeldDown\")) return !0;\n\n      this._checkForModifierFlagDiscrepancies(a, b, KeyEventType.keydown);\n\n      var c = this._howReactAppRespondedTo(a, b, KeyEventType.keydown);\n\n      if (c === EventResponse.unseen && this.eventOptions.ignoreEventsCondition(a)) return void void 0;\n\n      if (c !== EventResponse.ignored) {\n        var d = stateFromEvent(a),\n            e = this.getCurrentCombination();\n        e.isKeyIncluded(b) || e.isEnding() ? this._startAndLogNewKeyCombination(b, d) : this._addToAndLogCurrentKeyCombination(b, KeyEventType.keydown, d);\n      }\n\n      contains([EventResponse.ignored, EventResponse.handled], c) || this._callHandlerIfExists(a, b, KeyEventType.keydown), this._simulateKeyPressForNonPrintableKeys(a, b);\n    }\n  }, {\n    key: \"_howReactAppRespondedTo\",\n    value: function e(a, b, c) {\n      var d = this.keyEventManager.reactAppHistoryWithEvent(b, c);\n      return d === EventResponse.handled ? void 0 : d === EventResponse.ignored ? void 0 : d === EventResponse.seen ? void 0 : (KeyEventCounter.incrementId(), void 0), d;\n    }\n  }, {\n    key: \"handleKeyPress\",\n    value: function e(a) {\n      var b = getKeyName(a);\n      if (a.repeat && Configuration.option(\"ignoreRepeatedEventsWhenKeyHeldDown\")) return !0;\n      var c = this.getCurrentCombination();\n      if (c.isKeyPressSimulated(b)) return !0;\n\n      var d = this._howReactAppRespondedTo(a, b, KeyEventType.keypress);\n\n      return c.isKeyIncluded(b) && this._addToAndLogCurrentKeyCombination(b, KeyEventType.keypress, stateFromEvent(a)), d === EventResponse.unseen && (this.keyEventManager.closeHangingKeyCombination(b, KeyEventType.keypress), this.eventOptions.ignoreEventsCondition(a)) ? void void 0 : void (!contains([EventResponse.ignored, EventResponse.handled], d) && this._callHandlerIfExists(a, b, KeyEventType.keypress));\n    }\n  }, {\n    key: \"handleKeyUp\",\n    value: function e(a) {\n      var b = getKeyName(a),\n          c = this.getCurrentCombination();\n      if (c.isKeyUpSimulated(b)) return !0;\n\n      var d = this._howReactAppRespondedTo(a, b, KeyEventType.keyup);\n\n      c.isKeyIncluded(b) && this._addToAndLogCurrentKeyCombination(b, KeyEventType.keyup, stateFromEvent(a)), d === EventResponse.unseen ? (this.keyEventManager.closeHangingKeyCombination(b, KeyEventType.keyup), this.eventOptions.ignoreEventsCondition(a) ? void 0 : !contains([EventResponse.ignored, EventResponse.handled], d) && this._callHandlerIfExists(a, b, KeyEventType.keyup)) : !contains([EventResponse.ignored, EventResponse.handled], d) && this._callHandlerIfExists(a, b, KeyEventType.keyup), this._simulateKeyUpEventsHiddenByCmd(a, b), this.listeners.keyCombination && this._allKeysAreReleased() && this.listeners.keyCombination({\n        keys: c.getKeyDictionary(),\n        id: c.describe()\n      });\n    }\n  }, {\n    key: \"_simulateKeyPressForNonPrintableKeys\",\n    value: function c(a, b) {\n      this.keyEventManager.simulatePendingKeyPressEvents(), this._handleEventSimulation(\"handleKeyPress\", this._shouldSimulate(KeyEventType.keypress, b), {\n        event: a,\n        key: b\n      });\n    }\n  }, {\n    key: \"_simulateKeyUpEventsHiddenByCmd\",\n    value: function d(a, b) {\n      var c = this;\n      isCmdKey(b) && (this.keyEventManager.simulatePendingKeyUpEvents(), this.getCurrentCombination().forEachKey(function (b) {\n        isCmdKey(b) || c._handleEventSimulation(\"handleKeyUp\", c._shouldSimulate(KeyEventType.keyup, b), {\n          event: a,\n          key: b\n        });\n      }));\n    }\n  }, {\n    key: \"_startAndLogNewKeyCombination\",\n    value: function c(a, b) {\n      this.getKeyHistory().startNewKeyCombination(a, b), void 0;\n    }\n  }, {\n    key: \"_addToAndLogCurrentKeyCombination\",\n    value: function d(a, b, c) {\n      this.getKeyHistory().addKeyToCurrentCombination(a, b, c), void 0;\n    }\n  }, {\n    key: \"_handleEventSimulation\",\n    value: function f(a, b, c) {\n      var d = c.event,\n          e = c.key;\n\n      if (b && Configuration.option(\"simulateMissingKeyPressEvents\")) {\n        var g = this._cloneAndMergeEvent(d, {\n          key: e,\n          simulated: !0\n        });\n\n        this[a](g);\n      }\n    }\n  }, {\n    key: \"_callHandlerIfExists\",\n    value: function f(a, b, c) {\n      var e = this.getCurrentCombination().describe();\n      return this.componentList.anyActionsForEventType(c) ? void this._callClosestMatchingHandler(a, b, c) : void void 0;\n    }\n  }, {\n    key: \"_callClosestMatchingHandler\",\n    value: function e(a, c, d) {\n      for (var f, g = this.componentList.getNewIterator(); g.next();) {\n        if (f = _get(_getPrototypeOf(b.prototype), \"_callClosestMatchingHandler\", this).call(this, a, c, d, g.getPosition(), 0), f) return void void 0;\n      }\n    }\n  }, {\n    key: \"_stopEventPropagation\",\n    value: function c(a, b) {\n      a.simulated || a.stopPropagation();\n    }\n  }, {\n    key: \"addKeyCombinationListener\",\n    value: function d(a) {\n      var b = this,\n          c = function c() {\n        delete b.listeners.keyCombination;\n      };\n\n      return this.listeners.keyCombination = function (b) {\n        a(b), c();\n      }, this._updateDocumentHandlers(), c;\n    }\n  }, {\n    key: \"_logPrefix\",\n    value: function f(a) {\n      var b = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : {},\n          c = Logger.eventIcons,\n          d = Logger.componentIcons,\n          e = \"HotKeys (GLOBAL\";\n\n      if (!1 !== b.eventId) {\n        var g = isUndefined(b.eventId) ? KeyEventCounter.getId() : b.eventId;\n        e = \"\".concat(e, \"-E\").concat(g).concat(c[g % c.length]);\n      }\n\n      return isUndefined(a) ? \"\".concat(e, \"):\") : \"\".concat(e, \"-C\").concat(a).concat(d[a % d.length], \"):\");\n    }\n  }]), b;\n}(AbstractKeyEventStrategy);\n\nfunction isFromFocusOnlyComponent(a) {\n  return !isUndefined(a);\n}\n\nvar KeyEventManager = function () {\n  function a() {\n    var b = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {};\n    _classCallCheck(this, a), this.logger = b.logger || new Logger(Configuration.option(\"logLevel\")), this._focusOnlyEventStrategy = new FocusOnlyKeyEventStrategy({\n      configuration: b,\n      logger: this.logger\n    }, this), this._globalEventStrategy = new GlobalKeyEventStrategy({\n      configuration: b,\n      logger: this.logger\n    }, this), this.mountedComponentsCount = 0;\n  }\n\n  return _createClass(a, null, [{\n    key: \"getInstance\",\n    value: function c() {\n      var b = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {};\n      return this.instance || (this.instance = new a(b)), this.instance;\n    }\n  }, {\n    key: \"clear\",\n    value: function a() {\n      delete this.instance;\n    }\n  }]), _createClass(a, [{\n    key: \"getApplicationKeyMap\",\n    value: function a() {\n      return Object.assign(this._globalEventStrategy.getApplicationKeyMap(), this._focusOnlyEventStrategy.getApplicationKeyMap());\n    }\n  }, {\n    key: \"registerKeyMap\",\n    value: function b() {\n      var a = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {};\n      return this._focusOnlyEventStrategy.registerKeyMap(a);\n    }\n  }, {\n    key: \"reregisterKeyMap\",\n    value: function c(a) {\n      var b = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : {};\n\n      this._focusOnlyEventStrategy.reregisterKeyMap(a, b);\n    }\n  }, {\n    key: \"deregisterKeyMap\",\n    value: function b(a) {\n      this._focusOnlyEventStrategy.deregisterKeyMap(a);\n    }\n  }, {\n    key: \"registerComponentMount\",\n    value: function c(a, b) {\n      return this._incrementComponentCount(), this._focusOnlyEventStrategy.registerComponentMount(a, b);\n    }\n  }, {\n    key: \"registerComponentUnmount\",\n    value: function a() {\n      this._decrementComponentCount();\n    }\n  }, {\n    key: \"_incrementComponentCount\",\n    value: function c() {\n      var a = this,\n          b = this.mountedComponentsCount;\n      this.mountedComponentsCount += 1, 0 === b && 1 === this.mountedComponentsCount && (window.onblur = function () {\n        return a._clearKeyHistory();\n      });\n    }\n  }, {\n    key: \"_decrementComponentCount\",\n    value: function b() {\n      var a = this.mountedComponentsCount;\n      this.mountedComponentsCount -= 1, 1 === a && 0 === this.mountedComponentsCount && delete window.onblur;\n    }\n  }, {\n    key: \"_clearKeyHistory\",\n    value: function a() {\n      this._focusOnlyEventStrategy.resetKeyHistory({\n        force: !0\n      }), this._globalEventStrategy.resetKeyHistory({\n        force: !0\n      });\n    }\n  }, {\n    key: \"registerGlobalKeyMap\",\n    value: function b() {\n      var a = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {};\n      return this._globalEventStrategy.registerKeyMap(a);\n    }\n  }, {\n    key: \"registerGlobalComponentUnmount\",\n    value: function a() {\n      this._decrementComponentCount();\n    }\n  }, {\n    key: \"registerGlobalComponentMount\",\n    value: function c(a, b) {\n      return this._incrementComponentCount(), this._globalEventStrategy.registerComponentMount(a, b);\n    }\n  }, {\n    key: \"reregisterGlobalKeyMap\",\n    value: function c(a, b) {\n      this._globalEventStrategy.reregisterKeyMap(a, b);\n    }\n  }, {\n    key: \"deregisterGlobalKeyMap\",\n    value: function b(a) {\n      this._globalEventStrategy.deregisterKeyMap(a);\n    }\n  }, {\n    key: \"addKeyCombinationListener\",\n    value: function b(a) {\n      return this._globalEventStrategy.addKeyCombinationListener(a);\n    }\n  }, {\n    key: \"enableHotKeys\",\n    value: function e(a) {\n      var b = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : {},\n          c = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : {},\n          d = 3 < arguments.length ? arguments[3] : void 0;\n      return this._focusOnlyEventStrategy.enableHotKeys(a, b, c, d);\n    }\n  }, {\n    key: \"updateEnabledHotKeys\",\n    value: function f(a, b) {\n      var c = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : {},\n          d = 3 < arguments.length && void 0 !== arguments[3] ? arguments[3] : {},\n          e = 4 < arguments.length ? arguments[4] : void 0;\n      return this._focusOnlyEventStrategy.updateEnabledHotKeys(a, b, c, d, e);\n    }\n  }, {\n    key: \"disableHotKeys\",\n    value: function c(a, b) {\n      return this._focusOnlyEventStrategy.disableHotKeys(a, b);\n    }\n  }, {\n    key: \"handleKeydown\",\n    value: function e(a, b, c, d) {\n      if (isFromFocusOnlyComponent(b)) return this._focusOnlyEventStrategy.handleKeydown(a, b, c, d);\n    }\n  }, {\n    key: \"handleKeyPress\",\n    value: function e(a, b, c, d) {\n      if (isFromFocusOnlyComponent(b)) return this._focusOnlyEventStrategy.handleKeyPress(a, b, c, d);\n    }\n  }, {\n    key: \"handleKeyUp\",\n    value: function e(a, b, c, d) {\n      if (isFromFocusOnlyComponent(b)) return this._focusOnlyEventStrategy.handleKeyUp(a, b, c, d);\n    }\n  }, {\n    key: \"enableGlobalHotKeys\",\n    value: function f(a) {\n      var b = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : {},\n          c = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : {},\n          d = 3 < arguments.length ? arguments[3] : void 0,\n          e = 4 < arguments.length ? arguments[4] : void 0;\n      return this._globalEventStrategy.enableHotKeys(a, b, c, d, e);\n    }\n  }, {\n    key: \"updateEnabledGlobalHotKeys\",\n    value: function f(a) {\n      var b = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : {},\n          c = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : {},\n          d = 3 < arguments.length ? arguments[3] : void 0,\n          e = 4 < arguments.length ? arguments[4] : void 0;\n      return this._globalEventStrategy.updateEnabledHotKeys(a, b, c, d, e);\n    }\n  }, {\n    key: \"disableGlobalHotKeys\",\n    value: function b(a) {\n      return this._globalEventStrategy.disableHotKeys(a);\n    }\n  }, {\n    key: \"handleGlobalKeyDown\",\n    value: function b(a) {\n      return this._globalEventStrategy.handleKeydown(a);\n    }\n  }, {\n    key: \"handleGlobalKeyPress\",\n    value: function b(a) {\n      return this._globalEventStrategy.handleKeyPress(a);\n    }\n  }, {\n    key: \"handleGlobalKeyUp\",\n    value: function b(a) {\n      return this._globalEventStrategy.handleKeyUp(a);\n    }\n  }, {\n    key: \"ignoreEvent\",\n    value: function b(a) {\n      this._focusOnlyEventStrategy.getEventPropagator().ignoreEvent(a);\n    }\n  }, {\n    key: \"observeIgnoredEvents\",\n    value: function b(a) {\n      this._focusOnlyEventStrategy.getEventPropagator().observeIgnoredEvents(a);\n    }\n  }, {\n    key: \"closeHangingKeyCombination\",\n    value: function c(a, b) {\n      this._focusOnlyEventStrategy.closeHangingKeyCombination(a, b);\n    }\n  }, {\n    key: \"reactAppHistoryWithEvent\",\n    value: function d(a, b) {\n      var c = this._focusOnlyEventStrategy.eventPropagator.getPreviousPropagation();\n\n      return c.isForKey(a) && c.isForEventType(b) ? c.isHandled() ? EventResponse.handled : c.isIgnoringEvent() ? EventResponse.ignored : EventResponse.seen : EventResponse.unseen;\n    }\n  }, {\n    key: \"simulatePendingKeyPressEvents\",\n    value: function a() {\n      this._focusOnlyEventStrategy.simulatePendingKeyPressEvents();\n    }\n  }, {\n    key: \"simulatePendingKeyUpEvents\",\n    value: function a() {\n      this._focusOnlyEventStrategy.simulatePendingKeyUpEvents();\n    }\n  }, {\n    key: \"isGlobalListenersBound\",\n    value: function a() {\n      return this._globalEventStrategy.listenersBound;\n    }\n  }]), a;\n}();\n\nfunction backwardsCompatibleContext(a, b) {\n  var c = b.deprecatedAPI,\n      d = c.contextTypes,\n      e = c.childContextTypes,\n      f = b.newAPI.contextType;\n  if (\"undefined\" == typeof React.createContext) a.contextTypes = d, a.childContextTypes = e, a.prototype.getChildContext = function () {\n    return this._childContext;\n  };else {\n    var g = React.createContext(f);\n    a.contextType = g, a.prototype._originalRender = a.prototype.render, a.prototype.render = function () {\n      var a = this._originalRender();\n\n      return a ? React.createElement(g.Provider, {\n        value: this._childContext\n      }, a) : null;\n    };\n  }\n  return a;\n}\n\nfunction withHotKeys(a) {\n  function b(a, b) {\n    return _objectSpread({}, e[a] || {}, b[a] || {});\n  }\n\n  function c(a) {\n    return b(\"handlers\", a);\n  }\n\n  function d(a) {\n    return b(\"keyMap\", a);\n  }\n\n  var e = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : {},\n      f = function (b) {\n    function e(a) {\n      var b;\n      return _classCallCheck(this, e), b = _possibleConstructorReturn(this, _getPrototypeOf(e).call(this, a)), b._handleFocus = b._handleFocus.bind(_assertThisInitialized(_assertThisInitialized(b))), b._handleBlur = b._handleBlur.bind(_assertThisInitialized(_assertThisInitialized(b))), b._handleKeyDown = b._handleKeyDown.bind(_assertThisInitialized(_assertThisInitialized(b))), b._handleKeyPress = b._handleKeyPress.bind(_assertThisInitialized(_assertThisInitialized(b))), b._handleKeyUp = b._handleKeyUp.bind(_assertThisInitialized(_assertThisInitialized(b))), b._componentIsFocused = b._componentIsFocused.bind(_assertThisInitialized(_assertThisInitialized(b))), b._id = KeyEventManager.getInstance().registerKeyMap(a.keyMap), b._childContext = {\n        hotKeysParentId: b._id\n      }, b;\n    }\n\n    return _inherits(e, b), _createClass(e, [{\n      key: \"render\",\n      value: function i() {\n        var b = this.props,\n            c = b.keyMap,\n            d = b.handlers,\n            e = b.allowChanges,\n            f = b.root,\n            g = _objectWithoutProperties(b, [\"keyMap\", \"handlers\", \"allowChanges\", \"root\"]),\n            h = {\n          onFocus: this._wrapFunction(\"onFocus\", this._handleFocus),\n          onBlur: this._wrapFunction(\"onBlur\", this._handleBlur),\n          tabIndex: Configuration.option(\"defaultTabIndex\")\n        };\n\n        return this._shouldBindKeyListeners() && (h.onKeyDown = this._handleKeyDown, h.onKeyPress = this._handleKeyPress, h.onKeyUp = this._handleKeyUp), React.createElement(a, _extends({\n          hotKeys: h\n        }, g));\n      }\n    }, {\n      key: \"_shouldBindKeyListeners\",\n      value: function b() {\n        var a = d(this.props);\n        return !isEmpty(a) || this.props.root || Configuration.option(\"enableHardSequences\") && this._handlersIncludeHardSequences(a, c(this.props));\n      }\n    }, {\n      key: \"_handlersIncludeHardSequences\",\n      value: function c(a, b) {\n        return Object.keys(b).some(function (b) {\n          return !a[b] && KeyCombinationSerializer.isValidKeySerialization(b);\n        });\n      }\n    }, {\n      key: \"_wrapFunction\",\n      value: function d(a, b) {\n        var c = this;\n        return \"function\" == typeof this.props[a] ? function (d) {\n          c.props[a](d), b(d);\n        } : b;\n      }\n    }, {\n      key: \"_focusTreeIdsPush\",\n      value: function b(a) {\n        this._focusTreeIds || (this._focusTreeIds = []), this._focusTreeIds.push(a);\n      }\n    }, {\n      key: \"_focusTreeIdsShift\",\n      value: function a() {\n        this._focusTreeIds && this._focusTreeIds.shift();\n      }\n    }, {\n      key: \"_getFocusTreeId\",\n      value: function a() {\n        if (this._focusTreeIds) return this._focusTreeIds[0];\n      }\n    }, {\n      key: \"componentDidUpdate\",\n      value: function e() {\n        var a = KeyEventManager.getInstance();\n\n        if (a.reregisterKeyMap(this._id, this.props.keyMap), this._componentIsFocused() && (this.props.allowChanges || !Configuration.option(\"ignoreKeymapAndHandlerChangesByDefault\"))) {\n          var b = this.props,\n              c = b.keyMap,\n              d = b.handlers;\n          a.updateEnabledHotKeys(this._getFocusTreeId(), this._id, c, d, this._getComponentOptions());\n        }\n      }\n    }, {\n      key: \"_componentIsFocused\",\n      value: function a() {\n        return !0 === this._focused;\n      }\n    }, {\n      key: \"componentDidMount\",\n      value: function c() {\n        var a = KeyEventManager.getInstance(),\n            b = this.context.hotKeysParentId;\n        a.registerComponentMount(this._id, b);\n      }\n    }, {\n      key: \"_handleFocus\",\n      value: function e() {\n        if (this.props.onFocus) {\n          var a;\n          (a = this.props).onFocus.apply(a, arguments);\n        }\n\n        var b = KeyEventManager.getInstance().enableHotKeys(this._id, d(this.props), c(this.props), this._getComponentOptions());\n        isUndefined(b) || this._focusTreeIdsPush(b), this._focused = !0;\n      }\n    }, {\n      key: \"componentWillUnmount\",\n      value: function b() {\n        var a = KeyEventManager.getInstance();\n        a.deregisterKeyMap(this._id), a.registerComponentUnmount(), this._handleBlur();\n      }\n    }, {\n      key: \"_handleBlur\",\n      value: function c() {\n        if (this.props.onBlur) {\n          var a;\n          (a = this.props).onBlur.apply(a, arguments);\n        }\n\n        var b = KeyEventManager.getInstance().disableHotKeys(this._getFocusTreeId(), this._id);\n        b || this._focusTreeIdsShift(), this._focused = !1;\n      }\n    }, {\n      key: \"_handleKeyDown\",\n      value: function c(a) {\n        var b = KeyEventManager.getInstance().handleKeydown(a, this._getFocusTreeId(), this._id, this._getEventOptions());\n        b && this._focusTreeIdsShift();\n      }\n    }, {\n      key: \"_handleKeyPress\",\n      value: function c(a) {\n        var b = KeyEventManager.getInstance().handleKeyPress(a, this._getFocusTreeId(), this._id, this._getEventOptions());\n        b && this._focusTreeIdsShift();\n      }\n    }, {\n      key: \"_handleKeyUp\",\n      value: function c(a) {\n        var b = KeyEventManager.getInstance().handleKeyUp(a, this._getFocusTreeId(), this._id, this._getEventOptions());\n        b && this._focusTreeIdsShift();\n      }\n    }, {\n      key: \"_getComponentOptions\",\n      value: function a() {\n        return {\n          defaultKeyEvent: Configuration.option(\"defaultKeyEvent\")\n        };\n      }\n    }, {\n      key: \"_getEventOptions\",\n      value: function a() {\n        return {\n          ignoreEventsCondition: Configuration.option(\"ignoreEventsCondition\")\n        };\n      }\n    }]), e;\n  }(PureComponent);\n\n  return _defineProperty(f, \"propTypes\", {\n    keyMap: PropTypes.object,\n    handlers: PropTypes.object,\n    onFocus: PropTypes.func,\n    onBlur: PropTypes.func,\n    allowChanges: PropTypes.bool,\n    root: PropTypes.bool\n  }), backwardsCompatibleContext(f, {\n    deprecatedAPI: {\n      contextTypes: {\n        hotKeysParentId: PropTypes.number\n      },\n      childContextTypes: {\n        hotKeysParentId: PropTypes.number\n      }\n    },\n    newAPI: {\n      contextType: {\n        hotKeysParentId: void 0\n      }\n    }\n  });\n}\n\nvar HotKeysWrapper = function (a) {\n  function b() {\n    return _classCallCheck(this, b), _possibleConstructorReturn(this, _getPrototypeOf(b).apply(this, arguments));\n  }\n\n  return _inherits(b, a), _createClass(b, [{\n    key: \"render\",\n    value: function g() {\n      var a = this.props,\n          b = a.hotKeys,\n          c = a.innerRef,\n          d = a.component,\n          e = _objectWithoutProperties(a, [\"hotKeys\", \"innerRef\", \"component\"]),\n          f = d || Configuration.option(\"defaultComponent\");\n\n      return React.createElement(f, _objectSpread({}, b, {\n        ref: c\n      }, e));\n    }\n  }]), b;\n}(Component),\n    HotKeys = withHotKeys(HotKeysWrapper);\n\nHotKeys.propTypes = {\n  innerRef: PropTypes.oneOfType([PropTypes.object, PropTypes.func])\n};\n\nvar GlobalHotKeys = function (a) {\n  function b(a) {\n    var c;\n    return _classCallCheck(this, b), c = _possibleConstructorReturn(this, _getPrototypeOf(b).call(this, a)), c._id = KeyEventManager.getInstance().registerGlobalKeyMap(a.keyMap), c._childContext = {\n      globalHotKeysParentId: c._id\n    }, c;\n  }\n\n  return _inherits(b, a), _createClass(b, [{\n    key: \"render\",\n    value: function a() {\n      return this.props.children || null;\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function e() {\n      var a = KeyEventManager.getInstance();\n\n      if (a.reregisterGlobalKeyMap(this._id, this.props.keyMap), this.props.allowChanges || !Configuration.option(\"ignoreKeymapAndHandlerChangesByDefault\")) {\n        var b = this.props,\n            c = b.keyMap,\n            d = b.handlers;\n        a.updateEnabledGlobalHotKeys(this._id, c, d, this._getComponentOptions(), this._getEventOptions());\n      }\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function f() {\n      var a = this.props,\n          b = a.keyMap,\n          c = a.handlers,\n          d = this.context.globalHotKeysParentId,\n          e = KeyEventManager.getInstance();\n      e.registerGlobalComponentMount(this._id, d), e.enableGlobalHotKeys(this._id, b, c, this._getComponentOptions(), this._getEventOptions());\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function b() {\n      var a = KeyEventManager.getInstance();\n      a.deregisterGlobalKeyMap(this._id), a.disableGlobalHotKeys(this._id), a.registerGlobalComponentUnmount();\n    }\n  }, {\n    key: \"_getComponentOptions\",\n    value: function a() {\n      return {\n        defaultKeyEvent: Configuration.option(\"defaultKeyEvent\")\n      };\n    }\n  }, {\n    key: \"_getEventOptions\",\n    value: function a() {\n      return {\n        ignoreEventsCondition: Configuration.option(\"ignoreEventsCondition\")\n      };\n    }\n  }]), b;\n}(Component);\n\n_defineProperty(GlobalHotKeys, \"propTypes\", {\n  keyMap: PropTypes.object,\n  handlers: PropTypes.object,\n  allowChanges: PropTypes.bool\n});\n\nvar GlobalHotKeys$1 = backwardsCompatibleContext(GlobalHotKeys, {\n  deprecatedAPI: {\n    contextTypes: {\n      globalHotKeysParentId: PropTypes.number\n    },\n    childContextTypes: {\n      globalHotKeysParentId: PropTypes.number\n    }\n  },\n  newAPI: {\n    contextType: {\n      globalHotKeysParentId: void 0\n    }\n  }\n});\n\nfunction withHotKeysIgnoreOverride(a) {\n  var b,\n      c,\n      d = 1 < arguments.length && arguments[1] !== void 0 ? arguments[1] : {\n    only: [],\n    except: []\n  },\n      e = 2 < arguments.length ? arguments[2] : void 0;\n  return c = b = function (b) {\n    function c(a) {\n      var b;\n      return _classCallCheck(this, c), b = _possibleConstructorReturn(this, _getPrototypeOf(c).call(this, a)), b._handleKeyEvent = b._handleKeyEvent.bind(_assertThisInitialized(_assertThisInitialized(b))), b._reloadDictionaries = b._reloadDictionaries.bind(_assertThisInitialized(_assertThisInitialized(b))), b;\n    }\n\n    return _inherits(c, b), _createClass(c, [{\n      key: \"render\",\n      value: function g() {\n        var b = this.props,\n            c = b.only,\n            d = b.except,\n            e = _objectWithoutProperties(b, [\"only\", \"except\"]),\n            f = {\n          onKeyDown: this._handleKeyEvent,\n          onKeyPress: this._handleKeyEvent,\n          onKeyUp: this._handleKeyEvent,\n          onFocus: this._reloadDictionaries\n        };\n\n        return React.createElement(a, _extends({\n          hotKeys: f\n        }, e));\n      }\n    }, {\n      key: \"_reloadDictionaries\",\n      value: function d() {\n        var a = this.props,\n            b = a.only,\n            c = a.except;\n        this._onlyDict = keyDictionary(b), this._exceptDict = keyDictionary(c);\n      }\n    }, {\n      key: \"_shouldIgnoreEvent\",\n      value: function c(a) {\n        var b = a.key;\n        return isEmpty(this._onlyDict) ? !!isEmpty(this._exceptDict) || !hasKey(this._exceptDict, b) : isEmpty(this._exceptDict) ? hasKey(this._onlyDict, b) : hasKey(this._onlyDict, b) && !hasKey(this._exceptDict, b);\n      }\n    }, {\n      key: \"_handleKeyEvent\",\n      value: function b(a) {\n        this._shouldIgnoreEvent(a) && KeyEventManager.getInstance()[e](a);\n      }\n    }]), c;\n  }(PureComponent), _defineProperty(b, \"propTypes\", {\n    only: PropTypes.oneOfType([PropTypes.string, PropTypes.arrayOf(PropTypes.string)]),\n    except: PropTypes.oneOfType([PropTypes.string, PropTypes.arrayOf(PropTypes.string)])\n  }), _defineProperty(b, \"defaultProps\", d), c;\n}\n\nfunction keyDictionary(a) {\n  return arrayFrom(a).reduce(function (a, b) {\n    var c = standardizeKeyName(b);\n    if (!isValidKey(c)) throw new InvalidKeyNameError(b);\n    return [resolveAltShiftedAlias, resolveUnaltShiftedAlias, resolveShiftedAlias, resolveUnshiftedAlias, resolveAltedAlias, resolveUnaltedAlias].forEach(function (b) {\n      a[b(c)] = !0;\n    }), a;\n  }, {});\n}\n\nvar IgnoreKeys = function (a) {\n  function b() {\n    return _classCallCheck(this, b), _possibleConstructorReturn(this, _getPrototypeOf(b).apply(this, arguments));\n  }\n\n  return _inherits(b, a), _createClass(b, [{\n    key: \"render\",\n    value: function e() {\n      var a = this.props,\n          b = a.hotKeys,\n          c = _objectWithoutProperties(a, [\"hotKeys\"]),\n          d = c.component || Configuration.option(\"defaultComponent\");\n\n      return React.createElement(d, _objectSpread({}, b, c));\n    }\n  }]), b;\n}(Component);\n\nvar IgnoreKeys$1 = withHotKeysIgnoreOverride(IgnoreKeys, {}, \"ignoreEvent\");\n\nvar ObserveKeys = function (a) {\n  function b() {\n    return _classCallCheck(this, b), _possibleConstructorReturn(this, _getPrototypeOf(b).apply(this, arguments));\n  }\n\n  return _inherits(b, a), _createClass(b, [{\n    key: \"render\",\n    value: function e() {\n      var a = this.props,\n          b = a.hotKeys,\n          c = _objectWithoutProperties(a, [\"hotKeys\"]),\n          d = c.component || Configuration.option(\"defaultComponent\");\n\n      return React.createElement(d, _objectSpread({}, b, c));\n    }\n  }]), b;\n}(Component);\n\nvar ObserveKeys$1 = withHotKeysIgnoreOverride(ObserveKeys, {}, \"observeIgnoredEvents\");\n\nfunction withIgnoreKeys(a) {\n  var b = 1 < arguments.length && arguments[1] !== void 0 ? arguments[1] : {\n    only: [],\n    except: []\n  };\n  return withHotKeysIgnoreOverride(a, b, \"ignoreEvent\");\n}\n\nfunction withObserveKeys(a) {\n  var b = 1 < arguments.length && arguments[1] !== void 0 ? arguments[1] : {\n    only: [],\n    except: []\n  };\n  return withHotKeysIgnoreOverride(a, b, \"observeIgnoredEvents\");\n}\n\nfunction configure() {\n  var a = 0 < arguments.length && arguments[0] !== void 0 ? arguments[0] : {};\n  Configuration.init(a);\n}\n\nfunction getApplicationKeyMap() {\n  return KeyEventManager.getInstance().getApplicationKeyMap();\n}\n\nfunction recordKeyCombination(a) {\n  var b = KeyEventManager.getInstance();\n  return b.addKeyCombinationListener(a);\n}\n\nexport { HotKeys, GlobalHotKeys$1 as GlobalHotKeys, IgnoreKeys$1 as IgnoreKeys, ObserveKeys$1 as ObserveKeys, withHotKeys, withIgnoreKeys, withObserveKeys, configure, getApplicationKeyMap, recordKeyCombination };","import React, { useMemo } from 'react'\nimport clsx from 'clsx'\n\nexport interface ProgressDotsProps {\n  /** Progress indicator to mark as active (one-based) */\n  current: number\n  /** Total number of progress indicators to show */\n  total: number\n  /** Direction in which to display the dots */\n  variant: 'horizontal' | 'vertical'\n  /** Callback fired when a dot is clicked. Value is the one-based index of the dot. */\n  onClick?(index: number): void\n}\n\nexport const ProgressDots = ({\n  current,\n  total,\n  variant,\n  onClick,\n}: ProgressDotsProps) => {\n  const array = useMemo(() => Array.from({ length: total }), [total])\n  return (\n    <div\n      className={clsx('flex', {\n        'flex-row space-x-2': variant === 'horizontal',\n        'flex-col space-y-2': variant === 'vertical',\n      })}\n    >\n      {array.map((_, index) => {\n        const oneBasedIndex = index + 1\n        const isCurrent = oneBasedIndex === current\n        return (\n          <button\n            key={index}\n            className={clsx(\n              'w-6 h-6 border rounded-full border-transparent flex justify-center items-center cursor-default',\n              {\n                'border-red': isCurrent,\n                'cursor-pointer pointer-events-auto': !!onClick,\n              }\n            )}\n            onClick={!!onClick ? () => onClick(oneBasedIndex) : undefined}\n            disabled={!onClick}\n          >\n            <div className=\"w-1 h-1 bg-white rounded-full\">\n              <span className=\"sr-only\">\n                {oneBasedIndex} of {total}\n              </span>\n            </div>\n          </button>\n        )\n      })}\n    </div>\n  )\n}\n","module.exports = __webpack_public_path__ + \"static/specsAndFeaturesBg-70a2b02c9c8ae7f737ba02f971abd769.jpg\";","import React, { useRef, useState } from 'react'\nimport { useMedia } from 'react-use'\nimport Slider from 'react-slick'\nimport 'slick-carousel/slick/slick.css'\nimport 'slick-carousel/slick/slick-theme.css'\nimport { ArrowIcon } from '../../svgs/icons'\nimport { CircleButton } from '../../atoms/circle-button'\nimport { Typography } from '../../atoms/typography'\nimport { AspectRatio } from '../../atoms/aspect-ratio'\nimport { InPageAnchor } from '../../molecules/in-page-nav'\nimport { CustomizationsSection } from '../../types/boat'\nimport { Media, TextBlock } from '../../types/common'\nimport { BoatSection } from '../boat.components'\nimport { useBackgroundsQuery } from '../../services/backgrounds'\n\nconst PrevArrow = ({ className, style, onClick }) => {\n  return (\n    <CircleButton\n      icon={ArrowIcon}\n      variant=\"secondary\"\n      iconClassName=\"transform rotate-180\"\n      onClick={onClick}\n      aria-label=\"Previous\"\n    />\n  )\n}\n\nconst NextArrow = ({ className, style, onClick }) => {\n  return (\n    <CircleButton\n      icon={ArrowIcon}\n      variant=\"secondary\"\n      iconClassName=\"transform rotate-180\"\n      onClick={onClick}\n      aria-label=\"Previous\"\n    />\n  )\n}\n\nexport const CustomizationsSectionComponent = ({\n  title,\n  subtitle,\n  backgroundImage,\n  options,\n}: CustomizationsSection) => {\n  const { customizationSection: background } = useBackgroundsQuery()\n\n  const [currentSliderIndex, setCurrentSliderIndex] = useState(0)\n\n  const isMobile = useMedia('(max-width: 767px)')\n\n  const sliderRef = useRef()\n\n  const sliderSettings = {\n    ref: sliderRef,\n    slidesToShow: 3,\n    arrows: false,\n    touchThreshold: 10,\n    nextArrow: <NextArrow />,\n    prevArrow: <PrevArrow />,\n    onInit: () => {},\n    beforeChange: (oldIndex, newIndex) => {\n      // console.log(oldIndex, newIndex)\n      // console.log(document.querySelectorAll('.slick-active'))\n      // document.querySelector('.slick-active.faded').classList.remove('faded')\n      // document.querySelectorAll('.slick-active')[2].classList.add('faded')\n    },\n    afterChange: (index: number) => {\n      setCurrentSliderIndex(index)\n    },\n    responsive: [\n      {\n        breakpoint: 1024,\n        settings: {\n          slidesToShow: 3,\n          slidesToScroll: 3,\n        },\n      },\n      {\n        breakpoint: 768,\n        settings: {\n          slidesToShow: 2,\n          slidesToScroll: 1,\n        },\n      },\n\n      // You can unslick at a given breakpoint now by adding:\n      // settings: \"unslick\"\n      // instead of a settings object\n    ],\n  }\n\n  const sliderWidth = !isMobile ? `calc(100% + 280px)` : `calc(100% + 180px)`\n\n  return (\n    <BoatSection theme=\"dark\" className=\"py-24 sm:pb-16\">\n      <InPageAnchor title={title} />\n      <img\n        src={`${backgroundImage || background}?q=30&w=2000`}\n        alt=\"\"\n        className=\"absolute top-0 h-full w-full object-cover\"\n      />\n      <div\n        className=\"absolute inset-0\"\n        style={{\n          background:\n            'linear-gradient(360deg, #000000 46.14%, rgba(0, 0, 0, 0) 100%)',\n        }}\n      />\n      <div className=\"relative text-center mb-24 sm:mt-20 sm:mb-48\">\n        <Typography variant=\"h3\" sm=\"h2\" lg=\"h1\" className=\"mb-4\">\n          {title}\n        </Typography>\n        <Typography variant=\"e2\" md=\"e1\" className=\"text-gray-4\">\n          {subtitle}\n        </Typography>\n      </div>\n      <div\n        className=\"relative overflow-hidden lg:pl-16 md:-mt-16\"\n        style={{ width: sliderWidth }}\n      >\n        <div className=\"slider-wrapper\">\n          <Slider {...sliderSettings}>\n            {options.map((option, index) => {\n              return (\n                <BespokeOptionCard\n                  index={index}\n                  sliderIndex={currentSliderIndex}\n                  key={`bespoke-option-${index}`}\n                  media={option.media}\n                  header={option.content.header}\n                  copy={option.content.copy}\n                />\n              )\n            })}\n          </Slider>\n        </div>\n      </div>\n      <div className=\"relative flex lg:justify-end pl-4 lg:px-12 mt-10 lg:mt-20\">\n        <CircleButton\n          className=\"mr-4\"\n          icon={ArrowIcon}\n          variant=\"secondary\"\n          iconClassName=\"transform rotate-180\"\n          onClick={() => {\n            sliderRef.current.slickPrev()\n          }}\n          aria-label=\"Previous\"\n        />\n        <CircleButton\n          icon={ArrowIcon}\n          variant=\"secondary\"\n          onClick={() => {\n            sliderRef.current.slickNext()\n          }}\n          aria-label=\"Next\"\n        />\n      </div>\n    </BoatSection>\n  )\n}\n\nconst BespokeOptionCard = ({\n  index,\n  sliderIndex,\n  media,\n  header,\n  copy,\n}: { index: number; sliderIndex: number; media: Media } & TextBlock) => {\n  return (\n    <div\n      data-index={index}\n      className=\"sm:max-w-full sm:w-auto lg:max-w-10xl px-2\"\n    >\n      <AspectRatio\n        ratio=\"16:9\"\n        className=\"relative sm:max-w-full sm:w-auto lg:max-w-10xl mb-6\"\n      >\n        <img\n          src={`${media.image}?q=30&w=1000`}\n          alt={media.image.alt || ''}\n          className=\"h-full w-full object-cover\"\n          style={{ position: 'absolute' }}\n        />\n        <div\n          className=\"absolute inset-0\"\n          style={{\n            background:\n              'linear-gradient(360deg, rgba(0, 0, 0, 0.6) 23.28%, rgba(0, 0, 0, 0) 71.29%)',\n          }}\n        ></div>\n      </AspectRatio>\n      <Typography variant=\"h4\" className=\"mb-4\">\n        {header}\n      </Typography>\n      <Typography variant=\"p3\" sm=\"p2\">\n        {copy}\n      </Typography>\n    </div>\n  )\n}\n","/* eslint-disable */\nimport { useEffect, useRef } from 'react';\nexport function getClosestBody(el) {\n  if (!el) {\n    return null;\n  } else if (el.tagName === 'BODY') {\n    return el;\n  } else if (el.tagName === 'IFRAME') {\n    var document_1 = el.contentDocument;\n    return document_1 ? document_1.body : null;\n  } else if (!el.offsetParent) {\n    return null;\n  }\n\n  return getClosestBody(el.offsetParent);\n}\n\nfunction preventDefault(rawEvent) {\n  var e = rawEvent || window.event; // Do not prevent if the event has more than one touch (usually meaning this is a multi touch gesture like pinch to zoom).\n\n  if (e.touches.length > 1) return true;\n  if (e.preventDefault) e.preventDefault();\n  return false;\n}\n\nvar isIosDevice = typeof window !== 'undefined' && window.navigator && window.navigator.platform && /iP(ad|hone|od)/.test(window.navigator.platform);\nvar bodies = new Map();\nvar doc = typeof document === 'object' ? document : undefined;\nvar documentListenerAdded = false;\nexport default !doc ? function useLockBodyMock(_locked, _elementRef) {\n  if (_locked === void 0) {\n    _locked = true;\n  }\n} : function useLockBody(locked, elementRef) {\n  if (locked === void 0) {\n    locked = true;\n  }\n\n  elementRef = elementRef || useRef(doc.body);\n  useEffect(function () {\n    var body = getClosestBody(elementRef.current);\n\n    if (!body) {\n      return;\n    }\n\n    var bodyInfo = bodies.get(body);\n\n    if (locked) {\n      if (!bodyInfo) {\n        bodies.set(body, {\n          counter: 1,\n          initialOverflow: body.style.overflow\n        });\n\n        if (isIosDevice) {\n          if (!documentListenerAdded) {\n            document.addEventListener('touchmove', preventDefault, {\n              passive: false\n            });\n            documentListenerAdded = true;\n          }\n        } else {\n          body.style.overflow = 'hidden';\n        }\n      } else {\n        bodies.set(body, {\n          counter: bodyInfo.counter + 1,\n          initialOverflow: bodyInfo.initialOverflow\n        });\n      }\n    } else {\n      if (bodyInfo) {\n        if (bodyInfo.counter === 1) {\n          bodies.delete(body);\n\n          if (isIosDevice) {\n            body.ontouchmove = null;\n\n            if (documentListenerAdded) {\n              document.removeEventListener('touchmove', preventDefault);\n              documentListenerAdded = false;\n            }\n          } else {\n            body.style.overflow = bodyInfo.initialOverflow;\n          }\n        } else {\n          bodies.set(body, {\n            counter: bodyInfo.counter - 1,\n            initialOverflow: bodyInfo.initialOverflow\n          });\n        }\n      }\n    }\n  }, [locked, elementRef.current]);\n};","import React, { useState, Fragment } from 'react'\nimport { AnimatePresence, motion } from 'framer-motion'\nimport { useLockBodyScroll } from 'react-use'\nimport ReactPlayer from 'react-player'\nimport { Waypoint } from 'react-waypoint'\nimport ReactModal from 'react-modal'\nimport { InPageAnchor } from '../../molecules/in-page-nav'\nimport { VerticalHeader } from '../../atoms/vertical-header'\nimport { Media } from '../../types/common'\nimport { BoatSection, TextBlockComponent } from '../boat.components'\nimport { AspectRatio } from '../../atoms/aspect-ratio'\nimport { CircleButton } from '../../atoms/circle-button'\nimport { PlayIcon } from '../../svgs/icons'\nimport CloseCursor from '../../images/close-cursor.png'\nimport { useBackgroundsQuery } from '../../services/backgrounds'\n\nexport const DiscoverSection = ({\n  copy,\n  header,\n  media,\n  sectionTitle,\n  disableBackground = false,\n}: {\n  sectionTitle: string\n  media: Media\n  header: string\n  copy: string\n  disableBackground?: boolean\n}) => {\n  const { discoverSection: background } = useBackgroundsQuery()\n\n  return (\n    <BoatSection\n      theme=\"dark\"\n      className=\"pb-24 overflow-hidden\"\n      data-section-type=\"Discover\"\n    >\n      <InPageAnchor title={sectionTitle} />\n      {disableBackground ? (\n        <div\n          className=\"absolute inset-0\"\n          style={{\n            background:\n              'radial-gradient(63.57% 82.14% at 50% 39.57%, #212121 0.12%, #000000 100%)',\n          }}\n        />\n      ) : (\n        <Fragment>\n          <img\n            src={`${background}?q=30&w=3000`}\n            alt=\"\"\n            className=\"absolute top-0 left-0 h-full w-full object-cover filter-grayscale z-auto\"\n          />\n          <div\n            className=\"absolute inset-0\"\n            style={{\n              background:\n                'linear-gradient(360deg, #000000 46.14%, rgba(0, 0, 0, 0) 100%)',\n            }}\n          />\n        </Fragment>\n      )}\n      <div className=\"md:px-12 lg:px-20 relative max-w-7xl 3xl:max-w-10xl mx-auto\">\n        <div className=\"hidden md:block absolute right-0 top-0\">\n          <VerticalHeader theme=\"dark\" className=\"mr-4\">\n            {sectionTitle}\n          </VerticalHeader>\n        </div>\n        <div className=\"px-4 mb-16 lg:mb-20 md:mt-8 lg:mt-16\">\n          <DiscoverMedia media={media} />\n        </div>\n        <TextBlockComponent\n          className=\"text-center px-4 max-w-2xl mx-auto lg:mb-8\"\n          header={header}\n          copy={copy}\n        />\n      </div>\n    </BoatSection>\n  )\n}\n\nconst DiscoverMedia = ({ media }: { media: Media }) => {\n  const [showVideo, setShowVideo] = useState(false)\n  const [autoPlayVideo, setAutoPlayVideo] = useState(false)\n  const [] = useState(false)\n  useLockBodyScroll(showVideo)\n\n  if (!media.image) {\n    return null\n  }\n\n  const modalStyles = {\n    overlay: {\n      background: 'transparent',\n      zIndex: 50,\n    },\n    content: {\n      background: 'transparent',\n      top: 0,\n      left: 0,\n      right: 0,\n      bottom: 0,\n      padding: 0,\n      border: 'none',\n      borderRadius: 0,\n      overflow: 'hidden',\n    },\n  }\n\n  return (\n    // TODO: get 3:2 discover section images\n    // <AspectRatio ratio=\"3:2\" md=\"16:9\" lg=\"21:9\">\n    <Fragment>\n      <ReactModal\n        style={modalStyles}\n        isOpen={showVideo!}\n        contentLabel=\"onRequestClose Example\"\n        onRequestClose={() => {\n          setShowVideo(false)\n        }}\n      >\n        <div\n          style={{\n            cursor: `url(${CloseCursor}) 28 28, auto`,\n          }}\n        >\n          <ReactPlayer\n            className=\"absolute top-0 left-0\"\n            url={media.videoUrl}\n            controls\n            onClick={(e) => {\n              e.preventDefault()\n              e.stopPropagation()\n              setShowVideo(false)\n            }}\n            playing={showVideo}\n            config={{\n              file: {\n                attributes: {\n                  className: 'object-cover',\n                },\n              },\n            }}\n            width=\"100%\"\n            height=\"100%\"\n          />\n        </div>\n      </ReactModal>\n      <Waypoint\n        onEnter={() => {\n          setAutoPlayVideo(true)\n        }}\n        onLeave={() => {\n          setAutoPlayVideo(false)\n        }}\n        bottomOffset={100}\n      >\n        <div className=\"waypoint\">\n          <AspectRatio ratio=\"21:9\">\n            <img\n              src={`${media.image}?q=50&w=3000`}\n              alt=\"\"\n              className=\"h-full w-full object-cover\"\n              style={{ position: 'absolute' }}\n            />\n            <AnimatePresence>\n              <motion.div\n                key=\"video\"\n                initial={{ opacity: 0 }}\n                animate={{ opacity: 1 }}\n              >\n                {media.videoUrl && (\n                  <CircleButton\n                    onClick={() => setShowVideo(true)}\n                    icon={PlayIcon}\n                    size=\"lg\"\n                    className=\"z-10 absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2\"\n                  />\n                )}\n                <ReactPlayer\n                  className=\"absolute top-0 left-0\"\n                  url={media.videoUrl}\n                  controls={false}\n                  playsinline={true}\n                  muted\n                  playing={autoPlayVideo}\n                  config={{\n                    file: {\n                      attributes: {\n                        className: 'object-cover',\n                      },\n                    },\n                  }}\n                  width=\"100%\"\n                  height=\"100%\"\n                />\n              </motion.div>\n            </AnimatePresence>\n          </AspectRatio>\n        </div>\n      </Waypoint>\n    </Fragment>\n  )\n}\n","import React from 'react'\nimport clsx from 'clsx'\nimport { InPageCta } from '../../atoms/in-page-cta'\n\nexport const ToggleButtons = ({\n  options,\n  className,\n  selectedCategory,\n  onCategoryClick,\n}) => {\n  const specBtnVariant =\n    selectedCategory === 'specifications' ? 'primary' : 'secondary'\n  const featureBtnVariant =\n    selectedCategory === 'features' ? 'primary' : 'secondary'\n\n  return (\n    <div className={`${className} flex justify-center py-6 px-4 sm:p-0`}>\n      <InPageCta\n        onClick={() => {\n          onCategoryClick('specifications')\n        }}\n        className={clsx(\n          'mr-6',\n          selectedCategory === 'specifications'\n            ? 'selected'\n            : 'text-white border-white hover:border-red'\n        )}\n        variant={specBtnVariant}\n      >\n        Specifications\n      </InPageCta>\n      <InPageCta\n        onClick={() => {\n          onCategoryClick('features')\n        }}\n        className={clsx(\n          selectedCategory === 'features'\n            ? 'selected'\n            : 'text-white border-white hover:border-red'\n        )}\n        variant={featureBtnVariant}\n      >\n        Features\n      </InPageCta>\n    </div>\n  )\n}\n\nexport default ToggleButtons\n","import React, { useState } from 'react'\nimport clsx from 'clsx'\nimport { Typography } from '../../atoms/typography'\n\nexport const ToggleSwitch = ({ isToggled, onToggle, choices }) => {\n  return (\n    <div className=\"flex justify-center sm:align-middle sm:items-center py-12 sm:py-0\">\n      <Typography className=\"mr-3 sm:mr-4\" variant=\"p3\" theme=\"dark\">\n        {choices[0]}\n      </Typography>\n      <label className=\"toggle-switch inline-block relative\">\n        <input\n          className=\"hidden\"\n          type=\"checkbox\"\n          checked={isToggled}\n          onChange={onToggle}\n        />\n        <span className=\"switch absolute top-0 left-0 bottom-0 right-0 transition-colors\" />\n      </label>\n      <Typography\n        className={clsx('ml-3 sm:ml-4 transition-transform')}\n        variant=\"p3\"\n        theme=\"dark\"\n      >\n        {choices[1]}\n      </Typography>\n    </div>\n  )\n}\n\nexport default ToggleSwitch\n","import React, { Fragment } from 'react'\nimport { Typography } from '../../atoms/typography'\nimport { AnimatePresence, motion } from 'framer-motion'\n\nconst SpecificationsSection = ({\n  specificationsCategories,\n  title,\n  unitToggle,\n}) => {\n  if (!specificationsCategories.length) {\n    return (\n      <div className=\"max-w-screen-xl m-auto\">Specifications coming soon!</div>\n    )\n  }\n\n  return (\n    <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 px-6 max-w-screen-xl m-auto lg:px-0\">\n      {specificationsCategories.map((specification, index) => {\n        return (\n          <Specification\n            key={`${specification.name}-${index}`}\n            unitToggle={unitToggle}\n            {...specification}\n          />\n        )\n      })}\n    </div>\n  )\n}\n\nconst Specification = ({ name, values, unitToggle }) => {\n  return (\n    <div className=\"py-6 border-gray-2 border-solid border-b first:border-t last:border-b-0 sm:border-none\">\n      <Typography className=\"text-center mb-3 sm:text-left\" variant=\"e3\">\n        {name}\n      </Typography>\n      <AnimatePresence exitBeforeEnter>\n        {!unitToggle && (\n          <SpecificationValueMotionDiv valueKey=\"us\">\n            {values.usValues.map((value, i) => {\n              return (\n                <Typography key={`${value}-${i}`} variant=\"p2\">\n                  {value}\n                </Typography>\n              )\n            })}\n          </SpecificationValueMotionDiv>\n        )}\n        {unitToggle && (\n          <SpecificationValueMotionDiv valueKey=\"metric\">\n            {values.metricValues.map((value) => {\n              return <Typography variant=\"p2\">{value}</Typography>\n            })}\n          </SpecificationValueMotionDiv>\n        )}\n      </AnimatePresence>\n    </div>\n  )\n}\n\nconst SpecificationValueMotionDiv = ({ children, valueKey }) => {\n  return (\n    <motion.div\n      key={valueKey}\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      exit={{ opacity: 0 }}\n      transition={{ duration: 0.25 }}\n      className=\"text-center sm:text-left w-full\"\n    >\n      {children}\n    </motion.div>\n  )\n}\n\nexport default SpecificationsSection\n","import React, { useState, useRef, Fragment } from 'react'\nimport { motion, AnimatePresence } from 'framer-motion'\nimport styled from 'styled-components'\n\nimport { Typography } from '../../atoms/typography'\n\nconst StrikeThrough = styled.div`\n  position: absolute;\n  height: 2px;\n  top: 40%;\n  background: red;\n  width: 100%;\n  transition: transform 0.5s ease;\n  transform: translate3d(-101%, 0, 0);\n\n  &.open {\n    transform: translate3d(0, 0, 0);\n  }\n`\n\nconst AnimatedBorder = styled.div`\n  transition: opacity 0.5s ease;\n\n  &.open {\n    opacity: 0;\n  }\n\n  height: 1px;\n  /* background-color: #fff; */\n  margin-top: 10px;\n  position: relative;\n  overflow: hidden;\n  &:after {\n    content: '';\n    height: 1px;\n    background: linear-gradient(\n      to right,\n      rgba(255, 255, 255, 1) 0%,\n      rgba(255, 255, 255, 1) 30%,\n      rgba(255, 255, 255, 0) 40%,\n      rgba(255, 255, 255, 1) 52%,\n      rgba(255, 255, 255, 1) 100%\n    );\n    width: 400%;\n    display: block;\n    transition: transform 1s ease;\n    transform: translate3d(-60%, 0, 0);\n  }\n`\n\nconst Header = styled.header`\n  &:hover {\n    ${AnimatedBorder} {\n      &:after {\n        transform: translate3d(0, 0, 0);\n      }\n    }\n  }\n`\n\nconst Close = styled.div`\n  background-color: rgba(255, 255, 255, 0.5);\n  height: 48px;\n  width: 48px;\n  position: absolute;\n  top: 19px;\n  right: 19px;\n  border-radius: 48px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: background-color 0.5s ease;\n`\n\nconst StyledFeatureLi = styled.li`\n  div::before {\n    display: inline-block;\n    color: red;\n    height: 5px;\n    width: 5px;\n    border-radius: 5px;\n    background-color: red;\n    content: '';\n    vertical-align: middle;\n    margin-right: 7px;\n  }\n`\n\nconst FeaturesSection = ({ title, featureCategories }) => {\n  if (!featureCategories.length) {\n    return <div className=\"max-w-screen-xl m-auto\">Features coming soon!</div>\n  }\n\n  const [expanded, setExpanded] = useState<false | number>(false)\n\n  return (\n    <div className=\"relative px-6 max-w-screen-xl m-auto lg:px-0\">\n      <div className=\"w-full flex flex-col items-center\">\n        {featureCategories.map((featureCategory, i) => {\n          const isOpen = i === expanded\n\n          return (\n            <div\n              key={`${featureCategory}-${i}`}\n              className=\"feature w-full border-solid border-gray-1 border mb-6\"\n            >\n              <Header\n                className=\"relative p-12 md:py-24 text-center flex items-center content-center justify-center cursor-pointer group\"\n                onClick={() => setExpanded(isOpen ? false : i)}\n              >\n                <CloseX isOpen={isOpen} />\n                <Typography className=\"relative overflow-hidden\" variant=\"h3\">\n                  <StrikeThrough className={`${isOpen ? 'open' : 'closed'}`} />\n                  {featureCategory.name}\n                  <AnimatedBorder className={`${isOpen ? 'open' : 'closed'}`} />\n                </Typography>\n              </Header>\n\n              <motion.div\n                initial={{ height: 0 }}\n                animate={{ height: isOpen ? 'auto' : 0 }}\n                exit={{ height: 0 }}\n                transition={{ ease: [0.45, 0, 0.55, 1] }}\n                className=\"overflow-hidden feature-body px-6\"\n              >\n                <div className=\"lg:grid-cols-2 lg:px-32 lg:grid lg:col-gap-10 pb-10\">\n                  {featureCategory.features.length === 0 && (\n                    <div\n                      key={`no features`}\n                      className=\"border-b border-solid border-gray-2 lg:border-none\"\n                    >\n                      <Typography variant=\"e2\" className=\"mb-10 text-center\">\n                        Details Coming Soon!\n                      </Typography>\n                    </div>\n                  )}\n\n                  {featureCategory.features.map((feature, i) => {\n                    return (\n                      <div\n                        key={`${feature.name}-${i}`}\n                        className=\"pt-10 border-b border-solid border-gray-2 last:border-b-0 lg:border-none\"\n                      >\n                        <Typography variant=\"e2\" className=\"mb-6\">\n                          {feature.name}\n                        </Typography>\n\n                        {!!feature.descriptions.length && (\n                          <ul className=\"mb-10\">\n                            {feature.descriptions.map((description) => {\n                              return (\n                                <StyledFeatureLi\n                                  key={description}\n                                  className=\"mb-6\"\n                                >\n                                  <Typography variant=\"p3\">\n                                    {description}\n                                  </Typography>\n                                </StyledFeatureLi>\n                              )\n                            })}\n                          </ul>\n                        )}\n                      </div>\n                    )\n                  })}\n                </div>\n              </motion.div>\n            </div>\n          )\n        })}\n      </div>\n    </div>\n  )\n}\n\nconst FeatureAccordion = ({\n  i,\n  expanded,\n  setExpanded,\n  feature,\n  setFeatureState,\n}) => {\n  const isOpen = i === expanded\n  // By using `AnimatePresence` to mount and unmount the contents, we can animate\n  // them in and out while also only rendering the contents of open accordions\n  setFeatureState(isOpen)\n  return (\n    <div className=\"max-w-screen-xl w-full mb-6\">\n      <motion.div className=\"overflow-hidden m-auto border-gray-4 border-solid border\">\n        <Header\n          as={motion.header}\n          className=\"flex items-center content-center justify-center cursor-pointer relative group\"\n          style={{ height: '240px', width: '100%' }}\n          initial={false}\n          onClick={() => setExpanded(isOpen ? false : i)}\n        >\n          <CloseX isOpen={isOpen} />\n\n          <Typography className=\"relative overflow-hidden\" variant=\"h3\">\n            <StrikeThrough className={`${isOpen ? 'open' : 'closed'}`} />\n            {feature.name}\n            <AnimatedBorder className={`${isOpen ? 'open' : 'closed'}`} />\n          </Typography>\n        </Header>\n        <AnimatePresence>\n          {isOpen && (\n            <motion.section\n              className=\"px-10 sm:px-20 md:px-40\"\n              key=\"content\"\n              initial=\"collapsed\"\n              animate=\"open\"\n              exit=\"collapsed\"\n              onAnimationComplete={() => {\n                setFeatureState(expanded)\n              }}\n              variants={{\n                open: { y: 0, opacity: 1, height: 'auto' },\n                collapsed: { y: 100, opacity: 0, height: 0 },\n              }}\n              transition={{ duration: 0.8, ease: [0.04, 0.62, 0.23, 0.98] }}\n            >\n              <div className=\"grid grid-cols-2 gap-10 pb-20\">\n                {feature.data.map((data) => {\n                  return (\n                    <div key={data.title}>\n                      <Typography className=\"mb-8\" variant=\"e2\">\n                        {data.title}\n                      </Typography>\n                      <ul className=\"w-full\">\n                        {data.details.map((detail) => {\n                          return (\n                            <StyledFeatureLi key={detail} className=\"mb-6\">\n                              <Typography variant=\"p3\">{detail}</Typography>\n                            </StyledFeatureLi>\n                          )\n                        })}\n                      </ul>\n                    </div>\n                  )\n                })}\n              </div>\n            </motion.section>\n          )}\n        </AnimatePresence>\n      </motion.div>\n    </div>\n  )\n}\n\nconst CloseX = ({ isOpen }) => {\n  return (\n    <Close\n      as={motion.div}\n      isOpen={isOpen}\n      initial={{ x: 0 }}\n      animate={{ rotate: isOpen ? -45 : 0 }}\n      className=\"group-hover:bg-red\"\n    >\n      <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\">\n        <line\n          x1=\"8.41675\"\n          x2=\"8.41675\"\n          y2=\"16\"\n          stroke=\"white\"\n          strokeWidth=\"1.5\"\n        />\n        <line\n          y1=\"7.58301\"\n          x2=\"16\"\n          y2=\"7.58301\"\n          stroke=\"white\"\n          strokeWidth=\"1.5\"\n        />\n      </svg>\n    </Close>\n  )\n}\n\nexport default FeaturesSection\n","import React, { useState, useRef, useEffect } from 'react'\nimport { AnimatePresence, motion } from 'framer-motion'\nimport { ToggleButtons } from './ToggleButtons'\nimport { ToggleSwitch } from './ToggleSwitch'\nimport SpecificationsSection from './SpecificationsSection'\nimport FeaturesSection from './FeaturesSection'\nimport { InPageAnchor } from '../../molecules/in-page-nav'\nimport { BoatSection } from '../../templates/boat.components'\nimport { useToggle } from 'react-use'\nimport SpecsFeaturesBg from '../../images/specsAndFeaturesBg.jpg'\n\nconst SpecsAndFeaturesSection = ({ specifications, features }) => {\n  const [isToggled, setIsToggled] = useToggle(false)\n  const [selectedCategory, setSelectedCategory] = useState('specifications')\n\n  const showUnitToggle = selectedCategory === 'specifications' ? true : false\n\n  const hasSpecifications = !!specifications.specificationsCategories.length\n  const hasFeatures = !!features.featureCategories.length\n\n  if (!hasSpecifications && !hasFeatures) {\n    return null\n  }\n\n  return (\n    <BoatSection\n      theme=\"dark\"\n      className=\"pb-10 sm:pb-24 overflow-hidden bg-no-repeat bg-cover\"\n      data-section-type=\"Specs And Features\"\n      style={{\n        backgroundImage: `linear-gradient(to bottom, rgba(245, 246, 252, 0) 75%, rgba(0,0,0,1)), url(${SpecsFeaturesBg})`,\n        backgroundSize: '100vw',\n      }}\n    >\n      <InPageAnchor title=\"specs\" />\n\n      <div className=\"sm:flex justify-between align-middle content-center px-6 lg:px-0 sm:mb-10 max-w-screen-xl lg:mx-auto\">\n        <ToggleButtons\n          options={['Specifications', 'Features']}\n          className=\"toggleButtons\"\n          selectedCategory={selectedCategory}\n          onCategoryClick={setSelectedCategory}\n        />\n        <AnimatePresence initial={false}>\n          {showUnitToggle && (\n            <motion.div\n              initial={{ opacity: 0, height: 0 }}\n              animate={{ opacity: 1, height: 'auto' }}\n              exit={{ opacity: 0, height: 0 }}\n            >\n              <ToggleSwitch\n                isToggled={isToggled}\n                onToggle={setIsToggled}\n                choices={['US', 'Metric']}\n              />\n            </motion.div>\n          )}\n        </AnimatePresence>\n      </div>\n\n      <AnimatePresence exitBeforeEnter initial={false}>\n        {selectedCategory === 'specifications' && (\n          <motion.div\n            key=\"specifications\"\n            initial={{ opacity: 0, y: 50 }}\n            animate={{ opacity: 1, y: 0 }}\n            exit={{ opacity: 0, y: 50 }}\n            transition={{ ease: [0.45, 0, 0.5, 0.1] }}\n          >\n            <SpecificationsSection unitToggle={isToggled} {...specifications} />\n          </motion.div>\n        )}\n        {selectedCategory === 'features' && (\n          <motion.div\n            key=\"features\"\n            initial={{ opacity: 0, y: 50 }}\n            animate={{ opacity: 1, y: 0 }}\n            exit={{ opacity: 0, y: 50 }}\n            transition={{ ease: [0.45, 0, 0.5, 0.1] }}\n          >\n            <FeaturesSection {...features} />\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </BoatSection>\n  )\n}\n\nconst MotionSection = ({ children, initial, ...rest }) => {\n  return (\n    <motion.div\n      animate={{ top: 0, opacity: 1 }}\n      initial={initial}\n      exit={{ opacity: 0, top: '-50%' }}\n      {...rest}\n    >\n      {children}\n    </motion.div>\n  )\n}\n\nexport default SpecsAndFeaturesSection\n","import React, { useState, useEffect } from 'react'\nimport clsx from 'clsx'\nimport { GallerySection, GalleryMedia } from '../types/common'\nimport {\n  BoatSection,\n  MobileSectionHeader,\n  CarouselButtons,\n} from '../templates/boat.components'\nimport { InPageAnchor } from './in-page-nav'\nimport { VerticalHeader } from '../atoms/vertical-header'\nimport { Typography } from '../atoms/typography'\nimport { ProgressBar } from '../atoms/progress-bar'\nimport { useMedia, useLockBodyScroll } from 'react-use'\nimport { AnimatePresence, motion } from 'framer-motion'\nimport { cacheImages } from '../services/images'\nimport { AspectRatio } from '../atoms/aspect-ratio'\nimport { CircleButton } from '../atoms/circle-button'\nimport { PlayIcon, ExpandIcon } from '../svgs/icons'\nimport ReactModal from 'react-modal'\nimport ReactPlayer from 'react-player'\nimport { HotKeys } from 'react-hotkeys'\n\nconst parentAnimations = {\n  initial: 'hidden',\n  animate: 'visible',\n  exit: 'hidden',\n  variants: {\n    hidden: {\n      transition: {\n        when: 'afterChildren',\n        staggerChildren: 0.05,\n      },\n    },\n    visible: {\n      transition: {\n        when: 'beforeChildren',\n        staggerChildren: 0.05,\n      },\n    },\n  },\n}\n\nconst childAnimations = {\n  variants: {\n    hidden: {\n      opacity: 0,\n    },\n    visible: {\n      opacity: 1,\n    },\n  },\n  transition: {\n    duration: 0.3,\n  },\n}\n\nexport interface MediaGalleryProps extends GallerySection {}\n\nexport const MediaGallery = ({ source, title, gallery }: MediaGalleryProps) => {\n  const showMore = useMedia('(min-width: 720px)')\n  const [lightboxMediaIndex, setLightboxMediaIndex] = useState<number>()\n  const [page, setPage] = useState(1) // One-based to keep ourselves sane\n  const [category, setCategory] = useState<'all' | 'photos' | 'videos'>('all')\n  useLockBodyScroll(lightboxMediaIndex !== undefined)\n\n  const normalizedGallery = gallery.map((galleryItem) => {\n    return {\n      thumbnail: galleryItem.thumbnail,\n      image: galleryItem.image,\n      videoUrl: galleryItem.videoUrl,\n    }\n  })\n  const filteredGallery = normalizedGallery.filter((item) => {\n    if (category === 'photos') {\n      return !item.videoUrl\n    }\n    if (category === 'videos') {\n      return !!item.videoUrl\n    }\n    return true\n  })\n\n  const perPage = showMore ? 8 : 4\n  const totalPages = Math.ceil(filteredGallery.length / perPage)\n\n  const goNext = () => {\n    setPage((page) => (page === totalPages ? page : page + 1))\n  }\n  const goPrev = () => {\n    setPage((page) => (page === 1 ? page : page - 1))\n  }\n  const goNextLightbox = () => {\n    setLightboxMediaIndex((lightboxMediaIndex = -1) =>\n      Math.min(lightboxMediaIndex + 1, filteredGallery.length - 1)\n    )\n  }\n  const goPrevLightbox = () => {\n    setLightboxMediaIndex((lightboxMediaIndex = -1) =>\n      Math.max(lightboxMediaIndex - 1, 0)\n    )\n  }\n\n  // Handle when we filter the images but are potentially on a page number that's too high\n  useEffect(() => {\n    if (page > totalPages) {\n      setPage(totalPages)\n    }\n  }, [category])\n\n  // Preload next page of thumbnails\n  useEffect(() => {\n    cacheImages(\n      getGallerySlice(filteredGallery, page + 1, perPage).map((item) => {\n        return `${item.thumbnail}?q=30&w=750`\n      })\n    )\n  }, [page, perPage])\n\n  // Preload full-size gallery image before and after current lightboxMedia image\n  useEffect(() => {\n    if (lightboxMediaIndex === undefined) return\n    const beforeLightboxMediaImage =\n      filteredGallery[Math.max(lightboxMediaIndex - 1, 0)].image\n    const afterLightboxMediaImage =\n      filteredGallery[\n        Math.min(lightboxMediaIndex + 1, filteredGallery.length - 1)\n      ].image\n    cacheImages([beforeLightboxMediaImage, afterLightboxMediaImage])\n  }, [lightboxMediaIndex])\n\n  const lightboxMedia =\n    lightboxMediaIndex !== undefined\n      ? filteredGallery[lightboxMediaIndex]\n      : undefined\n\n  return (\n    <BoatSection theme=\"dark\" className=\"sm:py-32\">\n      <InPageAnchor title={title} />\n      <MobileSectionHeader className=\"sm:hidden\">{title}</MobileSectionHeader>\n      <div className=\"relative max-w-7xl mx-auto sm:pl-16\">\n        <VerticalHeader\n          theme=\"dark\"\n          className=\"absolute -ml-12 xl:-ml-16 mt-12\"\n        >\n          {title}\n        </VerticalHeader>\n        <div className=\"px-4 flex space-x-6 mb-6\">\n          <CategorySelector\n            onClick={() => setCategory('all')}\n            selected={category === 'all'}\n          >\n            All\n          </CategorySelector>\n          <CategorySelector\n            onClick={() => setCategory('photos')}\n            selected={category === 'photos'}\n            disabled={!hasPhotos(normalizedGallery)}\n          >\n            Photos\n          </CategorySelector>\n          <CategorySelector\n            onClick={() => setCategory('videos')}\n            selected={category === 'videos'}\n            disabled={!hasVideos(normalizedGallery)}\n          >\n            Videos\n          </CategorySelector>\n        </div>\n        <AnimatePresence exitBeforeEnter initial={false}>\n          <motion.div\n            key={`${page}-${perPage}`}\n            {...parentAnimations}\n            className=\"grid grid-cols-2 sm:grid-cols-none sm:grid-flow-col-dense sm:grid-rows-2 gap-6 px-4 mb-16\"\n          >\n            {getGallerySlice(filteredGallery, page, perPage).map(\n              (item, index) => (\n                <motion.div\n                  key={`${page}-${perPage}-${item.thumbnail}`}\n                  {...childAnimations}\n                >\n                  <GalleryImage\n                    key={index}\n                    media={item}\n                    hasVideo={!!item.videoUrl}\n                    onClick={() =>\n                      setLightboxMediaIndex(filteredGallery.indexOf(item))\n                    }\n                  />\n                </motion.div>\n              )\n            )}\n          </motion.div>\n        </AnimatePresence>\n        <div className=\"flex sm:justify-between items-center px-4\">\n          <div className=\"hidden sm:block w-full max-w-xs md:max-w-sm lg:max-w-md\">\n            <ProgressBar percentage={calculatePercentage(page, totalPages)} />\n          </div>\n          <CarouselButtons\n            className=\"mb-4\"\n            onClickNext={goNext}\n            onClickPrev={goPrev}\n            disabledNext={page === totalPages}\n            disabledPrev={page === 1}\n          />\n        </div>\n      </div>\n      <Lightbox\n        isOpen={!!lightboxMedia}\n        onClose={() => setLightboxMediaIndex(undefined)}\n        media={lightboxMedia}\n        goNext={goNextLightbox}\n        goPrev={goPrevLightbox}\n        disabledNext={lightboxMediaIndex === filteredGallery.length - 1}\n        disabledPrev={lightboxMediaIndex === 0}\n      />\n    </BoatSection>\n  )\n}\n\nconst modalStyles = {\n  overlay: {\n    background: 'transparent',\n    zIndex: 50,\n  },\n  content: {\n    background: 'transparent',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    padding: 0,\n    border: 'none',\n    borderRadius: 0,\n    overflow: 'hidden',\n  },\n}\n\nconst Lightbox = ({\n  disabledNext,\n  disabledPrev,\n  goNext,\n  goPrev,\n  isOpen,\n  media,\n  onClose,\n}: {\n  disabledNext: boolean\n  disabledPrev: boolean\n  goNext: () => void\n  goPrev: () => void\n  isOpen: boolean\n  media?: GalleryMedia\n  onClose: () => void\n}) => {\n  const animationDuration = 0.3\n  return (\n    <HotKeys\n      keyMap={{ NEXT: 'right', PREV: 'left' }}\n      handlers={{ NEXT: goNext, PREV: goPrev }}\n    >\n      <ReactModal\n        isOpen={isOpen}\n        style={modalStyles}\n        closeTimeoutMS={animationDuration * 1000}\n        onRequestClose={onClose}\n      >\n        <AnimatePresence>\n          {isOpen && (\n            <motion.div\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n              exit={{ opacity: 0 }}\n              transition={{ duration: animationDuration }}\n              className=\"relative min-h-full bg-black bg-opacity-75 flex justify-center items-center\"\n              onClick={onClose}\n            >\n              <div\n                className=\"w-5/6 flex justify-center items-center\"\n                style={{ width: '90vw', height: '90vh' }}\n              >\n                {media!.videoUrl ? (\n                  <ReactPlayer\n                    className=\"\"\n                    url={media!.videoUrl}\n                    controls\n                    playing\n                    config={{\n                      file: {\n                        attributes: {\n                          className: 'object-cover',\n                        },\n                      },\n                    }}\n                    width=\"100%\"\n                    height=\"100%\"\n                  />\n                ) : (\n                  <motion.img\n                    src={`${media!.image}?q=30&w=1500`}\n                    className=\"max-h-full max-w-full\"\n                  />\n                )}\n              </div>\n              <CarouselButtons\n                className=\"absolute px-4 w-full justify-between\"\n                onClickNext={(e) => {\n                  e.stopPropagation()\n                  goNext()\n                }}\n                onClickPrev={(e) => {\n                  e.stopPropagation()\n                  goPrev()\n                }}\n                disabledNext={disabledNext}\n                disabledPrev={disabledPrev}\n              />\n            </motion.div>\n          )}\n        </AnimatePresence>\n      </ReactModal>\n    </HotKeys>\n  )\n}\n\nconst GalleryImage = ({\n  className = '',\n  hasVideo,\n  media,\n  onClick,\n}: {\n  className?: string\n  hasVideo: boolean\n  media: GalleryMedia\n  onClick: React.MouseEventHandler<HTMLDivElement>\n}) => {\n  return (\n    <div className={`max-w-xs ${className}`} role=\"button\" onClick={onClick}>\n      <AspectRatio ratio=\"1:1\" className=\"relative group\">\n        <img\n          src={`${media.thumbnail}?q=30&w=750`}\n          alt={media.alt || 'Gallery image'}\n          className=\"h-full w-full object-cover group-hover:filter-none transition duration-150 ease-in-out\"\n          style={{ position: 'absolute' }}\n        />\n        <div className=\"absolute inset-0 bg-black transform bg-opacity-25 group-hover:bg-opacity-0 transition duration-150 ease-in-out\"></div>\n        <motion.div\n          {...childAnimations}\n          className=\"absolute right-0 bottom-0 mb-4 mr-4\"\n        >\n          <CircleButton\n            icon={hasVideo ? PlayIcon : ExpandIcon}\n            size=\"sm\"\n            className=\"group-hover:bg-white group-hover:text-red\"\n          />\n        </motion.div>\n      </AspectRatio>\n    </div>\n  )\n}\n\nfunction CategorySelector({\n  children,\n  disabled,\n  selected,\n  ...rest\n}: { selected: boolean } & React.ButtonHTMLAttributes<HTMLButtonElement>) {\n  return (\n    <button {...rest} disabled={disabled} type=\"button\" className=\"text-white\">\n      <Typography\n        variant=\"e2\"\n        className={clsx({\n          'text-red': selected,\n          'text-gray-3 cursor-default': disabled,\n        })}\n      >\n        {children}\n      </Typography>\n    </button>\n  )\n}\n\nconst getGallerySlice = (\n  gallery: GalleryMedia[],\n  page: number,\n  perPage: number\n) => {\n  const start = (page - 1) * perPage\n  const end = start + perPage\n  return gallery.slice(start, end)\n}\nconst calculatePercentage = (page: number, totalPages: number) =>\n  Math.round((page / totalPages) * 100)\nconst hasVideos = (gallery: GalleryMedia[]) =>\n  gallery.some((media) => !!media.embedUrl || !!media.videoUrl)\nconst hasPhotos = (gallery: GalleryMedia[]) =>\n  gallery.some((media) => !media.embedUrl && !media.videoUrl)\n","import React from 'react'\nimport { PageProps, graphql } from 'gatsby'\nimport { Layout } from '../components/layout'\nimport SEO from '../components/seo'\nimport { InPageNav, InPageAnchor } from '../molecules/in-page-nav'\nimport {\n  BoatHeader,\n  BoatSection,\n  MoreDetailsBlockComponent,\n  OrderSectionComponent,\n  PowertrainSectionComponent,\n} from './boat.components'\nimport {\n  createCarouselItems,\n  extractFlexibleSectionsFromCraft,\n  HorizontalImageTextBlockComponent,\n  MobileSectionHeader,\n  OneColumnImageTextBlockComponent,\n  OneColumnTextBlockComponent,\n  SideBleedImage,\n  ThreeUpImageBlock,\n  TwoColumnImageTextBlockComponent,\n  TwoUpImageBlock,\n  VerticalHeaderBlock,\n} from './common.components'\nimport { CustomizationsSectionComponent } from './boat/customizations-section-component'\nimport { DiscoverSection } from './boat/discover-section'\nimport SpecsAndFeaturesSection from '../components/specsAndFeatures/SpecificationsAndFeatures'\nimport { isPowertrainBlock, isMoreDetailsBlock } from '../types/boat'\nimport {\n  getFlexibleSections,\n  HorizontalImageTextBlock,\n  isCarouselBlock,\n  isFullWidthCarouselBlock,\n  isHorizontalImageTextBlock,\n  isOneColumnImageTextBlock,\n  isOneColumnTextBlock,\n  isSliderBlock,\n  isThreeColumnImagesBlock,\n  isTwoColumnImagesBlock,\n  isTwoColumnImageTextBlock,\n} from '../types/common'\nimport { Carousel } from '../molecules/carousel'\nimport { FullWidthCarousel } from '../molecules/full-width-carousel'\nimport { Slider } from '../molecules/slider'\nimport { MediaGallery } from '../molecules/media-gallery'\nimport {\n  InquiryModal,\n  useInquiryModalState,\n} from '../molecules/inquiry/inquiry-modal'\n\nconst extractTitlesFromCraft = (\n  boatEntry: GatsbyTypes.BoatPageQuery['craftAPI']['entry']\n) => {\n  const titles: string[][] = []\n  if (!!boatEntry?.discoverSection?.[0]) {\n    titles.push(['Discover', ''])\n  }\n  boatEntry?.flexibleSections?.forEach((section) => {\n    titles.push([section.title, section.shortTitle || ''])\n  })\n  if (!!boatEntry?.boatSpecs) {\n    titles.push(['Specs', ''])\n  }\n  if (!!boatEntry?.gallery) {\n    titles.push(['Gallery', ''])\n  }\n  titles.push([\n    boatEntry?.orderSectionTitle || 'Order Today',\n    boatEntry?.orderSectionShortTitle || 'Order',\n  ])\n  return titles\n}\n\nconst extractHeroSectionFromCraft = (boatEntry: any) => {\n  return {\n    image: boatEntry.singleMedia[0]?.image[0]?.url,\n    alt: boatEntry.singleMedia[0]?.alt,\n    videoUrl: boatEntry.singleMedia[0]?.videoURL,\n    boatNameLong: boatEntry.boatNameLong,\n    eyebrow: boatEntry.eyebrow,\n    headline: boatEntry.headline,\n    stats: boatEntry.boatStats,\n    boatLogo: boatEntry.boatLogo[0]?.url,\n    boatName: boatEntry.title,\n    ctaText: boatEntry.ctaText,\n  }\n}\n\nconst extractDiscoverSectionFromCraft = (boatEntry: any) => {\n  return {\n    title: 'discover',\n    disableBackground: boatEntry.discoverSection[0]?.disableBackground,\n    content: {\n      header: boatEntry.discoverSection[0]?.textBlock[0]?.header,\n      copy: boatEntry.discoverSection[0]?.textBlock[0]?.copy,\n    },\n    media: {\n      image: boatEntry.discoverSection[0]?.singleMedia[0]?.image[0]?.url,\n      videoUrl: boatEntry.discoverSection[0]?.singleMedia[0]?.videoURL,\n    },\n  }\n}\n\nconst extractGallerySectionFromCraft = (boatEntry: any) => {\n  const galleryItems = boatEntry?.gallery.map((galleryItem) => {\n    return {\n      thumbnail: galleryItem?.image?.[0].thumbnail,\n      image: galleryItem?.image?.[0].full,\n      videoUrl: galleryItem?.videoURL,\n    }\n  })\n\n  return {\n    source: 'craft',\n    type: 'gallery',\n    title: 'Media Gallery',\n    shortTitle: 'Gallery',\n    gallery: galleryItems,\n  }\n}\n\nconst extractCustomizationsSectionFromCraft = (boatEntry: any) => {\n  const options = boatEntry?.bespokeOptions?.map((option: any) => {\n    return {\n      media: {\n        image: option.singleMedia?.[0].image?.[0].url,\n      },\n      content: {\n        header: option.textBlock?.[0]?.header,\n        copy: option.textBlock?.[0]?.copy,\n      },\n    }\n  })\n\n  return {\n    title: boatEntry.bespokeSectionCustomTitle || 'Make it Yours',\n    subtitle: boatEntry.bespokeSectionCustomSubtitle || 'Bespoke Possibilities',\n    backgroundImage: boatEntry.bespokeBackgroundImage?.[0]?.url,\n    options,\n  }\n}\n\nconst extractSpecsSectionFromCraft = (boatEntry: any) => {\n  const categories = boatEntry?.boatSpecs?.map((specCategory: any) => {\n    const specs = specCategory?.children?.map((specData: any) => {\n      const specDescriptions = specData?.children?.map((specDesc: any) => {\n        return specDesc?.boatSpecDescription\n      })\n\n      return {\n        name: specData?.boatSpecName,\n        descriptions: specDescriptions,\n      }\n    })\n\n    return {\n      name: specCategory.boatSpecCategory,\n      specs,\n    }\n  })\n\n  return {\n    title: 'Specs',\n    categories,\n  }\n}\n\nconst extractSpecsAndFeaturesFromCraft = (boatEntry: any) => {\n  const getSpecs = () => {\n    const specificationsCategories = boatEntry?.boatSpecifications?.map(\n      (specificationCategory: any) => {\n        const metricValues: any = []\n        const usValues: any = []\n\n        specificationCategory?.children?.map((specification: any) => {\n          metricValues.push(specification.specificationValueMetric)\n          usValues.push(specification.specificationValueUS)\n        })\n\n        return {\n          name: specificationCategory?.specificationLabel,\n          values: {\n            metricValues,\n            usValues,\n          },\n        }\n      }\n    )\n\n    return {\n      title: 'Specifications',\n      specificationsCategories,\n    }\n  }\n\n  const getFeatures = () => {\n    const featureCategories = boatEntry?.boatFeatures?.map(\n      (featureCategory: any) => {\n        const features = featureCategory?.children?.map((featureData: any) => {\n          const featureDescriptions = featureData?.children?.map(\n            (featureDesc: any) => {\n              return featureDesc.boatFeatureDescription\n            }\n          )\n\n          return {\n            name: featureData.boatFeatureName,\n            descriptions: featureDescriptions,\n          }\n        })\n\n        return {\n          name: featureCategory.boatFeatureCategory,\n          features,\n        }\n      }\n    )\n\n    return {\n      title: 'Features',\n      featureCategories,\n    }\n  }\n\n  return {\n    specifications: getSpecs(),\n    features: getFeatures(),\n  }\n}\n\nconst extractPowertrainDataFromCMS = (boatEntry: any) => {\n  const moreDetailsInfo = boatEntry?.powertrainMoreDetails?.[0]?.children.map(\n    (detail) => {\n      return {\n        layout: detail.horizontalLayout,\n        header: detail.textBlock?.[0]?.header,\n        copy: detail.textBlock?.[0]?.copy,\n        image: detail.singleMedia?.[0].image?.[0]?.url,\n      }\n    }\n  )\n\n  const options = boatEntry.powertrainOptions.map((option: any) => {\n    const details = option.children.map((detail) => {\n      return {\n        name: detail.textBlockHeader,\n        info: detail.textBlockCopy,\n      }\n    })\n\n    return {\n      name: option.textBlockHeader,\n      details,\n    }\n  })\n\n  return {\n    heroImage: boatEntry.powertrainOptionsHeader,\n    options,\n    moreDetails: {\n      buttonText: boatEntry?.powertrainMoreDetails?.[0]?.textBlockHeader,\n      details: moreDetailsInfo,\n    },\n  }\n}\n\nconst extractOrderDataFromCraft = (boatEntry: any) => {\n  return {\n    boatNameLong: boatEntry.boatNameLong,\n    title: boatEntry.orderSectionTitle || 'Order Today',\n    media: boatEntry.orderSectionBackground[0]?.url,\n  }\n}\n\nconst BoatTemplate = (props: PageProps<GatsbyTypes.BoatPageQuery>) => {\n  const {\n    data: {\n      craftAPI: { entry: boatEntry },\n    },\n  } = props\n\n  if (!boatEntry)\n    return <div className=\"text-white\">{props.pageContext.craftSlug}</div>\n\n  const titles = extractTitlesFromCraft(boatEntry)\n  const heroData = extractHeroSectionFromCraft(boatEntry)\n  const discoverData = extractDiscoverSectionFromCraft(boatEntry)\n  const flexData = getFlexibleSections(\n    extractFlexibleSectionsFromCraft(boatEntry)\n  )\n  const specsData = extractSpecsSectionFromCraft(boatEntry)\n  const specsAndFeaturesData = extractSpecsAndFeaturesFromCraft(boatEntry)\n  const galleryData = extractGallerySectionFromCraft(boatEntry)\n  const customizationsData = extractCustomizationsSectionFromCraft(boatEntry)\n  const orderData = extractOrderDataFromCraft(boatEntry)\n  const powertrainData = extractPowertrainDataFromCMS(boatEntry)\n\n  const [, setInquiryModalState] = useInquiryModalState()\n  return (\n    <Layout>\n      <SEO title={heroData.boatName} slug={props.path} image={heroData.image} />\n      {!heroData && <div>Enter Some boat data</div>}\n      {heroData && (\n        <BoatHeader\n          image={`${heroData.image}?q=30&w=2800`}\n          alt={heroData.alt}\n          videoUrl={heroData.videoUrl}\n          boatLogo={heroData.boatLogo}\n          boatNameLong={heroData.boatNameLong}\n          eyebrow={heroData.eyebrow}\n          headline={heroData.headline!}\n          stats={heroData.stats! as Stat[]}\n          onClickCta={setInquiryModalState}\n          ctaText={heroData.ctaText}\n        />\n      )}\n      <InPageNav\n        boatName={heroData.boatName}\n        titles={titles}\n        onClickInquire={setInquiryModalState}\n      />\n      {discoverData && (\n        <DiscoverSection\n          sectionTitle={discoverData.title!}\n          media={discoverData.media}\n          header={discoverData.content.header}\n          copy={discoverData.content.copy}\n          disableBackground={discoverData.disableBackground}\n        />\n      )}\n      {flexData.map(({ title, theme, bleedDirection, headerImage, blocks }) => (\n        <BoatSection key={title} theme={theme}>\n          <InPageAnchor title={title} />\n          <MobileSectionHeader>{title}</MobileSectionHeader>\n          {!!headerImage && (\n            <VerticalHeaderBlock\n              label={title}\n              side={bleedDirection === 'left' ? 'right' : 'left'}\n              theme={theme}\n              className=\"lg:mt-32\"\n            />\n          )}\n          {!!headerImage ? (\n            <SideBleedImage\n              media={headerImage}\n              side={bleedDirection}\n              className=\"relative mx-auto md:mt-16 lg:mt-32 mb-20 md:mb-32\"\n              size=\"large\"\n            />\n          ) : (\n            <div className=\"md:pt-20\"></div>\n          )}\n          {!!blocks &&\n            blocks.map((block, index) => {\n              if (isTwoColumnImageTextBlock(block)) {\n                return (\n                  <TwoColumnImageTextBlockComponent key={index} {...block} />\n                )\n              }\n              if (isOneColumnTextBlock(block)) {\n                if (block.textBlock) {\n                  block.copy = block.textBlock[0].copy\n                  block.header = block.textBlock[0].header\n                }\n\n                return (\n                  <OneColumnTextBlockComponent\n                    key={index}\n                    {...block}\n                    align={block.align ?? undefined}\n                  />\n                )\n              }\n              if (isOneColumnImageTextBlock(block)) {\n                if (block.textBlock) {\n                  block.content = {\n                    copy: block.textBlock[0].copy,\n                    header: block.textBlock[0].header,\n                  }\n                  block.media = {\n                    image: block.singleMedia?.[0].image?.[0]?.url,\n                    videoURL: block.singleMedia?.[0].videoURL,\n                    autoplayVideo: block.singleMedia?.[0].autoplayVideo,\n                  }\n                }\n\n                return (\n                  <OneColumnImageTextBlockComponent key={index} {...block} />\n                )\n              }\n              if (isCarouselBlock(block)) {\n                if (block?.source === 'craft') {\n                  const items = createCarouselItems(block.children)\n                  block.items = items\n                }\n\n                return <Carousel key={index} {...block} theme={theme} />\n              }\n              if (isSliderBlock(block)) {\n                if (block?.source === 'craft') {\n                  const items = createCarouselItems(block.children)\n                  block.items = items\n                }\n\n                return <Slider key={index} {...block} theme={theme} />\n              }\n              if (isThreeColumnImagesBlock(block)) {\n                return (\n                  <ThreeUpImageBlock\n                    key={index}\n                    className=\"mb-32\"\n                    images={block.children}\n                  />\n                )\n              }\n              if (isTwoColumnImagesBlock(block)) {\n                return (\n                  <TwoUpImageBlock\n                    key={index}\n                    className=\"mb-32\"\n                    images={block.images || block.children}\n                  />\n                )\n              }\n              if (isHorizontalImageTextBlock(block)) {\n                const extractedBlock: HorizontalImageTextBlock = {\n                  type: 'horizontal-image-text',\n                  layout: block.layout,\n                  content: {\n                    header: block.textBlock[0].header as string,\n                    copy: block.textBlock[0].copy as string,\n                  },\n                  media: {\n                    image: {\n                      publicURL: block.singleMedia[0].image[0]?.url as string,\n                    },\n                  },\n                }\n                return (\n                  <HorizontalImageTextBlockComponent\n                    key={index}\n                    {...extractedBlock}\n                  />\n                )\n              }\n              if (isFullWidthCarouselBlock(block)) {\n                if (block?.source === 'craft') {\n                  const items = createCarouselItems(block.children)\n                  block.items = items\n                }\n\n                return <FullWidthCarousel key={index} {...block} />\n              }\n              if (isPowertrainBlock(block)) {\n                const options = block.children.map((option: any) => {\n                  const details = option.children.map((detail) => {\n                    return {\n                      name: detail.textBlockHeader,\n                      info: detail.textBlockCopy,\n                    }\n                  })\n\n                  return {\n                    name: option.textBlockHeader,\n                    details,\n                  }\n                })\n\n                const powertrainData = {\n                  heroImage: block?.image,\n                  options,\n                }\n\n                return (\n                  <PowertrainSectionComponent\n                    key=\"powertrain-section\"\n                    {...powertrainData}\n                  />\n                )\n              }\n\n              if (isMoreDetailsBlock(block)) {\n                const buttonText = block.textBlockHeader\n\n                const details = block.children.map((detail) => {\n                  return {\n                    layout: detail.horizontalLayout,\n                    header: detail.textBlock?.[0]?.header,\n                    copy: detail.textBlock?.[0]?.copy,\n                    image: detail.singleMedia?.[0].image?.[0]?.url,\n                  }\n                })\n\n                const moreDetailsData = {\n                  buttonText,\n                  details,\n                }\n\n                return (\n                  <MoreDetailsBlockComponent\n                    key={`more-details ${block.textBlockHeader}`}\n                    {...moreDetailsData}\n                  />\n                )\n              }\n\n              return null\n            })}\n        </BoatSection>\n      ))}\n      {!!specsAndFeaturesData && (\n        <SpecsAndFeaturesSection {...specsAndFeaturesData} />\n      )}\n      {!!powertrainData?.options?.length && (\n        <PowertrainSectionComponent {...powertrainData} />\n      )}\n      {galleryData && !!galleryData.gallery.length && (\n        <MediaGallery {...galleryData} />\n      )}\n      {customizationsData && customizationsData.options.length > 0 && (\n        <CustomizationsSectionComponent {...customizationsData} />\n      )}\n      {orderData && (\n        <OrderSectionComponent\n          onClickCta={setInquiryModalState}\n          {...orderData}\n        />\n      )}\n      <InquiryModal />\n    </Layout>\n  )\n}\n\nexport default BoatTemplate\n\nexport const query = graphql`\n  query BoatPage($craftSlug: String) {\n    craftAPI {\n      entry(slug: [$craftSlug]) {\n        id\n        title\n        ... on CraftAPI_boats_boats_Entry {\n          id\n          headline\n          slug\n          title\n          boatNameLong\n          eyebrow\n          ctaText: textBlockHeader\n          singleMedia {\n            ... on CraftAPI_singleMedia_BlockType {\n              alt\n              autoplayVideo\n              videoURL\n              image {\n                url(width: 2000)\n              }\n            }\n          }\n          boatLogo {\n            ... on CraftAPI_s3_Asset {\n              url\n            }\n          }\n          gallery: multipleMedia {\n            ... on CraftAPI_multipleMedia_BlockType {\n              image {\n                ... on CraftAPI_s3_Asset {\n                  title\n                  thumbnail: url(width: 1000)\n                  full: url(width: 2000)\n                }\n              }\n              videoURL\n            }\n          }\n          boatStats {\n            ... on CraftAPI_boatStats_stat_BlockType {\n              statLabel\n              statText\n              statPercentage\n            }\n          }\n          bespokeOptions {\n            ... on CraftAPI_bespokeOptions_option_BlockType {\n              textBlock {\n                ... on CraftAPI_textBlock_BlockType {\n                  header\n                  copy\n                }\n              }\n              singleMedia {\n                ... on CraftAPI_singleMedia_BlockType {\n                  image {\n                    url(width: 1000)\n                  }\n                  label\n                  title\n                }\n              }\n            }\n          }\n          bespokeBackgroundImage {\n            url\n          }\n          bespokeSectionCustomTitle\n          bespokeSectionCustomSubtitle\n          powertrainOptionsHeader {\n            ... on CraftAPI_s3_Asset {\n              url(width: 2800)\n            }\n          }\n          powertrainOptions {\n            ... on CraftAPI_powertrainOptions_option_BlockType {\n              textBlockHeader\n              children {\n                ... on CraftAPI_powertrainOptions_optionDetail_BlockType {\n                  textBlockCopy\n                  textBlockHeader\n                }\n              }\n            }\n          }\n          powertrainMoreDetails {\n            ... on CraftAPI_powertrainMoreDetails_moreDetails_BlockType {\n              textBlockHeader\n              children {\n                ... on CraftAPI_powertrainMoreDetails_moreDetailsImageCopy_BlockType {\n                  horizontalLayout\n                  singleMedia {\n                    ... on CraftAPI_singleMedia_BlockType {\n                      image {\n                        url(width: 1000)\n                      }\n                    }\n                  }\n                  textBlock {\n                    ... on CraftAPI_textBlock_BlockType {\n                      header\n                      copy\n                    }\n                  }\n                }\n              }\n            }\n          }\n          discoverSection {\n            ... on CraftAPI_discoverSection_discoverSection_BlockType {\n              disableBackground\n              singleMedia {\n                ... on CraftAPI_singleMedia_BlockType {\n                  autoplayVideo\n                  videoURL\n                  image {\n                    ... on CraftAPI_s3_Asset {\n                      id\n                      url(width: 2800)\n                    }\n                  }\n                }\n              }\n              textBlock {\n                ... on CraftAPI_textBlock_BlockType {\n                  header\n                  copy\n                }\n              }\n            }\n          }\n          flexibleSections {\n            ... on CraftAPI_flexibleSections_flexibleSection_BlockType {\n              theme\n              title: textBlockHeader\n              shortTitle\n              bleedDirection: imageBleedDirection\n              headerImage: image {\n                url\n              }\n              blocks: children {\n                typeHandle\n                ... on CraftAPI_flexibleSections_moreDetails_BlockType {\n                  textBlockHeader\n                  children {\n                    ... on CraftAPI_flexibleSections_horizontalImageText_BlockType {\n                      id\n                      horizontalLayout\n                      textBlock {\n                        ... on CraftAPI_textBlock_BlockType {\n                          header\n                          copy\n                        }\n                      }\n                      singleMedia {\n                        ... on CraftAPI_singleMedia_BlockType {\n                          id\n                          videoURL\n                          image {\n                            ... on CraftAPI_s3_Asset {\n                              id\n                              url(width: 2400)\n                            }\n                          }\n                        }\n                      }\n                    }\n                  }\n                }\n                ... on CraftAPI_flexibleSections_powertrainOptions_BlockType {\n                  image {\n                    ... on CraftAPI_s3_Asset {\n                      id\n                      url(width: 2400)\n                    }\n                  }\n                  children {\n                    ... on CraftAPI_flexibleSections_powertrainOption_BlockType {\n                      textBlockHeader\n                      children {\n                        ... on CraftAPI_flexibleSections_powertrainOptionDetails_BlockType {\n                          textBlockCopy\n                          textBlockHeader\n                        }\n                      }\n                    }\n                  }\n                }\n                ... on CraftAPI_flexibleSections_oneColumnTextBlock_BlockType {\n                  align: textAlign\n                  textBlock {\n                    ... on CraftAPI_textBlock_BlockType {\n                      header\n                      copy\n                    }\n                  }\n                }\n                ... on CraftAPI_flexibleSections_oneColumnImageTextBlock_BlockType {\n                  singleMedia {\n                    ... on CraftAPI_singleMedia_BlockType {\n                      alt\n                      label\n                      autoplayVideo\n                      videoURL\n                      image {\n                        ... on CraftAPI_s3_Asset {\n                          url(width: 2400)\n                        }\n                      }\n                    }\n                  }\n                  textBlock {\n                    ... on CraftAPI_textBlock_BlockType {\n                      header\n                      copy\n                    }\n                  }\n                }\n                ... on CraftAPI_flexibleSections_twoColumnImagesBlock_BlockType {\n                  children {\n                    ... on CraftAPI_flexibleSections_image_BlockType {\n                      singleMedia {\n                        ... on CraftAPI_singleMedia_BlockType {\n                          alt\n                          label\n                          autoplayVideo\n                          videoURL\n                          image {\n                            ... on CraftAPI_s3_Asset {\n                              url(width: 1400)\n                            }\n                          }\n                        }\n                      }\n                    }\n                  }\n                }\n                ... on CraftAPI_flexibleSections_twoColumnImageTextBlock_BlockType {\n                  children {\n                    ... on CraftAPI_flexibleSections_oneColumnImageTextBlock_BlockType {\n                      singleMedia {\n                        ... on CraftAPI_singleMedia_BlockType {\n                          alt\n                          label\n                          autoplayVideo\n                          videoURL\n                          image {\n                            ... on CraftAPI_s3_Asset {\n                              url(width: 1400)\n                            }\n                          }\n                        }\n                      }\n                      textBlock {\n                        ... on CraftAPI_textBlock_BlockType {\n                          header\n                          copy\n                        }\n                      }\n                    }\n                  }\n                }\n                ... on CraftAPI_flexibleSections_threeColumnImagesBlock_BlockType {\n                  children {\n                    typeHandle\n                    ... on CraftAPI_flexibleSections_image_BlockType {\n                      singleMedia {\n                        ... on CraftAPI_singleMedia_BlockType {\n                          autoplayVideo\n                          videoURL\n                          label\n                          image {\n                            ... on CraftAPI_s3_Asset {\n                              url(width: 1000)\n                            }\n                          }\n                        }\n                      }\n                    }\n                  }\n                }\n                ... on CraftAPI_flexibleSections_carousel_BlockType {\n                  fullWidth\n                  children {\n                    ... on CraftAPI_flexibleSections_oneColumnImageTextBlock_BlockType {\n                      textBlock {\n                        ... on CraftAPI_textBlock_BlockType {\n                          header\n                          copy\n                        }\n                      }\n                      singleMedia {\n                        ... on CraftAPI_singleMedia_BlockType {\n                          autoplayVideo\n                          videoURL\n                          image {\n                            ... on CraftAPI_s3_Asset {\n                              url\n                            }\n                          }\n                        }\n                      }\n                    }\n                  }\n                }\n                ... on CraftAPI_flexibleSections_sliderBlock_BlockType {\n                  children {\n                    ... on CraftAPI_flexibleSections_oneColumnImageTextBlock_BlockType {\n                      textBlock {\n                        ... on CraftAPI_textBlock_BlockType {\n                          header\n                          copy\n                        }\n                      }\n                      singleMedia {\n                        ... on CraftAPI_singleMedia_BlockType {\n                          autoplayVideo\n                          videoURL\n                          image {\n                            ... on CraftAPI_s3_Asset {\n                              url\n                            }\n                          }\n                        }\n                      }\n                    }\n                  }\n                }\n                ... on CraftAPI_flexibleSections_horizontalImageText_BlockType {\n                  textBlock {\n                    ... on CraftAPI_textBlock_BlockType {\n                      header\n                      copy\n                    }\n                  }\n                  singleMedia {\n                    ... on CraftAPI_singleMedia_BlockType {\n                      autoplayVideo\n                      videoURL\n                      image {\n                        ... on CraftAPI_s3_Asset {\n                          url\n                        }\n                      }\n                    }\n                  }\n                  layout: horizontalLayout\n                }\n              }\n            }\n          }\n          boatSpecs {\n            ... on CraftAPI_boatSpecs_specCategory_BlockType {\n              boatSpecCategory\n              children {\n                ... on CraftAPI_boatSpecs_spec_BlockType {\n                  boatSpecName\n                  children {\n                    ... on CraftAPI_boatSpecs_description_BlockType {\n                      boatSpecDescription\n                    }\n                  }\n                }\n              }\n            }\n          }\n          boatFeatures {\n            ... on CraftAPI_boatFeatures_featureCategory_BlockType {\n              boatFeatureCategory\n              children {\n                ... on CraftAPI_boatFeatures_featureCategory_BlockType {\n                  boatFeatureCategory\n                }\n                ... on CraftAPI_boatFeatures_feature_BlockType {\n                  boatFeatureName\n                  children {\n                    ... on CraftAPI_boatFeatures_description_BlockType {\n                      boatFeatureDescription\n                    }\n                  }\n                }\n                ... on CraftAPI_boatFeatures_description_BlockType {\n                  boatFeatureDescription\n                }\n              }\n            }\n          }\n          boatSpecifications {\n            ... on CraftAPI_boatSpecifications_specificationName_BlockType {\n              specificationLabel\n              children {\n                ... on CraftAPI_boatSpecifications_specificationValue_BlockType {\n                  specificationValueMetric\n                  specificationValueUS\n                }\n              }\n            }\n          }\n          orderSectionTitle\n          orderSectionShortTitle: shortTitle\n          orderSectionBackground {\n            ... on CraftAPI_s3_Asset {\n              url(width: 2800)\n            }\n          }\n        }\n      }\n    }\n  }\n`\n","import {\n  CommonSectionProps,\n  ImageWithText,\n  Media,\n  HorizontalImageTextBlock,\n} from './common'\n\n// ===================================\n// BASE TYPES\n// ===================================\nexport type Stat = {\n  label: string\n  percentage: number\n  text: string\n}\n\n// ===================================\n// SECTIONS\n// ===================================\ntype HeroSection = {\n  type: 'hero'\n  headline: string\n  boatLogo: Media\n  backgroundMedia: Media\n  stats: [Stat, Stat, Stat]\n}\n\nfunction isHeroSection(section?: any): section is HeroSection {\n  return !!section && section.type === 'hero'\n}\n\nexport function findHeroSection(sections: readonly any[]) {\n  return sections.find(isHeroSection) as HeroSection | undefined\n}\n\ntype DiscoverSection = {\n  type: 'discover'\n} & ImageWithText &\n  CommonSectionProps\n\nfunction isDiscoverSection(section: any): section is DiscoverSection {\n  return section.type === 'discover'\n}\n\nexport function findDiscoverSection(sections: readonly any[]) {\n  return sections.find(isDiscoverSection) as DiscoverSection | undefined\n}\n\nexport type GalleryMedia = Media & { thumbnail: string }\n\nexport type GallerySection = {\n  source?: string\n  type: 'gallery'\n  gallery: GalleryMedia[]\n} & CommonSectionProps\n\nfunction isGallerySection(section: any): section is GallerySection {\n  return section.type === 'gallery'\n}\n\nexport function findGallerySection(sections: readonly any[]) {\n  return sections.find(isGallerySection) as GallerySection | undefined\n}\n\nexport type Spec = {\n  name: string\n  descriptions: string[]\n}\n\nexport type SpecCategory = {\n  name: string\n  specs: Spec[]\n} & CommonSectionProps\n\nexport type SpecsSection = {\n  type: 'specs'\n  categories: SpecCategory[]\n} & CommonSectionProps\n\nfunction isSpecsSection(section: any): section is SpecsSection {\n  return section.type === 'specs'\n}\n\nexport function findSpecsSection(sections: readonly any[]) {\n  return sections.find(isSpecsSection) as SpecsSection | undefined\n}\n\nexport type CustomizationsSection = {\n  type: 'customizations'\n  backgroundImage: string\n  subtitle: string\n  options: ImageWithText[]\n} & CommonSectionProps\n\nfunction isCustomizationsSection(\n  section: any\n): section is CustomizationsSection {\n  return section.type === 'customizations'\n}\n\nexport function findCustomizationsSection(sections: readonly any[]) {\n  return sections.find(isCustomizationsSection) as\n    | CustomizationsSection\n    | undefined\n}\n\nexport type OrderSection = {\n  type: 'order'\n  media: Media\n} & CommonSectionProps\n\nfunction isOrderSection(section: any): section is OrderSection {\n  return section.type === 'order'\n}\n\nexport function findOrderSection(sections: readonly any[]) {\n  return sections.find(isOrderSection) as OrderSection | undefined\n}\n\ntype Section =\n  | HeroSection\n  | DiscoverSection\n  | GallerySection\n  | SpecsSection\n  | CustomizationsSection\n  | OrderSection\n\nexport type PowertrainBlock = {\n  type: 'powertrain'\n} & ImageWithText\n\nexport function isPowertrainBlock(block: Block): block is PowertrainBlock {\n  return block.type === 'powertrain'\n}\n\nexport type MoreDetailsBlock = {\n  type: 'more-details'\n  items: HorizontalImageTextBlock[]\n}\n\nexport function isMoreDetailsBlock(block: Block): block is MoreDetailsBlock {\n  return block.type === 'more-details'\n}\n\ntype Block = PowertrainBlock | MoreDetailsBlock\n\n// ===================================\n// PRIMARY TYPES\n// ===================================\nexport type BoatData = {\n  boatName: string\n  boatLongName: string\n  sections: Section[]\n}\n","export const fadeAnimationProps = {\n  initial: {\n    opacity: 0,\n  },\n  animate: {\n    zIndex: 1,\n    opacity: 1,\n  },\n  exit: {\n    zIndex: 0,\n    opacity: 0,\n  },\n  transition: {\n    opacity: { duration: 0.4 },\n  },\n}\n","// Adapted from https://codesandbox.io/s/framer-motion-image-gallery-pqvx3\nimport React, { useState, useEffect } from 'react'\nimport { motion, AnimatePresence } from 'framer-motion'\nimport { wrap } from '@popmotion/popcorn'\nimport { CarouselBlock } from '../types/common'\nimport { AspectRatio } from '../atoms/aspect-ratio'\nimport {\n  CarouselButtons,\n  TextBlockComponent,\n} from '../templates/boat.components'\nimport { determineSwipeAction } from '../services/swiping'\nimport { fadeAnimationProps } from '../services/animations'\nimport { Theme } from '../types/shared'\nimport { cacheImages } from '../services/images'\n\nexport interface CarouselProps extends Omit<CarouselBlock, 'type'> {\n  theme?: Theme\n}\n\nexport const Carousel = ({ items, theme }: CarouselProps) => {\n  if (!items?.length) {\n    return null\n  }\n\n  const [page, setPage] = useState(0)\n  const itemIndex = wrap(0, items?.length, page)\n  const goNext = () => {\n    setPage(page + 1)\n  }\n  const goPrev = () => {\n    setPage(page - 1)\n  }\n\n  useEffect(() => {\n    cacheImages(\n      items?.map((item) => `${item?.media?.image}?q=30&w=1500&fm=jpg`)\n    )\n  }, [])\n\n  return (\n    <div className=\"max-w-7xl mx-auto\" data-block-type=\"Carousel\">\n      <AspectRatio ratio=\"3:2\" className=\"overflow-hidden\">\n        <AnimatePresence initial={false}>\n          <motion.img\n            key={page}\n            src={`${items?.[itemIndex]?.media?.image}?q=30&w=2000&fm=jpg`}\n            {...fadeAnimationProps}\n            drag=\"x\"\n            dragConstraints={{ left: 0, right: 0 }}\n            dragElastic={0}\n            onDragEnd={(e, { offset, velocity }) => {\n              determineSwipeAction({\n                offset: offset.x,\n                velocity: velocity.x,\n                onSwipeLeft: goNext,\n                onSwipeRight: goPrev,\n              })\n            }}\n            className=\"absolute h-full w-full object-cover\"\n          />\n        </AnimatePresence>\n        <CarouselButtons\n          className=\"absolute bottom-0 pb-4 w-full md:hidden z-10\"\n          onClickNext={goNext}\n          onClickPrev={goPrev}\n          theme={theme}\n        />\n      </AspectRatio>\n      <div className=\"md:flex justify-between my-8 mb-20 md:mb-24 px-4 xl:px-0 \">\n        <AnimatePresence initial={false}>\n          <motion.div {...fadeAnimationProps}>\n            <TextBlockComponent\n              key={page}\n              className=\"md:w-7/12\"\n              header={items?.[itemIndex].content.header}\n              copy={items?.[itemIndex].content.copy}\n            />\n          </motion.div>\n        </AnimatePresence>\n        <CarouselButtons\n          className=\"hidden md:flex items-start\"\n          onClickNext={goNext}\n          onClickPrev={goPrev}\n          theme={theme}\n        />\n      </div>\n    </div>\n  )\n}\n","// Adapted from https://codesandbox.io/s/framer-motion-image-gallery-pqvx3\nimport React, { useState, useEffect } from 'react'\nimport { motion, AnimatePresence } from 'framer-motion'\nimport { wrap } from '@popmotion/popcorn'\nimport { SliderBlock } from '../types/common'\nimport { AspectRatio } from '../atoms/aspect-ratio'\nimport {\n  CarouselButtons,\n  TextBlockComponent,\n} from '../templates/boat.components'\nimport { determineSwipeAction } from '../services/swiping'\nimport { fadeAnimationProps } from '../services/animations'\nimport { Theme } from '../types/shared'\nimport { cacheImages } from '../services/images'\n\nenum Direction {\n  Next = 1,\n  Prev = -1,\n}\n\nconst variants = {\n  enter: {\n    opacity: 0,\n  },\n  center: {\n    zIndex: 1,\n    opacity: 1,\n  },\n  exit: {\n    zIndex: 0,\n    opacity: 0,\n  },\n}\n\nconst secondaryVariants = {\n  enter: {\n    opacity: 0,\n    scale: 0.8,\n  },\n  center: {\n    opacity: 0.35,\n    scale: 0.85,\n  },\n  exit: {\n    opacity: 0,\n    scale: 0.8,\n    transition: {\n      duration: 0.1,\n    },\n  },\n}\n\nexport interface SliderProps extends Omit<SliderBlock, 'type'> {\n  theme?: Theme\n}\n\nexport const Slider = ({ items, theme }: SliderProps) => {\n  if (!items?.length) {\n    return null\n  }\n\n  const [[page], setPage] = useState([0, 0])\n  const itemIndex = wrap(0, items?.length, page)\n  const nextItemIndex = wrap(0, items?.length, page + 1)\n  const goNext = () => {\n    setPage([page + 1, Direction.Next])\n  }\n  const goPrev = () => {\n    setPage([page - 1, Direction.Prev])\n  }\n\n  useEffect(() => {\n    cacheImages(\n      items?.map((item) => `${item?.media?.image}?q=30&w=2000&fm=jpg`)\n    )\n  }, [])\n\n  return (\n    <div className=\"max-w-7xl mx-auto\" data-block-type=\"Slider\">\n      <div className=\"md:w-9/12\">\n        <AspectRatio ratio=\"3:2\">\n          <AnimatePresence initial={false}>\n            <motion.img\n              key={page}\n              src={`${items?.[itemIndex]?.media?.image}?q=30&w=2000&fm=jpg`}\n              variants={variants}\n              initial=\"enter\"\n              animate=\"center\"\n              exit=\"exit\"\n              transition={{\n                x: { type: 'spring', stiffness: 300, damping: 200 },\n                opacity: { duration: 0.4 },\n              }}\n              drag=\"x\"\n              dragConstraints={{ left: 0, right: 0 }}\n              dragElastic={1}\n              onDragEnd={(e, { offset, velocity }) => {\n                determineSwipeAction({\n                  offset: offset.x,\n                  velocity: velocity.x,\n                  onSwipeLeft: goNext,\n                  onSwipeRight: goPrev,\n                })\n              }}\n              className=\"absolute h-full w-full object-cover\"\n            />\n            <motion.div\n              key={`secondary${page}`}\n              variants={secondaryVariants}\n              initial=\"enter\"\n              animate=\"center\"\n              exit=\"exit\"\n              transition={{\n                x: { type: 'spring', stiffness: 300, damping: 200 },\n                opacity: { duration: 0.4 },\n              }}\n              className=\"absolute h-full w-full object-cover cursor-pointer\"\n              style={{ left: 'calc(100% + 0px)' }}\n              onClick={goNext}\n            >\n              <img src={items?.[nextItemIndex]?.media?.image} />\n              <div\n                className=\"absolute inset-0\"\n                style={{\n                  background:\n                    theme === 'dark'\n                      ? 'linear-gradient(to right, transparent, black 45%)'\n                      : 'linear-gradient(to right, transparent, white 45%)',\n                }}\n              />\n            </motion.div>\n          </AnimatePresence>\n          <CarouselButtons\n            className=\"absolute bottom-0 pb-4 w-full z-10 md:hidden\"\n            onClickNext={goNext}\n            onClickPrev={goPrev}\n            theme={theme}\n          />\n        </AspectRatio>\n        <div className=\"md:flex justify-between items-start md:mt-10 md:mb-40\">\n          <AnimatePresence initial={false}>\n            <motion.div {...fadeAnimationProps}>\n              <TextBlockComponent\n                key={page}\n                className=\"my-8 md:my-0 px-4 mb-20 md:w-10/12\"\n                header={items?.[itemIndex]?.content?.header}\n                copy={items?.[itemIndex]?.content?.copy}\n              />\n            </motion.div>\n          </AnimatePresence>\n          <CarouselButtons\n            className=\"hidden md:flex\"\n            onClickNext={goNext}\n            onClickPrev={goPrev}\n            theme={theme}\n          />\n        </div>\n      </div>\n    </div>\n  )\n}\n","import { Theme } from './shared'\nimport { Ratio } from '../atoms/aspect-ratio'\n\n// ===================================\n// BASE TYPES\n// ===================================\nexport type TextBlock = {\n  header: string\n  copy: string\n}\n\ntype Treatment = 'desaturate' | 'grayscale'\n\nexport type Media = {\n  image: string\n  label?: string\n  alt?: string\n  videoUrl?: string\n  autoplayVideo?: boolean\n  // Don't worry about for n\n  embedUrl?: string\n  ratio?: Ratio\n  treatments?: Treatment[]\n}\n\nexport type ImageWithText = {\n  media: Media\n  content: TextBlock\n}\n\n// ===================================\n// SECTIONS\n// ===================================\nexport type CommonSectionProps = {\n  title: string\n  shortTitle?: string\n}\n\ntype FlexibleSection = {\n  id?: number\n  type: 'flexible'\n  theme: Theme\n  bleedDirection: 'left' | 'right'\n  headerImage: Media\n  blocks: Block[]\n} & CommonSectionProps\n\nfunction isFlexibleSection(section: any): section is FlexibleSection {\n  return section.type === 'flexible'\n}\n\nexport function getFlexibleSections(sections: readonly any[]) {\n  return sections.filter(isFlexibleSection) as FlexibleSection[]\n}\n\n// ===================================\n// BLOCKS\n// ===================================\nexport type OneColumnTextBlock = {\n  type: 'one-column-text'\n  align?: 'left' | 'center' | 'right'\n} & TextBlock\n\nexport function isOneColumnTextBlock(\n  block: Block\n): block is OneColumnTextBlock {\n  return block.type === 'one-column-text'\n}\n\nexport type FullBleedImageBlock = {\n  type: 'full-bleed-image'\n} & Media\n\nexport function isFullBleedImageBlock(\n  block: Block\n): block is FullBleedImageBlock {\n  return block.type === 'full-bleed-image'\n}\n\nexport type OneColumnImageTextBlock = {\n  type: 'one-column-image-text'\n  align: string\n} & ImageWithText\n\nexport function isOneColumnImageTextBlock(\n  block: Block\n): block is OneColumnImageTextBlock {\n  return block.type === 'one-column-image-text'\n}\n\nexport type TwoColumnImageTextBlock = {\n  type: 'two-column-image-text'\n  leftColumn: ImageWithText\n  rightColumn: ImageWithText\n}\n\nexport function isTwoColumnImageTextBlock(\n  block: Block\n): block is TwoColumnImageTextBlock {\n  return block.type === 'two-column-image-text'\n}\n\nexport type TwoColumnImagesBlock = {\n  type: 'two-column-images'\n  images: [Media, Media]\n}\n\nexport function isTwoColumnImagesBlock(\n  block: Block\n): block is TwoColumnImagesBlock {\n  return block.type === 'two-column-images'\n}\n\nexport type ThreeColumnImagesBlock = {\n  type: 'three-column-images'\n  images: [Media, Media, Media]\n}\n\nexport function isThreeColumnImagesBlock(\n  block: Block\n): block is ThreeColumnImagesBlock {\n  return block.type === 'three-column-images'\n}\n\nexport type SliderBlock = {\n  type: 'slider'\n  items: ImageWithText[]\n}\n\nexport function isSliderBlock(block: Block): block is SliderBlock {\n  return block.type === 'slider'\n}\n\nexport type CarouselBlock = {\n  type: 'carousel'\n  items: ImageWithText[]\n}\n\nexport function isCarouselBlock(block: Block): block is CarouselBlock {\n  return block.type === 'carousel'\n}\n\nexport type FullWidthCarouselBlock = {\n  type: 'full-width-carousel'\n  items: ImageWithText[]\n}\n\nexport function isFullWidthCarouselBlock(\n  block: Block\n): block is FullWidthCarouselBlock {\n  return block.type === 'full-width-carousel'\n}\n\nexport type HorizontalImageTextBlock = {\n  type: 'horizontal-image-text'\n  media: Media\n  content: TextBlock\n  layout: 'imageOnLeft' | 'imageOnRight'\n}\n\nexport function isHorizontalImageTextBlock(\n  block: Block\n): block is HorizontalImageTextBlock {\n  return block.type === 'horizontal-image-text'\n}\n\ntype Block =\n  | OneColumnTextBlock\n  | FullBleedImageBlock\n  | OneColumnImageTextBlock\n  | TwoColumnImageTextBlock\n  | TwoColumnImagesBlock\n  | ThreeColumnImagesBlock\n  | SliderBlock\n  | CarouselBlock\n  | FullWidthCarouselBlock\n  | HorizontalImageTextBlock\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./es/react-hotkeys.production.min.js');\n} else {\n  module.exports = require('./es/index.js');\n}","/**\n * Experimenting with distilling swipe offset and velocity into a single variable, so the\n * less distance a user has swiped, the more velocity they need to register as a swipe.\n * Should accomodate longer swipes and short flicks without having binary checks on\n * just distance thresholds and velocity > 0.\n */\nconst swipeConfidenceThreshold = 10000\nconst swipePower = (offset: number, velocity: number) => {\n  return Math.abs(offset) * velocity\n}\n\n/**\n * Check the offset and velocity of a swipe action and fire the appropriate\n * callback based on a swipe confidence threshold.\n */\nexport const determineSwipeAction = ({\n  offset,\n  velocity,\n  onSwipeLeft,\n  onSwipeRight,\n}: {\n  offset: number\n  velocity: number\n  onSwipeLeft: () => void\n  onSwipeRight: () => void\n}) => {\n  const swipe = swipePower(offset, velocity)\n  if (swipe < -swipeConfidenceThreshold) {\n    onSwipeLeft()\n  } else if (swipe > swipeConfidenceThreshold) {\n    onSwipeRight()\n  }\n}\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4CAYAAACohjseAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyVpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDYuMC1jMDAyIDc5LjE2NDM1MiwgMjAyMC8wMS8zMC0xNTo1MDozOCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDIxLjEgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QzM0MTMyRjlEQ0RCMTFFQTk1ODJCMTkxNzE4MTg2NzQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QzM0MTMyRkFEQ0RCMTFFQTk1ODJCMTkxNzE4MTg2NzQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpDMzQxMzJGN0RDREIxMUVBOTU4MkIxOTE3MTgxODY3NCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpDMzQxMzJGOERDREIxMUVBOTU4MkIxOTE3MTgxODY3NCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PsmWQSoAAAe2SURBVHja1JrP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\"","import { addEventListener } from 'consolidated-events';\nimport React from 'react';\nimport { isForwardRef } from 'react-is';\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n/**\n * Attempts to parse the offset provided as a prop as a percentage. For\n * instance, if the component has been provided with the string \"20%\" as\n * a value of one of the offset props. If the value matches, then it returns\n * a numeric version of the prop. For instance, \"20%\" would become `0.2`.\n * If `str` isn't a percentage, then `undefined` will be returned.\n *\n * @param {string} str The value of an offset prop to be converted to a\n *   number.\n * @return {number|undefined} The numeric version of `str`. Undefined if `str`\n *   was not a percentage.\n */\n\n\nfunction parseOffsetAsPercentage(str) {\n  if (str.slice(-1) === '%') {\n    return parseFloat(str.slice(0, -1)) / 100;\n  }\n\n  return undefined;\n}\n/**\n * Attempts to parse the offset provided as a prop as a pixel value. If\n * parsing fails, then `undefined` is returned. Three examples of values that\n * will be successfully parsed are:\n * `20`\n * \"20px\"\n * \"20\"\n *\n * @param {string|number} str A string of the form \"{number}\" or \"{number}px\",\n *   or just a number.\n * @return {number|undefined} The numeric version of `str`. Undefined if `str`\n *   was neither a number nor string ending in \"px\".\n */\n\n\nfunction parseOffsetAsPixels(str) {\n  if (!isNaN(parseFloat(str)) && isFinite(str)) {\n    return parseFloat(str);\n  }\n\n  if (str.slice(-2) === 'px') {\n    return parseFloat(str.slice(0, -2));\n  }\n\n  return undefined;\n}\n/**\n * @param {string|number} offset\n * @param {number} contextHeight\n * @return {number} A number representing `offset` converted into pixels.\n */\n\n\nfunction computeOffsetPixels(offset, contextHeight) {\n  var pixelOffset = parseOffsetAsPixels(offset);\n\n  if (typeof pixelOffset === 'number') {\n    return pixelOffset;\n  }\n\n  var percentOffset = parseOffsetAsPercentage(offset);\n\n  if (typeof percentOffset === 'number') {\n    return percentOffset * contextHeight;\n  }\n\n  return undefined;\n}\n\nvar ABOVE = 'above';\nvar INSIDE = 'inside';\nvar BELOW = 'below';\nvar INVISIBLE = 'invisible';\n\nfunction debugLog() {\n  if (process.env.NODE_ENV !== 'production') {\n    var _console;\n\n    (_console = console).log.apply(_console, arguments); // eslint-disable-line no-console\n\n  }\n}\n/**\n * When an element's type is a string, it represents a DOM node with that tag name\n * https://facebook.github.io/react/blog/2015/12/18/react-components-elements-and-instances.html#dom-elements\n *\n * @param {React.element} Component\n * @return {bool} Whether the component is a DOM Element\n */\n\n\nfunction isDOMElement(Component) {\n  return typeof Component.type === 'string';\n}\n\nvar errorMessage = '<Waypoint> needs a DOM element to compute boundaries. The child you passed is neither a ' + 'DOM element (e.g. <div>) nor does it use the innerRef prop.\\n\\n' + 'See https://goo.gl/LrBNgw for more info.';\n/**\n * Raise an error if \"children\" is not a DOM Element and there is no ref provided to Waypoint\n *\n * @param {?React.element} children\n * @param {?HTMLElement} ref\n * @return {undefined}\n */\n\nfunction ensureRefIsProvidedByChild(children, ref) {\n  if (children && !isDOMElement(children) && !ref) {\n    throw new Error(errorMessage);\n  }\n}\n/**\n * @param {object} bounds An object with bounds data for the waypoint and\n *   scrollable parent\n * @return {string} The current position of the waypoint in relation to the\n *   visible portion of the scrollable parent. One of the constants `ABOVE`,\n *   `BELOW`, `INSIDE` or `INVISIBLE`.\n */\n\n\nfunction getCurrentPosition(bounds) {\n  if (bounds.viewportBottom - bounds.viewportTop === 0) {\n    return INVISIBLE;\n  } // top is within the viewport\n\n\n  if (bounds.viewportTop <= bounds.waypointTop && bounds.waypointTop <= bounds.viewportBottom) {\n    return INSIDE;\n  } // bottom is within the viewport\n\n\n  if (bounds.viewportTop <= bounds.waypointBottom && bounds.waypointBottom <= bounds.viewportBottom) {\n    return INSIDE;\n  } // top is above the viewport and bottom is below the viewport\n\n\n  if (bounds.waypointTop <= bounds.viewportTop && bounds.viewportBottom <= bounds.waypointBottom) {\n    return INSIDE;\n  }\n\n  if (bounds.viewportBottom < bounds.waypointTop) {\n    return BELOW;\n  }\n\n  if (bounds.waypointTop < bounds.viewportTop) {\n    return ABOVE;\n  }\n\n  return INVISIBLE;\n}\n\nvar timeout;\nvar timeoutQueue = [];\n\nfunction onNextTick(cb) {\n  timeoutQueue.push(cb);\n\n  if (!timeout) {\n    timeout = setTimeout(function () {\n      timeout = null; // Drain the timeoutQueue\n\n      var item; // eslint-disable-next-line no-cond-assign\n\n      while (item = timeoutQueue.shift()) {\n        item();\n      }\n    }, 0);\n  }\n\n  var isSubscribed = true;\n  return function unsubscribe() {\n    if (!isSubscribed) {\n      return;\n    }\n\n    isSubscribed = false;\n    var index = timeoutQueue.indexOf(cb);\n\n    if (index === -1) {\n      return;\n    }\n\n    timeoutQueue.splice(index, 1);\n\n    if (!timeoutQueue.length && timeout) {\n      clearTimeout(timeout);\n      timeout = null;\n    }\n  };\n}\n\nfunction resolveScrollableAncestorProp(scrollableAncestor) {\n  // When Waypoint is rendered on the server, `window` is not available.\n  // To make Waypoint easier to work with, we allow this to be specified in\n  // string form and safely convert to `window` here.\n  if (scrollableAncestor === 'window') {\n    return global.window;\n  }\n\n  return scrollableAncestor;\n}\n\nvar defaultProps = {\n  debug: false,\n  scrollableAncestor: undefined,\n  children: undefined,\n  topOffset: '0px',\n  bottomOffset: '0px',\n  horizontal: false,\n  onEnter: function onEnter() {},\n  onLeave: function onLeave() {},\n  onPositionChange: function onPositionChange() {},\n  fireOnRapidScroll: true\n}; // Calls a function when you scroll to the element.\n\nvar Waypoint = /*#__PURE__*/function (_React$PureComponent) {\n  _inherits(Waypoint, _React$PureComponent);\n\n  var _super = _createSuper(Waypoint);\n\n  function Waypoint(props) {\n    var _this;\n\n    _classCallCheck(this, Waypoint);\n\n    _this = _super.call(this, props);\n\n    _this.refElement = function (e) {\n      _this._ref = e;\n    };\n\n    return _this;\n  }\n\n  _createClass(Waypoint, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      if (!Waypoint.getWindow()) {\n        return;\n      } // this._ref may occasionally not be set at this time. To help ensure that\n      // this works smoothly and to avoid layout thrashing, we want to delay the\n      // initial execution until the next tick.\n\n\n      this.cancelOnNextTick = onNextTick(function () {\n        _this2.cancelOnNextTick = null;\n        var _this2$props = _this2.props,\n            children = _this2$props.children,\n            debug = _this2$props.debug; // Berofe doing anything, we want to check that this._ref is avaliable in Waypoint\n\n        ensureRefIsProvidedByChild(children, _this2._ref);\n        _this2._handleScroll = _this2._handleScroll.bind(_this2);\n        _this2.scrollableAncestor = _this2._findScrollableAncestor();\n\n        if (process.env.NODE_ENV !== 'production' && debug) {\n          debugLog('scrollableAncestor', _this2.scrollableAncestor);\n        }\n\n        _this2.scrollEventListenerUnsubscribe = addEventListener(_this2.scrollableAncestor, 'scroll', _this2._handleScroll, {\n          passive: true\n        });\n        _this2.resizeEventListenerUnsubscribe = addEventListener(window, 'resize', _this2._handleScroll, {\n          passive: true\n        });\n\n        _this2._handleScroll(null);\n      });\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      var _this3 = this;\n\n      if (!Waypoint.getWindow()) {\n        return;\n      }\n\n      if (!this.scrollableAncestor) {\n        // The Waypoint has not yet initialized.\n        return;\n      } // The element may have moved, so we need to recompute its position on the\n      // page. This happens via handleScroll in a way that forces layout to be\n      // computed.\n      //\n      // We want this to be deferred to avoid forcing layout during render, which\n      // causes layout thrashing. And, if we already have this work enqueued, we\n      // can just wait for that to happen instead of enqueueing again.\n\n\n      if (this.cancelOnNextTick) {\n        return;\n      }\n\n      this.cancelOnNextTick = onNextTick(function () {\n        _this3.cancelOnNextTick = null;\n\n        _this3._handleScroll(null);\n      });\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      if (!Waypoint.getWindow()) {\n        return;\n      }\n\n      if (this.scrollEventListenerUnsubscribe) {\n        this.scrollEventListenerUnsubscribe();\n      }\n\n      if (this.resizeEventListenerUnsubscribe) {\n        this.resizeEventListenerUnsubscribe();\n      }\n\n      if (this.cancelOnNextTick) {\n        this.cancelOnNextTick();\n      }\n    }\n    /**\n     * Traverses up the DOM to find an ancestor container which has an overflow\n     * style that allows for scrolling.\n     *\n     * @return {Object} the closest ancestor element with an overflow style that\n     *   allows for scrolling. If none is found, the `window` object is returned\n     *   as a fallback.\n     */\n\n  }, {\n    key: \"_findScrollableAncestor\",\n    value: function _findScrollableAncestor() {\n      var _this$props = this.props,\n          horizontal = _this$props.horizontal,\n          scrollableAncestor = _this$props.scrollableAncestor;\n\n      if (scrollableAncestor) {\n        return resolveScrollableAncestorProp(scrollableAncestor);\n      }\n\n      var node = this._ref;\n\n      while (node.parentNode) {\n        node = node.parentNode;\n\n        if (node === document.body) {\n          // We've reached all the way to the root node.\n          return window;\n        }\n\n        var style = window.getComputedStyle(node);\n        var overflowDirec = horizontal ? style.getPropertyValue('overflow-x') : style.getPropertyValue('overflow-y');\n        var overflow = overflowDirec || style.getPropertyValue('overflow');\n\n        if (overflow === 'auto' || overflow === 'scroll' || overflow === 'overlay') {\n          return node;\n        }\n      } // A scrollable ancestor element was not found, which means that we need to\n      // do stuff on window.\n\n\n      return window;\n    }\n    /**\n     * @param {Object} event the native scroll event coming from the scrollable\n     *   ancestor, or resize event coming from the window. Will be undefined if\n     *   called by a React lifecyle method\n     */\n\n  }, {\n    key: \"_handleScroll\",\n    value: function _handleScroll(event) {\n      if (!this._ref) {\n        // There's a chance we end up here after the component has been unmounted.\n        return;\n      }\n\n      var bounds = this._getBounds();\n\n      var currentPosition = getCurrentPosition(bounds);\n      var previousPosition = this._previousPosition;\n      var _this$props2 = this.props,\n          debug = _this$props2.debug,\n          onPositionChange = _this$props2.onPositionChange,\n          onEnter = _this$props2.onEnter,\n          onLeave = _this$props2.onLeave,\n          fireOnRapidScroll = _this$props2.fireOnRapidScroll;\n\n      if (process.env.NODE_ENV !== 'production' && debug) {\n        debugLog('currentPosition', currentPosition);\n        debugLog('previousPosition', previousPosition);\n      } // Save previous position as early as possible to prevent cycles\n\n\n      this._previousPosition = currentPosition;\n\n      if (previousPosition === currentPosition) {\n        // No change since last trigger\n        return;\n      }\n\n      var callbackArg = {\n        currentPosition: currentPosition,\n        previousPosition: previousPosition,\n        event: event,\n        waypointTop: bounds.waypointTop,\n        waypointBottom: bounds.waypointBottom,\n        viewportTop: bounds.viewportTop,\n        viewportBottom: bounds.viewportBottom\n      };\n      onPositionChange.call(this, callbackArg);\n\n      if (currentPosition === INSIDE) {\n        onEnter.call(this, callbackArg);\n      } else if (previousPosition === INSIDE) {\n        onLeave.call(this, callbackArg);\n      }\n\n      var isRapidScrollDown = previousPosition === BELOW && currentPosition === ABOVE;\n      var isRapidScrollUp = previousPosition === ABOVE && currentPosition === BELOW;\n\n      if (fireOnRapidScroll && (isRapidScrollDown || isRapidScrollUp)) {\n        // If the scroll event isn't fired often enough to occur while the\n        // waypoint was visible, we trigger both callbacks anyway.\n        onEnter.call(this, {\n          currentPosition: INSIDE,\n          previousPosition: previousPosition,\n          event: event,\n          waypointTop: bounds.waypointTop,\n          waypointBottom: bounds.waypointBottom,\n          viewportTop: bounds.viewportTop,\n          viewportBottom: bounds.viewportBottom\n        });\n        onLeave.call(this, {\n          currentPosition: currentPosition,\n          previousPosition: INSIDE,\n          event: event,\n          waypointTop: bounds.waypointTop,\n          waypointBottom: bounds.waypointBottom,\n          viewportTop: bounds.viewportTop,\n          viewportBottom: bounds.viewportBottom\n        });\n      }\n    }\n  }, {\n    key: \"_getBounds\",\n    value: function _getBounds() {\n      var _this$props3 = this.props,\n          horizontal = _this$props3.horizontal,\n          debug = _this$props3.debug;\n\n      var _this$_ref$getBoundin = this._ref.getBoundingClientRect(),\n          left = _this$_ref$getBoundin.left,\n          top = _this$_ref$getBoundin.top,\n          right = _this$_ref$getBoundin.right,\n          bottom = _this$_ref$getBoundin.bottom;\n\n      var waypointTop = horizontal ? left : top;\n      var waypointBottom = horizontal ? right : bottom;\n      var contextHeight;\n      var contextScrollTop;\n\n      if (this.scrollableAncestor === window) {\n        contextHeight = horizontal ? window.innerWidth : window.innerHeight;\n        contextScrollTop = 0;\n      } else {\n        contextHeight = horizontal ? this.scrollableAncestor.offsetWidth : this.scrollableAncestor.offsetHeight;\n        contextScrollTop = horizontal ? this.scrollableAncestor.getBoundingClientRect().left : this.scrollableAncestor.getBoundingClientRect().top;\n      }\n\n      if (process.env.NODE_ENV !== 'production' && debug) {\n        debugLog('waypoint top', waypointTop);\n        debugLog('waypoint bottom', waypointBottom);\n        debugLog('scrollableAncestor height', contextHeight);\n        debugLog('scrollableAncestor scrollTop', contextScrollTop);\n      }\n\n      var _this$props4 = this.props,\n          bottomOffset = _this$props4.bottomOffset,\n          topOffset = _this$props4.topOffset;\n      var topOffsetPx = computeOffsetPixels(topOffset, contextHeight);\n      var bottomOffsetPx = computeOffsetPixels(bottomOffset, contextHeight);\n      var contextBottom = contextScrollTop + contextHeight;\n      return {\n        waypointTop: waypointTop,\n        waypointBottom: waypointBottom,\n        viewportTop: contextScrollTop + topOffsetPx,\n        viewportBottom: contextBottom - bottomOffsetPx\n      };\n    }\n    /**\n     * @return {Object}\n     */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var children = this.props.children;\n\n      if (!children) {\n        // We need an element that we can locate in the DOM to determine where it is\n        // rendered relative to the top of its context.\n        return /*#__PURE__*/React.createElement(\"span\", {\n          ref: this.refElement,\n          style: {\n            fontSize: 0\n          }\n        });\n      }\n\n      if (isDOMElement(children) || isForwardRef(children)) {\n        var ref = function ref(node) {\n          _this4.refElement(node);\n\n          if (children.ref) {\n            if (typeof children.ref === 'function') {\n              children.ref(node);\n            } else {\n              children.ref.current = node;\n            }\n          }\n        };\n\n        return /*#__PURE__*/React.cloneElement(children, {\n          ref: ref\n        });\n      }\n\n      return /*#__PURE__*/React.cloneElement(children, {\n        innerRef: this.refElement\n      });\n    }\n  }]);\n\n  return Waypoint;\n}(React.PureComponent);\n\nif (process.env.NODE_ENV !== 'production') {}\n\nWaypoint.above = ABOVE;\nWaypoint.below = BELOW;\nWaypoint.inside = INSIDE;\nWaypoint.invisible = INVISIBLE;\n\nWaypoint.getWindow = function () {\n  if (typeof window !== 'undefined') {\n    return window;\n  }\n\n  return undefined;\n};\n\nWaypoint.defaultProps = defaultProps;\nWaypoint.displayName = 'Waypoint';\nexport { Waypoint };"],"sourceRoot":""}