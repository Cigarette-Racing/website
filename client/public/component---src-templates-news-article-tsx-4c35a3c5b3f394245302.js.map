{"version":3,"sources":["webpack:///./src/templates/news-article.tsx","webpack:///./src/molecules/full-width-carousel.tsx","webpack:///./src/atoms/progress-dots.tsx","webpack:///./src/services/animations.ts","webpack:///./src/molecules/carousel.tsx","webpack:///./src/services/text-formatter.tsx","webpack:///./src/molecules/slider.tsx","webpack:///./src/types/common.ts","webpack:///./src/services/swiping.ts"],"names":["NewsArticleTemplate","props","data","craftAPI","articleEntry","entry","allArticles","entries","relatedArticles","filter","article","id","flexData","flexibleSections","getFlexibleSections","extractFlexibleSectionsFromCraft","date","Date","dateCreated","isMobile","useMedia","className","theme","title","slug","path","articleCategories","align","categories","variant","md","urlLink","href","src","externalLinkIcon","url","alt","siteName","length","map","i","bleedDirection","headerImage","blocks","key","getMonth","getDate","getFullYear","media","side","size","subheadline","FormatTextBlob","articleCopy","block","index","isTwoColumnImageTextBlock","isOneColumnTextBlock","textBlock","copy","header","undefined","isOneColumnImageTextBlock","content","image","singleMedia","videoURL","autoplayVideo","isCarouselBlock","source","items","createCarouselItems","children","isSliderBlock","isThreeColumnImagesBlock","images","isTwoColumnImagesBlock","isHorizontalImageTextBlock","extractedBlock","type","layout","publicURL","isFullWidthCarouselBlock","style","width","slice","entryType","hierarchy","animations","initial","opacity","animate","zIndex","exit","transition","duration","FullWidthCarousel","blockPosition","useState","page","setPage","itemIndex","wrap","goToItem","oneBasedIndex","useEffect","cacheImages","item","clsx","data-component","ratio","div","drag","dragConstraints","left","right","dragElastic","onDragEnd","e","offset","velocity","determineSwipeAction","x","onSwipeLeft","onSwipeRight","videoUrl","videoOptions","controls","background","current","total","onClick","onClickNext","onClickPrev","ProgressDots","array","useMemo","Array","from","_","isCurrent","disabled","fadeAnimationProps","Carousel","goNext","goPrev","data-block-type","img","text","split","Boolean","p","Direction","variants","enter","center","secondaryVariants","scale","Slider","nextItemIndex","Next","Prev","stiffness","damping","isFlexibleSection","section","sections","swipe","Math","abs","swipePower"],"mappings":"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","file":"component---src-templates-news-article-tsx-4c35a3c5b3f394245302.js","sourcesContent":["import React from 'react'\nimport { useMedia } from 'react-use'\nimport { PageProps, graphql } from 'gatsby'\nimport { Layout } from '../components/layout'\nimport SEO from '../components/seo'\nimport { Typography } from '../atoms/typography'\nimport FormatTextBlob from '../services/text-formatter'\nimport { ExternalLinkIcon } from '../svgs/icons'\nimport { ContentEntry } from '../templates/common.components'\nimport {\n  Categories,\n  createCarouselItems,\n  extractFlexibleSectionsFromCraft,\n  GenericSection,\n  HorizontalImageTextBlockComponent,\n  OneColumnImageTextBlockComponent,\n  OneColumnTextBlockComponent,\n  SideBleedImage,\n  ThreeUpImageBlock,\n  TwoColumnImageTextBlockComponent,\n  TwoUpImageBlock,\n} from './common.components'\nimport {\n  getFlexibleSections,\n  HorizontalImageTextBlock,\n  isCarouselBlock,\n  isFullWidthCarouselBlock,\n  isHorizontalImageTextBlock,\n  isOneColumnImageTextBlock,\n  isOneColumnTextBlock,\n  isSliderBlock,\n  isThreeColumnImagesBlock,\n  isTwoColumnImagesBlock,\n  isTwoColumnImageTextBlock,\n} from '../types/common'\nimport { Carousel } from '../molecules/carousel'\nimport { FullWidthCarousel } from '../molecules/full-width-carousel'\nimport { Slider } from '../molecules/slider'\n\nconst NewsArticleTemplate = (\n  props: PageProps<GatsbyTypes.NewsArticlePageQuery>\n) => {\n  const {\n    data: {\n      craftAPI: { entry: articleEntry, entries: allArticles },\n    },\n  } = props\n\n  const relatedArticles = allArticles?.filter((article) => {\n    return article.id != articleEntry.id\n  })\n\n  const getFlexData = () => {\n    let flexData\n\n    if (articleEntry?.flexibleSections) {\n      flexData = getFlexibleSections(\n        extractFlexibleSectionsFromCraft(articleEntry)\n      )\n    } else {\n      flexData = null\n    }\n\n    return flexData\n  }\n\n  const flexData = getFlexData()\n\n  const date = new Date(articleEntry.dateCreated)\n\n  const isMobile = useMedia('(max-width: 767px)')\n\n  return (\n    <Layout>\n      <GenericSection\n        className=\"py-12 pb-8 pt-32 md:pt-56 news-article.tsx\"\n        theme=\"light\"\n      >\n        <div className=\"px-4 max-w-screen-xl xl:max-w-screen-2xl m-auto\">\n          <SEO title={articleEntry.title} slug={props.path} />\n          <div className=\"md:flex align-top justify-start content-start pb-10 md:pb-20\">\n            {!!articleEntry.articleCategories && (\n              <Categories\n                className=\"-ml-2 mb-3 md:mr-16 mt-4\"\n                align=\"left\"\n                categories={articleEntry.articleCategories}\n              />\n            )}\n            <div>\n              <Typography className=\"mb-8 max-w-screen-lg\" variant=\"h3\" md=\"h1\">\n                {articleEntry.title}\n              </Typography>\n              {!!articleEntry?.urlLink && (\n                <a\n                  href={articleEntry?.urlLink}\n                  className=\"flex align-middle items-center\"\n                >\n                  <img\n                    className=\"w-10 h-10 mr-4\"\n                    src={articleEntry.externalLinkIcon[0].url}\n                    alt=\"\"\n                  />\n                  <Typography variant=\"p2\" className=\"text-gray-3\">\n                    {articleEntry?.siteName}\n                  </Typography>\n                  <ExternalLinkIcon className=\"mr-2 ml-4\" />\n                </a>\n              )}\n            </div>\n          </div>\n          <div className=\"border-t border-solid border-gray-5\"></div>\n        </div>\n      </GenericSection>\n      {flexData.length > 0 &&\n        flexData.map(\n          ({ title, theme, bleedDirection, headerImage, blocks, id }, i) => (\n            <GenericSection key={id} theme=\"light\">\n              <div className=\"relative px-4 max-w-screen-xl xl:max-w-screen-2xl m-auto\">\n                <Typography\n                  variant=\"e3\"\n                  className=\"date text-gray-3 mb-4 md:absolute top-0 left-0 md:px-4\"\n                >\n                  {`${\n                    date.getMonth() + 1\n                  }.${date.getDate()}.${date.getFullYear()}`}\n                </Typography>\n              </div>\n              <SideBleedImage\n                media={headerImage}\n                side={bleedDirection}\n                className=\"mt-0 px-4 md:px-0 mb-16 md:m-0 md:mb-32 pt-0\"\n                size=\"large\"\n              />\n              <div className=\"w-full md:w-11/12 lg:w-10/12 xl:w-9/12 ml-auto\">\n                <div className=\"px-4 md:px-0 md:w-8/12\">\n                  <Typography variant=\"e2\" className=\"mb-4\">\n                    {articleEntry.subheadline}\n                  </Typography>\n                </div>\n                <div className=\"px-4 md:px-0 md:w-8/12 mb-16\">\n                  {FormatTextBlob(articleEntry.articleCopy)}\n                </div>\n              </div>\n              {!!blocks &&\n                blocks.map((block, index) => {\n                  if (isTwoColumnImageTextBlock(block)) {\n                    return (\n                      <TwoColumnImageTextBlockComponent\n                        key={block.id}\n                        {...block}\n                      />\n                    )\n                  }\n                  if (isOneColumnTextBlock(block)) {\n                    if (block.textBlock) {\n                      block.copy = block.textBlock[0].copy\n                      block.header = block.textBlock[0].header\n                    }\n\n                    return (\n                      <OneColumnTextBlockComponent\n                        key={index}\n                        {...block}\n                        align={block.align ?? undefined}\n                      />\n                    )\n                  }\n                  if (isOneColumnImageTextBlock(block)) {\n                    if (block.textBlock) {\n                      block.content = {\n                        copy: block.textBlock[0].copy,\n                        header: block.textBlock[0].header,\n                      }\n                      block.media = {\n                        image: block.singleMedia?.[0].image?.[0]?.url,\n                        videoURL: block.singleMedia?.[0].videoURL,\n                        autoplayVideo: block.singleMedia?.[0].autoplayVideo,\n                      }\n                    }\n\n                    return (\n                      <OneColumnImageTextBlockComponent\n                        key={index}\n                        {...block}\n                      />\n                    )\n                  }\n                  if (isCarouselBlock(block)) {\n                    if (block?.source === 'craft') {\n                      const items = createCarouselItems(block.children)\n                      block.items = items\n                    }\n\n                    return <Carousel key={index} {...block} />\n                  }\n                  if (isSliderBlock(block)) {\n                    if (block?.source === 'craft') {\n                      const items = createCarouselItems(block.children)\n                      block.items = items\n                    }\n\n                    return <Slider key={index} {...block} />\n                  }\n                  if (isThreeColumnImagesBlock(block)) {\n                    return (\n                      <ThreeUpImageBlock\n                        key={block.id}\n                        className=\"mb-32\"\n                        images={block.children}\n                      />\n                    )\n                  }\n                  if (isTwoColumnImagesBlock(block)) {\n                    return (\n                      <TwoUpImageBlock\n                        key={block.id}\n                        className=\"mb-32\"\n                        images={block.images || block.children}\n                      />\n                    )\n                  }\n                  if (isHorizontalImageTextBlock(block)) {\n                    const extractedBlock: HorizontalImageTextBlock = {\n                      type: 'horizontal-image-text',\n                      layout: block.layout,\n                      content: {\n                        header: block.textBlock[0].header as string,\n                        copy: block.textBlock[0].copy as string,\n                      },\n                      media: {\n                        image: {\n                          publicURL: block.singleMedia[0].image[0]\n                            ?.url as string,\n                        },\n                      },\n                    }\n                    return (\n                      <HorizontalImageTextBlockComponent\n                        key={block.id}\n                        {...extractedBlock}\n                      />\n                    )\n                  }\n                  if (isFullWidthCarouselBlock(block)) {\n                    if (block?.source === 'craft') {\n                      const items = createCarouselItems(block.children)\n                      block.items = items\n                    }\n\n                    return <FullWidthCarousel key={index} {...block} />\n                  }\n                  return null\n                })}\n              {!!relatedArticles.length && (\n                <div>\n                  <Typography className=\"px-4 mt-20 mb-5\" variant=\"h3\" md=\"h2\">\n                    More Stories\n                  </Typography>\n                  <div className=\"overflow-scroll\">\n                    <div\n                      className=\"relatedArticles grid grid-cols-3 gap-6 px-4\"\n                      style={{ width: `${isMobile ? '270vw' : 'auto'} ` }}\n                    >\n                      {relatedArticles.slice(0, 3).map((article) => {\n                        return (\n                          <ContentEntry\n                            entryType=\"news\"\n                            key={article.id}\n                            entry={article}\n                            hierarchy=\"tertiary\"\n                            theme=\"light\"\n                          />\n                        )\n                      })}\n                    </div>\n                  </div>\n                </div>\n              )}\n            </GenericSection>\n          )\n        )}\n    </Layout>\n  )\n}\n\nexport default NewsArticleTemplate\n\nexport const query = graphql`\n  query NewsArticlePage($craftSlug: String) {\n    craftAPI {\n      categories(group: \"articleCategories\") {\n        id\n        title\n      }\n      entry(slug: [$craftSlug], type: \"newsArticle\") {\n        id\n        ... on CraftAPI_newsArticles_newsArticle_Entry {\n          id\n          dateCreated\n          title\n          urlLink\n          siteName\n          externalLinkIcon {\n            url\n          }\n          subheadline\n          articleCopy\n          headerImage: image {\n            url\n          }\n          articleExcerpt\n          articleCategories {\n            title\n          }\n          flexibleSections {\n            ... on CraftAPI_flexibleSections_flexibleSection_BlockType {\n              id\n              theme\n              title: textBlockHeader\n              shortTitle\n              bleedDirection: imageBleedDirection\n              headerImage: image {\n                url\n              }\n              blocks: children {\n                typeHandle\n                ... on CraftAPI_flexibleSections_moreDetails_BlockType {\n                  textBlockHeader\n                  children {\n                    ... on CraftAPI_flexibleSections_horizontalImageText_BlockType {\n                      id\n                      horizontalLayout\n                      textBlock {\n                        ... on CraftAPI_textBlock_BlockType {\n                          header\n                          copy\n                        }\n                      }\n                      singleMedia {\n                        ... on CraftAPI_singleMedia_BlockType {\n                          id\n                          videoURL\n                          image {\n                            ... on CraftAPI_s3_Asset {\n                              id\n                              url(width: 2400)\n                            }\n                          }\n                        }\n                      }\n                    }\n                  }\n                }\n                ... on CraftAPI_flexibleSections_powertrainOptions_BlockType {\n                  image {\n                    ... on CraftAPI_s3_Asset {\n                      id\n                      url(width: 2400)\n                    }\n                  }\n                  children {\n                    ... on CraftAPI_flexibleSections_powertrainOption_BlockType {\n                      textBlockHeader\n                      children {\n                        ... on CraftAPI_flexibleSections_powertrainOptionDetails_BlockType {\n                          textBlockCopy\n                          textBlockHeader\n                        }\n                      }\n                    }\n                  }\n                }\n                ... on CraftAPI_flexibleSections_oneColumnTextBlock_BlockType {\n                  align: textAlign\n                  textBlock {\n                    ... on CraftAPI_textBlock_BlockType {\n                      header\n                      copy\n                    }\n                  }\n                }\n                ... on CraftAPI_flexibleSections_oneColumnImageTextBlock_BlockType {\n                  singleMedia {\n                    ... on CraftAPI_singleMedia_BlockType {\n                      alt\n                      label\n                      autoplayVideo\n                      videoURL\n                      image {\n                        ... on CraftAPI_s3_Asset {\n                          url(width: 2400)\n                        }\n                      }\n                    }\n                  }\n                  textBlock {\n                    ... on CraftAPI_textBlock_BlockType {\n                      header\n                      copy\n                    }\n                  }\n                }\n                ... on CraftAPI_flexibleSections_twoColumnImagesBlock_BlockType {\n                  children {\n                    ... on CraftAPI_flexibleSections_image_BlockType {\n                      singleMedia {\n                        ... on CraftAPI_singleMedia_BlockType {\n                          alt\n                          label\n                          autoplayVideo\n                          videoURL\n                          image {\n                            ... on CraftAPI_s3_Asset {\n                              url(width: 1400)\n                            }\n                          }\n                        }\n                      }\n                    }\n                  }\n                }\n                ... on CraftAPI_flexibleSections_twoColumnImageTextBlock_BlockType {\n                  children {\n                    ... on CraftAPI_flexibleSections_oneColumnImageTextBlock_BlockType {\n                      singleMedia {\n                        ... on CraftAPI_singleMedia_BlockType {\n                          alt\n                          label\n                          autoplayVideo\n                          videoURL\n                          image {\n                            ... on CraftAPI_s3_Asset {\n                              url(width: 1400)\n                            }\n                          }\n                        }\n                      }\n                      textBlock {\n                        ... on CraftAPI_textBlock_BlockType {\n                          header\n                          copy\n                        }\n                      }\n                    }\n                  }\n                }\n                ... on CraftAPI_flexibleSections_threeColumnImagesBlock_BlockType {\n                  children {\n                    typeHandle\n                    ... on CraftAPI_flexibleSections_image_BlockType {\n                      singleMedia {\n                        ... on CraftAPI_singleMedia_BlockType {\n                          autoplayVideo\n                          videoURL\n                          label\n                          image {\n                            ... on CraftAPI_s3_Asset {\n                              url(width: 1000)\n                            }\n                          }\n                        }\n                      }\n                    }\n                  }\n                }\n                ... on CraftAPI_flexibleSections_carousel_BlockType {\n                  fullWidth\n                  children {\n                    ... on CraftAPI_flexibleSections_oneColumnImageTextBlock_BlockType {\n                      textBlock {\n                        ... on CraftAPI_textBlock_BlockType {\n                          header\n                          copy\n                        }\n                      }\n                      singleMedia {\n                        ... on CraftAPI_singleMedia_BlockType {\n                          autoplayVideo\n                          videoURL\n                          image {\n                            ... on CraftAPI_s3_Asset {\n                              url\n                            }\n                          }\n                        }\n                      }\n                    }\n                  }\n                }\n                ... on CraftAPI_flexibleSections_sliderBlock_BlockType {\n                  children {\n                    ... on CraftAPI_flexibleSections_oneColumnImageTextBlock_BlockType {\n                      textBlock {\n                        ... on CraftAPI_textBlock_BlockType {\n                          header\n                          copy\n                        }\n                      }\n                      singleMedia {\n                        ... on CraftAPI_singleMedia_BlockType {\n                          autoplayVideo\n                          videoURL\n                          image {\n                            ... on CraftAPI_s3_Asset {\n                              url\n                            }\n                          }\n                        }\n                      }\n                    }\n                  }\n                }\n                ... on CraftAPI_flexibleSections_horizontalImageText_BlockType {\n                  textBlock {\n                    ... on CraftAPI_textBlock_BlockType {\n                      header\n                      copy\n                    }\n                  }\n                  singleMedia {\n                    ... on CraftAPI_singleMedia_BlockType {\n                      autoplayVideo\n                      videoURL\n                      image {\n                        ... on CraftAPI_s3_Asset {\n                          url\n                        }\n                      }\n                    }\n                  }\n                  layout: horizontalLayout\n                }\n              }\n            }\n          }\n        }\n      }\n      entries(type: \"newsArticle\") {\n        ... on CraftAPI_newsArticles_newsArticle_Entry {\n          dateCreated\n          slug\n          id\n          urlLink\n          articleExcerpt\n          title\n          externalLinkIcon {\n            url\n          }\n          image {\n            url\n          }\n          articleCategories {\n            id\n            title\n          }\n          articleTags {\n            id\n            title\n          }\n        }\n      }\n    }\n  }\n`\n","import React, { useState, Fragment, useEffect } from 'react'\nimport { motion, AnimatePresence } from 'framer-motion'\nimport { wrap } from '@popmotion/popcorn'\nimport { FullWidthCarouselBlock } from '../types/common'\nimport { AspectRatio } from '../atoms/aspect-ratio'\nimport { ProgressDots } from '../atoms/progress-dots'\nimport { determineSwipeAction } from '../services/swiping'\nimport { AutoplayVideo } from '../atoms/autoplay-video'\nimport clsx from 'clsx'\nimport { CarouselButtons } from '../templates/boat.components'\nimport { cacheImages } from '../services/images'\n\nconst animations = {\n  initial: {\n    opacity: 0,\n  },\n  animate: {\n    zIndex: 1,\n    opacity: 1,\n  },\n  exit: {\n    zIndex: 0,\n    opacity: 0.5,\n  },\n  transition: {\n    opacity: { duration: 0.6 },\n  },\n}\nexport interface FullWidthCarouselProps\n  extends Omit<FullWidthCarouselBlock, 'type'> {\n  blockPosition?: 'first' | 'middle' | 'last'\n}\n\nexport const FullWidthCarousel = ({\n  items,\n  blockPosition,\n}: FullWidthCarouselProps) => {\n  const [page, setPage] = useState(0)\n  const itemIndex = wrap(0, items.length, page)\n  const goToItem = (oneBasedIndex: number) => {\n    setPage(oneBasedIndex - 1)\n  }\n  const media = items[itemIndex].media\n\n  useEffect(() => {\n    cacheImages(items.map((item) => `${item?.media?.image}?q=30&w=1500`))\n  }, [])\n\n  return (\n    <div\n      className={clsx('relative mx-auto', {\n        'md:-mt-32 first': blockPosition === 'first',\n        'mb-32 lg:mb-48 middle': blockPosition === 'middle',\n        '-mb-12 last': blockPosition === 'last',\n      })}\n      data-component=\"FullWidthCarousel\"\n    >\n      <AspectRatio ratio=\"2:1\">\n        <AnimatePresence>\n          <motion.div\n            key={page}\n            {...animations}\n            drag=\"x\"\n            dragConstraints={{ left: 0, right: 0 }}\n            dragElastic={0}\n            onDragEnd={(e, { offset, velocity }) => {\n              determineSwipeAction({\n                offset: offset.x,\n                velocity: velocity.x,\n                onSwipeLeft: () => goToItem(page + 2),\n                onSwipeRight: () => goToItem(page),\n              })\n            }}\n            className=\"absolute h-full w-full object-cover\"\n          >\n            {!!media?.videoUrl ? (\n              <AutoplayVideo\n                alt={media.alt}\n                image={media.image}\n                videoUrl={media.videoUrl}\n                videoOptions={{ controls: false }}\n              />\n            ) : (\n              <img\n                src={`${media?.image}?q=30&w=2000`}\n                className=\"pointer-events-none h-full w-full object-cover\"\n              />\n            )}\n          </motion.div>\n        </AnimatePresence>\n      </AspectRatio>\n      {items.length > 1 && (\n        <Fragment>\n          <div\n            className=\"absolute inset-0 z-10 pointer-events-none\"\n            style={{\n              background:\n                'linear-gradient(0deg, rgba(0, 0, 0, 0.7) 0%, rgba(0, 0, 0, 0) 47.5%)',\n            }}\n          />\n          <div className=\"absolute pb-4 bottom-0 left-1/2 transform -translate-x-1/2 z-10\">\n            <ProgressDots\n              current={itemIndex + 1}\n              total={items.length}\n              variant=\"horizontal\"\n              onClick={goToItem}\n            />\n          </div>\n          <CarouselButtons\n            className=\"hidden absolute bottom-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-10 md:flex justify-between w-full px-4\"\n            onClickNext={() => {\n              goToItem(page + 2)\n            }}\n            onClickPrev={() => {\n              goToItem(page)\n            }}\n          />\n        </Fragment>\n      )}\n    </div>\n  )\n}\n","import React, { useMemo } from 'react'\nimport clsx from 'clsx'\n\nexport interface ProgressDotsProps {\n  /** Progress indicator to mark as active (one-based) */\n  current: number\n  /** Total number of progress indicators to show */\n  total: number\n  /** Direction in which to display the dots */\n  variant: 'horizontal' | 'vertical'\n  /** Callback fired when a dot is clicked. Value is the one-based index of the dot. */\n  onClick?(index: number): void\n}\n\nexport const ProgressDots = ({\n  current,\n  total,\n  variant,\n  onClick,\n}: ProgressDotsProps) => {\n  const array = useMemo(() => Array.from({ length: total }), [total])\n  return (\n    <div\n      className={clsx('flex', {\n        'flex-row space-x-2': variant === 'horizontal',\n        'flex-col space-y-2': variant === 'vertical',\n      })}\n    >\n      {array.map((_, index) => {\n        const oneBasedIndex = index + 1\n        const isCurrent = oneBasedIndex === current\n        return (\n          <button\n            key={index}\n            className={clsx(\n              'w-6 h-6 border rounded-full border-transparent flex justify-center items-center cursor-default',\n              {\n                'border-red': isCurrent,\n                'cursor-pointer pointer-events-auto': !!onClick,\n              }\n            )}\n            onClick={!!onClick ? () => onClick(oneBasedIndex) : undefined}\n            disabled={!onClick}\n          >\n            <div className=\"w-1 h-1 bg-white rounded-full\">\n              <span className=\"sr-only\">\n                {oneBasedIndex} of {total}\n              </span>\n            </div>\n          </button>\n        )\n      })}\n    </div>\n  )\n}\n","export const fadeAnimationProps = {\n  initial: {\n    opacity: 0,\n  },\n  animate: {\n    zIndex: 1,\n    opacity: 1,\n  },\n  exit: {\n    zIndex: 0,\n    opacity: 0,\n  },\n  transition: {\n    opacity: { duration: 0.4 },\n  },\n}\n","// Adapted from https://codesandbox.io/s/framer-motion-image-gallery-pqvx3\nimport React, { useState, useEffect } from 'react'\nimport { motion, AnimatePresence } from 'framer-motion'\nimport { wrap } from '@popmotion/popcorn'\nimport { CarouselBlock } from '../types/common'\nimport { AspectRatio } from '../atoms/aspect-ratio'\nimport {\n  CarouselButtons,\n  TextBlockComponent,\n} from '../templates/boat.components'\nimport { determineSwipeAction } from '../services/swiping'\nimport { fadeAnimationProps } from '../services/animations'\nimport { Theme } from '../types/shared'\nimport { cacheImages } from '../services/images'\n\nexport interface CarouselProps extends Omit<CarouselBlock, 'type'> {\n  theme?: Theme\n}\n\nexport const Carousel = ({ items, theme }: CarouselProps) => {\n  if (!items?.length) {\n    return null\n  }\n\n  const [page, setPage] = useState(0)\n  const itemIndex = wrap(0, items?.length, page)\n  const goNext = () => {\n    setPage(page + 1)\n  }\n  const goPrev = () => {\n    setPage(page - 1)\n  }\n\n  useEffect(() => {\n    cacheImages(\n      items?.map((item) => `${item?.media?.image}?q=30&w=1500&fm=jpg`)\n    )\n  }, [])\n\n  return (\n    <div className=\"max-w-7xl mx-auto\" data-block-type=\"Carousel\">\n      <AspectRatio ratio=\"3:2\" className=\"overflow-hidden\">\n        <AnimatePresence initial={false}>\n          <motion.img\n            key={page}\n            src={`${items?.[itemIndex]?.media?.image}?q=30&w=2000&fm=jpg`}\n            {...fadeAnimationProps}\n            drag=\"x\"\n            dragConstraints={{ left: 0, right: 0 }}\n            dragElastic={0}\n            onDragEnd={(e, { offset, velocity }) => {\n              determineSwipeAction({\n                offset: offset.x,\n                velocity: velocity.x,\n                onSwipeLeft: goNext,\n                onSwipeRight: goPrev,\n              })\n            }}\n            className=\"absolute h-full w-full object-cover\"\n          />\n        </AnimatePresence>\n        <CarouselButtons\n          className=\"absolute bottom-0 pb-4 w-full md:hidden z-10\"\n          onClickNext={goNext}\n          onClickPrev={goPrev}\n          theme={theme}\n        />\n      </AspectRatio>\n      <div className=\"md:flex justify-between my-8 mb-20 md:mb-24 px-4 xl:px-0 \">\n        <AnimatePresence initial={false}>\n          <motion.div {...fadeAnimationProps}>\n            <TextBlockComponent\n              key={page}\n              className=\"md:w-7/12\"\n              header={items?.[itemIndex].content.header}\n              copy={items?.[itemIndex].content.copy}\n            />\n          </motion.div>\n        </AnimatePresence>\n        <CarouselButtons\n          className=\"hidden md:flex items-start\"\n          onClickNext={goNext}\n          onClickPrev={goPrev}\n          theme={theme}\n        />\n      </div>\n    </div>\n  )\n}\n","import React from 'react'\nimport { Typography } from '../atoms/typography'\n\nconst FormatTextBlob = (text: string) => {\n  return text\n    ?.split('\\n')\n    ?.filter(Boolean)\n    .map((p) => {\n      return (\n        <Typography className=\"mb-4 last:mb-0\" key={p} variant=\"p2\">\n          {p}\n        </Typography>\n      )\n    })\n}\n\nexport default FormatTextBlob\n","// Adapted from https://codesandbox.io/s/framer-motion-image-gallery-pqvx3\nimport React, { useState, useEffect } from 'react'\nimport { motion, AnimatePresence } from 'framer-motion'\nimport { wrap } from '@popmotion/popcorn'\nimport { SliderBlock } from '../types/common'\nimport { AspectRatio } from '../atoms/aspect-ratio'\nimport {\n  CarouselButtons,\n  TextBlockComponent,\n} from '../templates/boat.components'\nimport { determineSwipeAction } from '../services/swiping'\nimport { fadeAnimationProps } from '../services/animations'\nimport { Theme } from '../types/shared'\nimport { cacheImages } from '../services/images'\n\nenum Direction {\n  Next = 1,\n  Prev = -1,\n}\n\nconst variants = {\n  enter: {\n    opacity: 0,\n  },\n  center: {\n    zIndex: 1,\n    opacity: 1,\n  },\n  exit: {\n    zIndex: 0,\n    opacity: 0,\n  },\n}\n\nconst secondaryVariants = {\n  enter: {\n    opacity: 0,\n    scale: 0.8,\n  },\n  center: {\n    opacity: 0.35,\n    scale: 0.85,\n  },\n  exit: {\n    opacity: 0,\n    scale: 0.8,\n    transition: {\n      duration: 0.1,\n    },\n  },\n}\n\nexport interface SliderProps extends Omit<SliderBlock, 'type'> {\n  theme?: Theme\n}\n\nexport const Slider = ({ items, theme }: SliderProps) => {\n  if (!items?.length) {\n    return null\n  }\n\n  const [[page], setPage] = useState([0, 0])\n  const itemIndex = wrap(0, items?.length, page)\n  const nextItemIndex = wrap(0, items?.length, page + 1)\n  const goNext = () => {\n    setPage([page + 1, Direction.Next])\n  }\n  const goPrev = () => {\n    setPage([page - 1, Direction.Prev])\n  }\n\n  useEffect(() => {\n    cacheImages(\n      items?.map((item) => `${item?.media?.image}?q=30&w=2000&fm=jpg`)\n    )\n  }, [])\n\n  return (\n    <div className=\"max-w-7xl mx-auto\" data-block-type=\"Slider\">\n      <div className=\"md:w-9/12\">\n        <AspectRatio ratio=\"3:2\">\n          <AnimatePresence initial={false}>\n            <motion.img\n              key={page}\n              src={`${items?.[itemIndex]?.media?.image}?q=30&w=2000&fm=jpg`}\n              variants={variants}\n              initial=\"enter\"\n              animate=\"center\"\n              exit=\"exit\"\n              transition={{\n                x: { type: 'spring', stiffness: 300, damping: 200 },\n                opacity: { duration: 0.4 },\n              }}\n              drag=\"x\"\n              dragConstraints={{ left: 0, right: 0 }}\n              dragElastic={1}\n              onDragEnd={(e, { offset, velocity }) => {\n                determineSwipeAction({\n                  offset: offset.x,\n                  velocity: velocity.x,\n                  onSwipeLeft: goNext,\n                  onSwipeRight: goPrev,\n                })\n              }}\n              className=\"absolute h-full w-full object-cover\"\n            />\n            <motion.div\n              key={`secondary${page}`}\n              variants={secondaryVariants}\n              initial=\"enter\"\n              animate=\"center\"\n              exit=\"exit\"\n              transition={{\n                x: { type: 'spring', stiffness: 300, damping: 200 },\n                opacity: { duration: 0.4 },\n              }}\n              className=\"absolute h-full w-full object-cover cursor-pointer\"\n              style={{ left: 'calc(100% + 0px)' }}\n              onClick={goNext}\n            >\n              <img src={items?.[nextItemIndex]?.media?.image} />\n              <div\n                className=\"absolute inset-0\"\n                style={{\n                  background:\n                    theme === 'dark'\n                      ? 'linear-gradient(to right, transparent, black 45%)'\n                      : 'linear-gradient(to right, transparent, white 45%)',\n                }}\n              />\n            </motion.div>\n          </AnimatePresence>\n          <CarouselButtons\n            className=\"absolute bottom-0 pb-4 w-full z-10 md:hidden\"\n            onClickNext={goNext}\n            onClickPrev={goPrev}\n            theme={theme}\n          />\n        </AspectRatio>\n        <div className=\"md:flex justify-between items-start md:mt-10 md:mb-40\">\n          <AnimatePresence initial={false}>\n            <motion.div {...fadeAnimationProps}>\n              <TextBlockComponent\n                key={page}\n                className=\"my-8 md:my-0 px-4 mb-20 md:w-10/12\"\n                header={items?.[itemIndex]?.content?.header}\n                copy={items?.[itemIndex]?.content?.copy}\n              />\n            </motion.div>\n          </AnimatePresence>\n          <CarouselButtons\n            className=\"hidden md:flex\"\n            onClickNext={goNext}\n            onClickPrev={goPrev}\n            theme={theme}\n          />\n        </div>\n      </div>\n    </div>\n  )\n}\n","import { Theme } from './shared'\nimport { Ratio } from '../atoms/aspect-ratio'\n\n// ===================================\n// BASE TYPES\n// ===================================\nexport type TextBlock = {\n  header: string\n  copy: string\n}\n\ntype Treatment = 'desaturate' | 'grayscale'\n\nexport type Media = {\n  image: string\n  label?: string\n  alt?: string\n  videoUrl?: string\n  autoplayVideo?: boolean\n  // Don't worry about for n\n  embedUrl?: string\n  ratio?: Ratio\n  treatments?: Treatment[]\n}\n\nexport type ImageWithText = {\n  media: Media\n  content: TextBlock\n}\n\n// ===================================\n// SECTIONS\n// ===================================\nexport type CommonSectionProps = {\n  title: string\n  shortTitle?: string\n}\n\ntype FlexibleSection = {\n  id?: number\n  type: 'flexible'\n  theme: Theme\n  bleedDirection: 'left' | 'right'\n  headerImage: Media\n  blocks: Block[]\n} & CommonSectionProps\n\nfunction isFlexibleSection(section: any): section is FlexibleSection {\n  return section.type === 'flexible'\n}\n\nexport function getFlexibleSections(sections: readonly any[]) {\n  return sections.filter(isFlexibleSection) as FlexibleSection[]\n}\n\n// ===================================\n// BLOCKS\n// ===================================\nexport type OneColumnTextBlock = {\n  type: 'one-column-text'\n  align?: 'left' | 'center' | 'right'\n} & TextBlock\n\nexport function isOneColumnTextBlock(\n  block: Block\n): block is OneColumnTextBlock {\n  return block.type === 'one-column-text'\n}\n\nexport type FullBleedImageBlock = {\n  type: 'full-bleed-image'\n} & Media\n\nexport function isFullBleedImageBlock(\n  block: Block\n): block is FullBleedImageBlock {\n  return block.type === 'full-bleed-image'\n}\n\nexport type OneColumnImageTextBlock = {\n  type: 'one-column-image-text'\n  align: string\n} & ImageWithText\n\nexport function isOneColumnImageTextBlock(\n  block: Block\n): block is OneColumnImageTextBlock {\n  return block.type === 'one-column-image-text'\n}\n\nexport type TwoColumnImageTextBlock = {\n  type: 'two-column-image-text'\n  leftColumn: ImageWithText\n  rightColumn: ImageWithText\n}\n\nexport function isTwoColumnImageTextBlock(\n  block: Block\n): block is TwoColumnImageTextBlock {\n  return block.type === 'two-column-image-text'\n}\n\nexport type TwoColumnImagesBlock = {\n  type: 'two-column-images'\n  images: [Media, Media]\n}\n\nexport function isTwoColumnImagesBlock(\n  block: Block\n): block is TwoColumnImagesBlock {\n  return block.type === 'two-column-images'\n}\n\nexport type ThreeColumnImagesBlock = {\n  type: 'three-column-images'\n  images: [Media, Media, Media]\n}\n\nexport function isThreeColumnImagesBlock(\n  block: Block\n): block is ThreeColumnImagesBlock {\n  return block.type === 'three-column-images'\n}\n\nexport type SliderBlock = {\n  type: 'slider'\n  items: ImageWithText[]\n}\n\nexport function isSliderBlock(block: Block): block is SliderBlock {\n  return block.type === 'slider'\n}\n\nexport type CarouselBlock = {\n  type: 'carousel'\n  items: ImageWithText[]\n}\n\nexport function isCarouselBlock(block: Block): block is CarouselBlock {\n  return block.type === 'carousel'\n}\n\nexport type FullWidthCarouselBlock = {\n  type: 'full-width-carousel'\n  items: ImageWithText[]\n}\n\nexport function isFullWidthCarouselBlock(\n  block: Block\n): block is FullWidthCarouselBlock {\n  return block.type === 'full-width-carousel'\n}\n\nexport type HorizontalImageTextBlock = {\n  type: 'horizontal-image-text'\n  media: Media\n  content: TextBlock\n  layout: 'imageOnLeft' | 'imageOnRight'\n}\n\nexport function isHorizontalImageTextBlock(\n  block: Block\n): block is HorizontalImageTextBlock {\n  return block.type === 'horizontal-image-text'\n}\n\ntype Block =\n  | OneColumnTextBlock\n  | FullBleedImageBlock\n  | OneColumnImageTextBlock\n  | TwoColumnImageTextBlock\n  | TwoColumnImagesBlock\n  | ThreeColumnImagesBlock\n  | SliderBlock\n  | CarouselBlock\n  | FullWidthCarouselBlock\n  | HorizontalImageTextBlock\n","/**\n * Experimenting with distilling swipe offset and velocity into a single variable, so the\n * less distance a user has swiped, the more velocity they need to register as a swipe.\n * Should accomodate longer swipes and short flicks without having binary checks on\n * just distance thresholds and velocity > 0.\n */\nconst swipeConfidenceThreshold = 10000\nconst swipePower = (offset: number, velocity: number) => {\n  return Math.abs(offset) * velocity\n}\n\n/**\n * Check the offset and velocity of a swipe action and fire the appropriate\n * callback based on a swipe confidence threshold.\n */\nexport const determineSwipeAction = ({\n  offset,\n  velocity,\n  onSwipeLeft,\n  onSwipeRight,\n}: {\n  offset: number\n  velocity: number\n  onSwipeLeft: () => void\n  onSwipeRight: () => void\n}) => {\n  const swipe = swipePower(offset, velocity)\n  if (swipe < -swipeConfidenceThreshold) {\n    onSwipeLeft()\n  } else if (swipe > swipeConfidenceThreshold) {\n    onSwipeRight()\n  }\n}\n"],"sourceRoot":""}